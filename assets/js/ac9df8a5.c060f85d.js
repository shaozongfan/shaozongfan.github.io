"use strict";(self.webpackChunkshaozongfan_website=self.webpackChunkshaozongfan_website||[]).push([[31969],{3905:function(n,e,t){t.d(e,{Zo:function(){return s},kt:function(){return d}});var r=t(67294);function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function l(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){o(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function c(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},a=Object.keys(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var p=r.createContext({}),i=function(n){var e=r.useContext(p),t=e;return n&&(t="function"==typeof n?n(e):l(l({},e),n)),t},s=function(n){var e=i(n.components);return r.createElement(p.Provider,{value:e},n.children)},f={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},u=r.forwardRef((function(n,e){var t=n.components,o=n.mdxType,a=n.originalType,p=n.parentName,s=c(n,["components","mdxType","originalType","parentName"]),u=i(t),d=o,m=u["".concat(p,".").concat(d)]||u[d]||f[d]||a;return t?r.createElement(m,l(l({ref:e},s),{},{components:t})):r.createElement(m,l({ref:e},s))}));function d(n,e){var t=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var a=t.length,l=new Array(a);l[0]=u;var c={};for(var p in e)hasOwnProperty.call(e,p)&&(c[p]=e[p]);c.originalType=n,c.mdxType="string"==typeof n?n:o,l[1]=c;for(var i=2;i<a;i++)l[i]=t[i];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},89102:function(n,e,t){t.r(e),t.d(e,{assets:function(){return s},contentTitle:function(){return p},default:function(){return d},frontMatter:function(){return c},metadata:function(){return i},toc:function(){return f}});var r=t(87462),o=t(63366),a=(t(67294),t(3905)),l=["components"],c={},p=void 0,i={permalink:"/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/3.6\u3000\u5de5\u5177\u94fe",editUrl:"https://github.com/shaozongfan/shaozongfan.github.io/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/3.6\u3000\u5de5\u5177\u94fe.md",source:"@site/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/3.6\u3000\u5de5\u5177\u94fe.md",title:"\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/3.6\u3000\u5de5\u5177\u94fe",description:"\u5728Linux\u7684\u7f16\u7a0b\u4e2d\uff0c\u901a\u5e38\u4f7f\u7528GNU\u5de5\u5177\u94fe\u7f16\u8bd1Bootloader\u3001\u5185\u6838\u548c\u5e94\u7528\u7a0b\u5e8f\u3002GNU\u7ec4\u7ec7\u7ef4\u62a4\u4e86GCC\u3001GDB\u3001glibc\u3001Binutils\u7b49\uff0c\u5206\u522b\u89c1\u4e8ehttps//www.gnu.org/software/gdb/ \uff0chttps//www.gnu.org/software/binutils/ \u3002",date:"2025-09-15T14:44:14.377Z",formattedDate:"2025\u5e749\u670815\u65e5",tags:[],readingTime:5.9,truncated:!1,authors:[],frontMatter:{},prevItem:{title:"\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/21.10\u3000\u4f7f\u7528\u4eff\u771f\u5668\u8c03\u8bd5\u5185\u6838",permalink:"/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/21.10\u3000\u4f7f\u7528\u4eff\u771f\u5668\u8c03\u8bd5\u5185\u6838"},nextItem:{title:"21.1.1\u3000GDB\u7684\u57fa\u672c\u7528\u6cd5",permalink:"/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/21.1\u3000GDB\u8c03\u8bd5\u5668\u7684\u7528\u6cd5"}},s={authorsImageUrls:[]},f=[],u={toc:f};function d(n){var e=n.components,c=(0,o.Z)(n,l);return(0,a.kt)("wrapper",(0,r.Z)({},u,c,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u5728Linux\u7684\u7f16\u7a0b\u4e2d\uff0c\u901a\u5e38\u4f7f\u7528GNU\u5de5\u5177\u94fe\u7f16\u8bd1Bootloader\u3001\u5185\u6838\u548c\u5e94\u7528\u7a0b\u5e8f\u3002GNU\u7ec4\u7ec7\u7ef4\u62a4\u4e86GCC\u3001GDB\u3001glibc\u3001Binutils\u7b49\uff0c\u5206\u522b\u89c1\u4e8e",(0,a.kt)("a",{parentName:"p",href:"https://gcc.gnu.org/"},"https://gcc.gnu.org/")," \uff0c",(0,a.kt)("a",{parentName:"p",href:"https://www.gnu.org/software/gdb/"},"https://www.gnu.org/software/gdb/")," \uff0c",(0,a.kt)("a",{parentName:"p",href:"https://www.gnu.org/software/libc/"},"https://www.gnu.org/software/libc/")," \u3001",(0,a.kt)("a",{parentName:"p",href:"https://www.gnu.org/software/binutils/"},"https://www.gnu.org/software/binutils/")," \u3002"),(0,a.kt)("p",null,"\u5efa\u7acb\u4ea4\u53c9\u5de5\u5177\u94fe\u7684\u8fc7\u7a0b\u76f8\u5f53\u70e6\u7410\uff0c\u4e00\u822c\u53ef\u4ee5\u901a\u8fc7\u7c7b\u4f3ccrosstool-ng\u8fd9\u6837\u7684\u5de5\u5177\u6765\u505a\u3002crosstool-ng\u4e5f\u91c7\u7528\u4e86\u4e0e\u5185\u6838\u76f8\u4f3c\u7684menuconfig\u914d\u7f6e\u65b9\u6cd5\u3002\u5728\u5b98\u7f51",(0,a.kt)("a",{parentName:"p",href:"http://www.crosstool-ng.org/"},"http://www.crosstool-ng.org/")," \u4e0a\u4e0b\u8f7dcrosstool-ng\u7684\u6e90\u4ee3\u7801\u5e76\u7f16\u8bd1\u5b89\u88c5\u540e\uff0c\u8fd0\u884cct-ng menuconfig\uff0c\u4f1a\u51fa\u73b0\u5982\u56fe3.12\u7684\u914d\u7f6e\u83dc\u5355\u3002\u5728\u91cc\u9762\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u76ee\u6807\u673a\u5904\u7406\u5668\u578b\u53f7\uff0c\u652f\u6301\u7684\u5185\u6838\u7248\u672c\u53f7\u7b49\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"1742740211566",src:t(21325).Z,width:"1114",height:"516"})),(0,a.kt)("p",null,"\u56fe3.12\u3000crosstool-ng\u7684\u914d\u7f6e\u83dc\u5355"),(0,a.kt)("p",null,"\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u7b2c\u4e09\u65b9\u7f16\u8bd1\u597d\u7684\u3001\u5f00\u653e\u7684\u3001\u9488\u5bf9\u76ee\u6807\u5904\u7406\u5668\u7684\u4ea4\u53c9\u5de5\u5177\u94fe\uff0c\u5982\u5728",(0,a.kt)("a",{parentName:"p",href:"http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/"},"http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/")," \u4e0a\u53ef\u4ee5\u4e0b\u8f7d\u9488\u5bf9ARM\u3001MIPS\u3001\u9ad8\u901aHexagon\u3001Altera Nios II\u3001Intel\u3001AMD64\u7b49\u5904\u7406\u5668\u7684\u5de5\u5177\u94fe\uff0c\u5728",(0,a.kt)("a",{parentName:"p",href:"http://www.linaro.org/downloads/"},"http://www.linaro.org/downloads/")," \u53ef\u4ee5\u4e0b\u8f7d\u9488\u5bf9ARM\u7684\u5de5\u5177\u94fe\u3002"),(0,a.kt)("p",null,"\u76ee\u524d\uff0c\u5728ARM Linux\u7684\u5f00\u53d1\u4e2d\uff0c\u4eba\u4eec\u8d8b\u5411\u4e8e\u4f7f\u7528Linaro\uff08",(0,a.kt)("a",{parentName:"p",href:"http://www.linaro.org/"},"http://www.linaro.org/")," \uff09\u5de5\u5177\u94fe\u56e2\u961f\u7ef4\u62a4\u7684ARM\u5de5\u5177\u94fe\uff0c\u5b83\u4ee5\u6bcf\u6708\u4e00\u6b21\u7684\u5f62\u5f0f\u53d1\u5e03\u65b0\u7684\u7248\u672c\uff0c\u7f16\u8bd1\u597d\u7684\u53ef\u6267\u884c\u6587\u4ef6\u53ef\u4ece\u7f51\u5740",(0,a.kt)("a",{parentName:"p",href:"http://www.linaro.org/downloads/"},"http://www.linaro.org/downloads/")," \u4e0b\u8f7d\u3002Linaro\u662fARM Linux\u9886\u57df\u4e2d\u6700\u8457\u540d\u6700\u5177\u6280\u672f\u6210\u5c31\u7684\u5f00\u6e90\u7ec4\u7ec7\uff0c\u5176\u4f1a\u5458\u5305\u62ecARM\u3001Broadcom\u3001Samsung\u3001TI\u3001Qualcomm\u7b49\uff0c\u56fd\u5185\u7684\u6d77\u601d\u3001\u4e2d\u5174\u3001\u5168\u5fd7\u548c\u4e2d\u56fd\u53f0\u6e7e\u7684MediaTek\u4e5f\u662f\u5b83\u7684\u4f1a\u5458\u3002"),(0,a.kt)("p",null,"\u4e00\u4e2a\u5178\u578b\u7684ARM Linux\u5de5\u5177\u94fe\u5305\u542barm-linux-gnueabihf-gcc\uff08\u540e\u7eed\u5de5\u5177\u7701\u7565\u524d\u7f00\uff09\u3001strip\u3001gcc\u3001objdump\u3001ld\u3001gprof\u3001nm\u3001readelf\u3001addr2line\u7b49\u3002\u7528strip\u53ef\u4ee5\u5220\u9664\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u7684\u7b26\u53f7\u8868\u548c\u8c03\u8bd5\u4fe1\u606f\u7b49\u6765\u5b9e\u73b0\u7f29\u51cf\u7a0b\u5e8f\u4f53\u79ef\u7684\u76ee\u7684\u3002gprof\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u5728\u51fd\u6570\u5165\u53e3\u5904\u63d2\u5165\u8ba1\u6570\u5668\u4ee5\u6536\u96c6\u6bcf\u4e2a\u51fd\u6570\u7684\u88ab\u8c03\u7528\u60c5\u51b5\u548c\u88ab\u8c03\u7528\u6b21\u6570\uff0c\u68c0\u67e5\u7a0b\u5e8f\u8ba1\u6570\u5668\u5e76\u5728\u5206\u6790\u65f6\u627e\u51fa\u4e0e\u7a0b\u5e8f\u8ba1\u6570\u5668\u5bf9\u5e94\u7684\u51fd\u6570\u6765\u7edf\u8ba1\u51fd\u6570\u5360\u7528\u7684\u65f6\u95f4\u3002objdump\u662f\u53cd\u6c47\u7f16\u5de5\u5177\u3002nm\u5219\u7528\u4e8e\u663e\u793a\u5173\u4e8e\u5bf9\u8c61\u6587\u4ef6\u3001\u53ef\u6267\u884c\u6587\u4ef6\u4ee5\u53ca\u5bf9\u8c61\u6587\u4ef6\u5e93\u91cc\u7684\u7b26\u53f7\u4fe1\u606f\u3002\u5176\u4e2d\uff0c\u524d\u7f00\u4e2d\u7684\u201chf\u201d\u663e\u793a\u8be5\u5de5\u5177\u94fe\u662f\u5b8c\u5168\u7684\u786c\u6d6e\u70b9\uff0c\u7531\u4e8e\u76ee\u524d\u4e3b\u6d41\u7684ARM\u82af\u7247\u90fd\u81ea\u5e26VFP\u6216\u8005NEON\u7b49\u6d6e\u70b9\u5904\u7406\u5355\u5143\uff08FPU\uff09\uff0c\u6240\u4ee5\u5bf9\u786c\u6d6e\u70b9\u7684\u9700\u6c42\u5c31\u66f4\u52a0\u5f3a\u70c8\u3002Linux\u7684\u6d6e\u70b9\u5904\u7406\u53ef\u4ee5\u91c7\u7528\u5b8c\u5168\u8f6f\u6d6e\u70b9\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528\u4e0e\u8f6f\u6d6e\u70b9\u517c\u5bb9\uff0c\u4f46\u662f\u4f7f\u7528FPU\u786c\u4ef6\u7684softfp\uff0c\u4ee5\u53ca\u5b8c\u5168\u786c\u6d6e\u70b9\u3002\u5177\u4f53\u7684ABI\uff08Application Binary Interface\uff0c\u5e94\u7528\u7a0b\u5e8f\u4e8c\u8fdb\u5236\u63a5\u53e3\uff09\u901a\u8fc7-mfloat-abi=\u53c2\u6570\u6307\u5b9a\uff0c3\u79cd\u60c5\u51b5\u4e0b\u7684\u53c2\u6570\u5206\u522b\u662f-mfloat-abi=soft/softfp/hard\u3002"),(0,a.kt)("p",null,"\u5728\u4ee5\u524d\uff0c\u4e3b\u6d41\u7684\u5de5\u5177\u94fe\u91c7\u7528\u201c\u4e0e\u8f6f\u6d6e\u70b9\u517c\u5bb9\uff0c\u4f46\u662f\u4f7f\u7528FPU\u786c\u4ef6\u7684softfp\u201d\u3002softfp\u4f7f\u7528\u4e86\u786c\u4ef6\u7684FPU\uff0c\u4f46\u662f\u51fd\u6570\u7684\u53c2\u6570\u4ecd\u7136\u4f7f\u7528\u6574\u578b\u5bc4\u5b58\u5668\u6765\u4f20\u9012\uff0c\u5b8c\u5168\u786c\u6d6e\u70b9\u5219\u76f4\u63a5\u4f7f\u7528FPU\u7684\u5bc4\u5b58\u5668\u4f20\u9012\u53c2\u6570\u3002"),(0,a.kt)("p",null,"\u4e0b\u9762\u4e00\u6bb5\u7a0b\u5e8f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'float mul(float a, float b)\n{\n        return a * b;\n}\nvoid main(void)\n{\n        printf("1.1 * 2.3 = %f\\n", mul(1.1, 2.3));\n}\n')),(0,a.kt)("p",null,"\u5bf9\u5176\u4f7f\u7528arm-linux-gnueabihf-gcc\u7f16\u8bd1\u5e76\u53cd\u6c47\u7f16\u7684\u7ed3\u679c\u662f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"000 08394 <mul>:\n     8394: b480        push  {r7}\n     8396: b083        sub  sp, #12\n     8398: af00        add  r7, sp, #0\n  839a: ed87 0a01\n\n\nvstr\n\n\ns0, [r7, #4](null)\n\n\n839e: edc7 0a00\n\n\nvstr\n\n\ns1, [r7]\n\n\n\n     83a2: ed97 7a01   vldr  s14, [r7, #4](null)\n     83a6: edd7 7a00   vldr  s15, [r7]\n     83aa: ee67 7a27   vmul.f32  s15, s14, s15\n     83ae: eeb0 0a67   vmov.f32  s0, s15\n     83b2: f107 070c   add.w  r7, r7, #12\n     83b6: 46bd        mov  sp, r7\n     83b8: bc80        pop  {r7}\n     83ba: 4770        bxlr\n0000 83bc <main>:\n     83bc: b580        push  {r7, lr}\n     83be: af00        add  r7, sp, #0\n   83c0: ed9f 0a09\n\n\nvldr\n\n\ns0, [pc, #36](null)\n\n\n; 83e8 <main+0x2c>\n\n\n83c4: eddf 0a09\n\n\nvldr\n\n\ns1, [pc, #36](null)\n\n\n; 83ec <main+0x30>\n\n\n\n     83c8: f7ff ffe4   b8394 <mul>\n     83cc: eef0 7a40   vmov.f32  s15, s0\n     83d0: eeb7 7ae7   vcvt.f64.f32  d7, s15\n     83d4: f248 4044   movw  r0, #33860  ; 0x8444\n     83d8: f2c0 0000   movt  r0, #0\n     83dc: ec53 2b17   vmov  r2, r3, d7\n     83e0: f7ff ef82   blx  82e8 <_init+0x20>\n     83e4: bd80        pop  {r7, pc}\n     83e6: bf00        nop\n")),(0,a.kt)("p",null,"\u800c\u4f7f\u7528\u6ca1\u6709\u201chf\u201d\u524d\u7f00\u7684arm-linux-gnueabi-gcc\u7f16\u8bd1\u5e76\u53cd\u6c47\u7f16\u7684\u7ed3\u679c\u5219\u4e3a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"000 0838c <mul>:\n     838c: b480        push  {r7}\n     838e: b083        sub  sp, #12\n     8390: af00        add  r7, sp, #0\n   8392: 6078        str  r0, [r7, #4]\n\n\n8394: 6039        str  r1, [r7, #0]\n\n\n8396: ed97 7a01   vldr  s14, [r7, #4](null)\n\n\n839a: edd7 7a00   vldr  s15, [r7]\n\n\n\n     839e: ee67 7a27   vmul.f32  s15, s14, s15\n     83a2: ee17 3a90   vmov  r3, s15\n     83a6: 4618        mov  r0, r3\n     83a8: f107 070c   add.w  r7, r7, #12\n     83ac: 46bd        mov  sp, r7\n     83ae: bc80        pop  {r7}\n     83b0: 4770        bxlr\n     83b2: bf00        nop\n000 083b4 <main>:\n     83b4: b580        push  {r7, lr}\n     83b6: af00        add  r7, sp, #0\n   83b8: 4808        ldr  r0, [pc, #32]  ; (83dc <main+0x28>)\n\n\n83ba: 4909        ldr  r1, [pc, #36]  ; (83e0 <main+0x2c>)\n\n\n\n     83bc: f7ff ffe6   bl  838c <mul>\n     83c0: ee07 0a90   vmov  s15, r0\n     83c4: eeb7 7ae7   vcvt.f64.f32  d7, s15\n     83c8: f248 4038   movwr0, #33848; 0x8438\n     83cc: f2c0 0000   movtr0, #0\n     83d0: ec53 2b17   vmovr2, r3, d7\n     83d4: f7ff ef84   blx  82e0 <_init+0x20>\n     83d8: bd80        pop  {r7, pc}\n     83da: bf00        nop\n")),(0,a.kt)("p",null,"\u5173\u6ce8\u5176\u4e2d\u52a0\u7c97\u7684\u884c\uff0c\u53ef\u4ee5\u770b\u51fa\u524d\u9762\u7684\u6c47\u7f16\u4f7f\u7528s0\u548cs1\u4f20\u9012\u53c2\u6570\uff0c\u540e\u8005\u5219\u4ecd\u7136\u4f7f\u7528ARM\u7684r0\u548cr1\u3002\u6d4b\u8bd5\u663e\u793a\u4e00\u4e2a\u542b\u6709\u6d6e\u70b9\u8fd0\u7b97\u7684\u7a0b\u5e8f\u82e5\u4f7f\u7528hard ABI\u4f1a\u6bd4softfp ABI\u5feb5%~40%\uff0c\u5982\u679c\u6d6e\u70b9\u8d1f\u8f7d\u91cd\uff0c\u7ed3\u679c\u53ef\u80fd\u4f1a\u5feb200%\u4ee5\u4e0a"))}d.isMDXComponent=!0},21325:function(n,e,t){e.Z=t.p+"assets/images/1742740211566-121f583c22b586c384a5f2eac180b844.png"}}]);