"use strict";(self.webpackChunkshaozongfan_website=self.webpackChunkshaozongfan_website||[]).push([[34125],{3905:function(e,n,r){r.d(n,{Zo:function(){return f},kt:function(){return k}});var t=r(67294);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function p(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=t.createContext({}),d=function(e){var n=t.useContext(l),r=n;return e&&(r="function"==typeof e?e(n):o(o({},n),e)),r},f=function(e){var n=d(e.components);return t.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var r=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,f=p(e,["components","mdxType","originalType","parentName"]),c=d(r),k=i,_=c["".concat(l,".").concat(k)]||c[k]||u[k]||a;return r?t.createElement(_,o(o({ref:n},f),{},{components:r})):t.createElement(_,o({ref:n},f))}));function k(e,n){var r=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=r.length,o=new Array(a);o[0]=c;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p.mdxType="string"==typeof e?e:i,o[1]=p;for(var d=2;d<a;d++)o[d]=r[d];return t.createElement.apply(null,o)}return t.createElement.apply(null,r)}c.displayName="MDXCreateElement"},97119:function(e,n,r){r.r(n),r.d(n,{assets:function(){return f},contentTitle:function(){return l},default:function(){return k},frontMatter:function(){return p},metadata:function(){return d},toc:function(){return u}});var t=r(87462),i=r(63366),a=(r(67294),r(3905)),o=["components"],p={},l=void 0,d={permalink:"/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/21.3\u3000\u5185\u6838\u6253\u5370\u4fe1\u606f\u2014printk\uff08\u200b\uff09",editUrl:"https://github.com/shaozongfan/shaozongfan.github.io/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/21.3\u3000\u5185\u6838\u6253\u5370\u4fe1\u606f\u2014printk\uff08\u200b\uff09.md",source:"@site/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/21.3\u3000\u5185\u6838\u6253\u5370\u4fe1\u606f\u2014printk\uff08\u200b\uff09.md",title:"\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/21.3\u3000\u5185\u6838\u6253\u5370\u4fe1\u606f\u2014printk\uff08\u200b\uff09",description:"\u5728Linux\u4e2d\uff0c\u5185\u6838\u6253\u5370\u8bed\u53e5printk\uff08\uff09\u4f1a\u5c06\u5185\u6838\u4fe1\u606f\u8f93\u51fa\u5230\u5185\u6838\u4fe1\u606f\u7f13\u51b2\u533a\u4e2d\uff0c\u5185\u6838\u7f13\u51b2\u533a\u662f\u5728kernel/printk.c\u4e2d\u901a\u8fc7\u5982\u4e0b\u8bed\u53e5\u9759\u6001\u5b9a\u4e49\u7684\uff1a",date:"2025-09-15T14:44:14.629Z",formattedDate:"2025\u5e749\u670815\u65e5",tags:[],readingTime:7.345,truncated:!1,authors:[],frontMatter:{},prevItem:{title:"\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/4.1\u3000Linux\u5185\u6838\u6a21\u5757\u7b80\u4ecb",permalink:"/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/4.1\u3000Linux\u5185\u6838\u6a21\u5757\u7b80\u4ecb"},nextItem:{title:"\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/19.2\u3000CPUFreq\u9a71\u52a8",permalink:"/blog/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/19.2\u3000CPUFreq\u9a71\u52a8"}},f={authorsImageUrls:[]},u=[],c={toc:u};function k(e){var n=e.components,r=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,t.Z)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u5728Linux\u4e2d\uff0c\u5185\u6838\u6253\u5370\u8bed\u53e5printk\uff08\uff09\u4f1a\u5c06\u5185\u6838\u4fe1\u606f\u8f93\u51fa\u5230\u5185\u6838\u4fe1\u606f\u7f13\u51b2\u533a\u4e2d\uff0c\u5185\u6838\u7f13\u51b2\u533a\u662f\u5728kernel/printk.c\u4e2d\u901a\u8fc7\u5982\u4e0b\u8bed\u53e5\u9759\u6001\u5b9a\u4e49\u7684\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"static char __log_buf[__LOG_BUF_LEN] __aligned(LOG_ALIGN);\n")),(0,a.kt)("p",null,"\u5185\u6838\u4fe1\u606f\u7f13\u51b2\u533a\u662f\u4e00\u4e2a\u73af\u5f62\u7f13\u51b2\u533a\uff08Ring Buffer\uff09\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u585e\u5165\u7684\u6d88\u606f\u8fc7\u591a\uff0c\u5219\u5c31\u4f1a\u5c06\u4e4b\u524d\u7684\u6d88\u606f\u51b2\u5237\u6389\u3002"),(0,a.kt)("p",null,"printk\uff08\uff09\u5b9a\u4e49\u4e868\u4e2a\u6d88\u606f\u7ea7\u522b\uff0c\u5206\u4e3a\u7ea7\u522b0~7\uff0c\u7ea7\u522b\u8d8a\u4f4e\uff08\u6570\u503c\u8d8a\u5927\uff09\uff0c\u6d88\u606f\u8d8a\u4e0d\u91cd\u8981\uff0c\u7b2c0\u7ea7\u662f\u7d27\u6025\u4e8b\u4ef6\u7ea7\uff0c\u7b2c7\u7ea7\u662f\u8c03\u8bd5\u7ea7\uff0c\u4ee3\u7801\u6e05\u535521.2\u6240\u793a\u4e3aprintk\uff08\uff09\u7684\u7ea7\u522b\u5b9a\u4e49\u3002"),(0,a.kt)("p",null,"\u4ee3\u7801\u6e05\u535521.2\u3000printk\uff08\uff09\u7684\u7ea7\u522b\u5b9a\u4e49"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},' 1 #define KERN_EMERG "<0>"      /* \u7d27\u6025\u4e8b\u4ef6\uff0c\u4e00\u822c\u662f\u7cfb\u7edf\u5d29\u6e83\u4e4b\u524d\u63d0\u793a\u7684\u6d88\u606f */\n 2 #define KERN_ALERT "<1>"      /* \u5fc5\u987b\u7acb\u5373\u91c7\u53d6\u884c\u52a8*/\n 3 #define KERN_CRIT "<2>"       /* \u4e34\u754c\u72b6\u6001\uff0c\u901a\u5e38\u6d89\u53ca\u4e25\u91cd\u7684\u786c\u4ef6\u6216\u8f6f\u4ef6\u64cd\u4f5c\u5931\u8d25*/\n 4 #define KERN_ERR  "<3>"       /* \u7528\u4e8e\u62a5\u544a\u9519\u8bef\u72b6\u6001\uff0c\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u4f1a\u7ecf\u5e38\u4f7f\u7528KERN_ERR\u6765\u62a5\u544a\u6765\u81ea\u786c\u4ef6\u7684\u95ee\u9898*/\n 6 #define KERN_WARNING  "<4>"   /* \u5bf9\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u7684\u60c5\u51b5\u8fdb\u884c\u8b66\u544a\uff0c\n 7                                  \u8fd9\u7c7b\u60c5\u51b5\u901a\u5e38\u4e0d\u4f1a\u5bf9\u7cfb\u7edf\u9020\u6210\u4e25\u91cd\u7684\u95ee\u9898*/\n 8 #define KERN_NOTICE   "<5>"   /* \u6709\u5fc5\u8981\u8fdb\u884c\u63d0\u793a\u7684\u6b63\u5e38\u60c5\u5f62\uff0c\n 9                                  \u8bb8\u591a\u4e0e\u5b89\u5168\u76f8\u5173\u7684\u72b6\u51b5\u7528\u8fd9\u4e2a\u7ea7\u522b\u8fdb\u884c\u6c47\u62a5*/\n10#define KERN_INFO     "<6>"    /* \u5185\u6838\u63d0\u793a\u6027\u4fe1\u606f\uff0c\u5f88\u591a\u9a71\u52a8\u7a0b\u5e8f\n11                                  \u5728\u542f\u52a8\u7684\u65f6\u5019\uff0c\u7528\u8fd9\u4e2a\u7ea7\u522b\u6253\u5370\u51fa\u5b83\u4eec\u627e\u5230\u7684\u786c\u4ef6\u4fe1\u606f*/\n12#define KERN_DEBUG    "<7>"    /* \u7528\u4e8e\u8c03\u8bd5\u4fe1\u606f*/\n')),(0,a.kt)("p",null,"\u901a\u8fc7/proc/sys/kernel/printk\u6587\u4ef6\u53ef\u4ee5\u8c03\u8282printk\uff08\uff09\u7684\u8f93\u51fa\u7b49\u7ea7\uff0c\u8be5\u6587\u4ef6\u67094\u4e2a\u6570\u5b57\u503c\uff0c\u5982\u4e0b\u6240\u793a\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\xb7\u63a7\u5236\u53f0\uff08\u4e00\u822c\u662f\u4e32\u53e3\uff09\u65e5\u5fd7\u7ea7\u522b\uff1a\u5f53\u524d\u7684\u6253\u5370\u7ea7\u522b\uff0c\u4f18\u5148\u7ea7\u9ad8\u4e8e\u8be5\u503c\u7684\u6d88\u606f\u5c06\u88ab\u6253\u5370\u81f3\u63a7\u5236\u53f0\u3002"),(0,a.kt)("li",{parentName:"ul"},"\xb7\u9ed8\u8ba4\u7684\u6d88\u606f\u65e5\u5fd7\u7ea7\u522b\uff1a\u5c06\u7528\u8be5\u4f18\u5148\u7ea7\u6765\u6253\u5370\u6ca1\u6709\u4f18\u5148\u7ea7\u524d\u7f00\u7684\u6d88\u606f\uff0c\u4e5f\u5c31\u662f\u5728\u76f4\u63a5\u5199printk\uff08\u201cxxx\u201d\uff09\u800c\u4e0d\u5e26\u6253\u5370\u7ea7\u522b\u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u4f7f\u7528\u8be5\u6253\u5370\u7ea7\u522b\u3002"),(0,a.kt)("li",{parentName:"ul"},"\xb7\u6700\u4f4e\u7684\u63a7\u5236\u53f0\u65e5\u5fd7\u7ea7\u522b\uff1a\u63a7\u5236\u53f0\u65e5\u5fd7\u7ea7\u522b\u53ef\u88ab\u8bbe\u7f6e\u7684\u6700\u5c0f\u503c\uff08\u4e00\u822c\u90fd\u662f1\uff09\u3002"),(0,a.kt)("li",{parentName:"ul"},"\xb7\u9ed8\u8ba4\u7684\u63a7\u5236\u53f0\u65e5\u5fd7\u7ea7\u522b\uff1a\u63a7\u5236\u53f0\u65e5\u5fd7\u7ea7\u522b\u7684\u9ed8\u8ba4\u503c\u3002")),(0,a.kt)("p",null,"\u5982\u5728Ubuntu PC\u4e0a\uff0c/proc/sys/kernel/printk\u7684\u503c\u4e00\u822c\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ cat /proc/sys/kernel/printk\n4   4    1   7\n")),(0,a.kt)("p",null,"\u800c\u6211\u4eec\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u53ef\u4ee5\u4f7f\u5f97Linux\u5185\u6838\u7684\u4efb\u4f55printk\uff08\uff09\u90fd\u4ece\u63a7\u5236\u53f0\u8f93\u51fa\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# echo 8 > /proc/sys/kernel/printk\n")),(0,a.kt)("p",null,"\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cDEBUG\u7ea7\u522b\u7684\u6d88\u606f\u4e0d\u4f1a\u4ece\u63a7\u5236\u53f0\u8f93\u51fa\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728bootargs\u4e2d\u8bbe\u7f6eignore_loglevel\u6765\u5ffd\u7565\u6253\u5370\u7ea7\u522b\uff0c\u4ee5\u4fdd\u8bc1\u6240\u6709\u6d88\u606f\u90fd\u88ab\u6253\u5370\u5230\u63a7\u5236\u53f0\u3002\u5728\u7cfb\u7edf\u542f\u52a8\u540e\uff0c\u7528\u6237\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5199/sys/module/printk/parameters/ignore_loglevel\u6587\u4ef6\u52a8\u6001\u6765\u8bbe\u7f6e\u662f\u5426\u5ffd\u7565\u6253\u5370\u7ea7\u522b\u3002"),(0,a.kt)("p",null,"\u8981\u6ce8\u610f\u7684\u662f\uff0c/proc/sys/kernel/printk\u5e76\u4e0d\u63a7\u5236\u5185\u6838\u6d88\u606f\u8fdb\u5165",(0,a.kt)("strong",{parentName:"p"},"log_buf\u7684\u95e8\u69db\uff0c\u56e0\u6b64\u65e0\u8bba\u6d88\u606f\u7ea7\u522b\u662f\u591a\u5c11\uff0c\u90fd\u4f1a\u8fdb\u5165"),"log_buf\u4e2d\uff0c\u4f46\u662f\u6700\u7ec8\u53ea\u6709\u9ad8\u4e8e\u5f53\u524d\u6253\u5370\u7ea7\u522b\u7684\u5185\u6838\u6d88\u606f\u624d\u4f1a\u4ece\u63a7\u5236\u53f0\u6253\u5370\u3002"),(0,a.kt)("p",null,"\u7528\u6237\u53ef\u4ee5\u901a\u8fc7dmesg\u547d\u4ee4\u67e5\u770b\u5185\u6838\u6253\u5370\u7f13\u51b2\u533a\uff0c\u800c\u5982\u679c\u4f7f\u7528dmesg-c\u547d\u4ee4\uff0c\u5219\u4e0d\u4ec5\u4f1a\u663e\u793a__log_buf\uff0c\u8fd8\u4f1a\u6e05\u9664\u8be5\u7f13\u51b2\u533a\u7684\u5185\u5bb9\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528cat/proc/kmsg\u547d\u4ee4\u6765\u663e\u793a\u5185\u6838\u4fe1\u606f\u3002/proc/kmsg\u662f\u4e00\u4e2a\u201c\u6c38\u65e0\u4f11\u6b62\u7684\u6587\u4ef6\u201d\uff0c\u56e0\u6b64\uff0ccat/proc/kmsg\u7684\u8fdb\u7a0b\u53ea\u80fd\u901a\u8fc7\u201cCtrl+C\u201d\u6216kill\u7ec8\u6b62\u3002"),(0,a.kt)("p",null,"\u5728\u8bbe\u5907\u9a71\u52a8\u4e2d\uff0c\u7ecf\u5e38\u9700\u8981\u8f93\u51fa\u8c03\u8bd5\u6216\u7cfb\u7edf\u4fe1\u606f\uff0c\u5c3d\u7ba1\u53ef\u4ee5\u76f4\u63a5\u91c7\u7528printk\uff08\u201c<7>debug info\u2026\\n\u201d\uff09\u65b9\u5f0f\u7684printk\uff08\uff09\u8bed\u53e5\u8f93\u51fa\uff0c\u4f46\u662f\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528\u5c01\u88c5\u4e86printk\uff08\uff09\u7684\u66f4\u9ad8\u7ea7\u7684\u5b8f\uff0c\u5982pr_debug\uff08\uff09\u3001dev_debug\uff08\uff09\u7b49\u3002\u4ee3\u7801\u6e05\u535521.3\u6240\u793a\u4e3apr_debug\uff08\uff09\u548cpr_info\uff08\uff09\u7684\u5b9a\u4e49\u3002"),(0,a.kt)("p",null,"\u4ee3\u7801\u6e05\u535521.3\u3000\u53ef\u66ff\u4ee3printk\uff08\uff09\u7684\u5b8fpr_debug\uff08\uff09\u548cpr_info\uff08\uff09\u7684\u5b9a\u4e49"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"}," 1#ifdef DEBUG\n 2#define pr_debug(fmt,arg...) \\\n 3  printk(KERN_DEBUG fmt,##arg)\n 4#else\n 5static inline int _ _attribute_ _ ((format (printf, 1, 2))) pr_debug(const char * fmt, ...)\n 6{\n 7   return 0;\n 8}\n 9#endif\n10\n11#define pr_info(fmt,arg...) \\\n12   printk(KERN_INFO fmt,##arg)\n")),(0,a.kt)("p",null,"\u4f7f\u7528pr_xxx\uff08\uff09\u65cfAPI\u7684\u597d\u5904\u662f\uff0c\u53ef\u4ee5\u5728\u6587\u4ef6\u6700\u5f00\u5934\u901a\u8fc7pr_fmt\uff08\uff09\u5b9a\u4e49\u4e00\u4e2a\u6253\u5370\u683c\u5f0f\uff0c\u6bd4\u5982\u5728kernel/watchdog.c\u7684\u6700\u5f00\u5934\u901a\u8fc7\u5982\u4e0b\u5b9a\u4e49\u53ef\u4ee5\u4fdd\u8bc1\u4e4b\u540ewatchdog.c\u8c03\u7528\u7684\u6240\u6709pr_xxx\uff08\uff09\u6253\u5370\u7684\u6d88\u606f\u90fd\u81ea\u52a8\u5e26\u6709\u201cNMI watchdog\uff1a\u201d\u7684\u524d\u7f00\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'#define pr_fmt(fmt) "NMI watchdog: " fmt\n#include <linux/mm.h>\n#include <linux/cpu.h>\n#include <linux/nmi.h>\u2026\n')),(0,a.kt)("p",null,"\u4ee3\u7801\u6e05\u535521.4\u6240\u793a\u4e3adev_dbg\uff08\uff09\u3001dev_err\uff08\uff09\u3001dev_info\uff08\uff09\u7b49\u7684\u5b9a\u4e49\uff0c\u4f7f\u7528dev_xxx\uff08\uff09\u65cfAPI\u6253\u5370\u7684\u65f6\u5019\uff0c\u8bbe\u5907\u540d\u79f0\u4f1a\u88ab\u81ea\u52a8\u52a0\u5230\u6253\u5370\u6d88\u606f\u7684\u524d\u5934\u3002"),(0,a.kt)("p",null,"\u4ee3\u7801\u6e05\u535521.4\u3000\u5305\u542b\u8bbe\u5907\u4fe1\u606f\u7684\u53ef\u66ff\u4ee3printk\uff08\uff09\u7684\u5b8f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},' 1#define dev_printk(level, dev, format, arg...)  \\\n 2  printk(level "%s %s: " format , dev_driver_string(dev) , (dev)->bus_id , ## arg)\n 3\n 4#ifdef DEBUG\n 5#define dev_dbg(dev, format, arg...)            \\\n 6       dev_printk(KERN_DEBUG , dev , format , ## arg)\n 7#else\n 8#define dev_dbg(dev, format, arg...) do { (void)(dev); } while (0)\n 9#endif\n10\n11#define dev_err(dev, format, arg...)            \\\n12       dev_printk(KERN_ERR , dev , format , ## arg)\n13#define dev_info(dev, format, arg...)           \\\n14       dev_printk(KERN_INFO , dev , format , ## arg)\n15#define dev_warn(dev, format, arg...)           \\\n16       dev_printk(KERN_WARNING , dev , format , ## arg)\n17#define dev_notice(dev, format, arg...)         \\\n18       dev_printk(KERN_NOTICE , dev , format , ## arg)\n')),(0,a.kt)("p",null,"\u4ee3\u7801\u6e05\u535521.4\u6240\u793a\u4e3adev_dbg\uff08\uff09\u3001dev_err\uff08\uff09\u3001dev_info\uff08\uff09\u7b49\u7684\u5b9a\u4e49\uff0c\u4f7f\u7528dev_xxx\uff08\uff09\u65cfAPI\u6253\u5370\u7684\u65f6\u5019\uff0c\u8bbe\u5907\u540d\u79f0\u4f1a\u88ab\u81ea\u52a8\u52a0\u5230\u6253\u5370\u6d88\u606f\u7684\u524d\u5934\u3002"),(0,a.kt)("p",null,"\u4ee3\u7801\u6e05\u535521.4\u3000\u5305\u542b\u8bbe\u5907\u4fe1\u606f\u7684\u53ef\u66ff\u4ee3printk\uff08\uff09\u7684\u5b8f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},' 1#define dev_printk(level, dev, format, arg...)  \\\n 2  printk(level "%s %s: " format , dev_driver_string(dev) , (dev)->bus_id , ## arg)\n 3\n 4#ifdef DEBUG\n 5#define dev_dbg(dev, format, arg...)            \\\n 6       dev_printk(KERN_DEBUG , dev , format , ## arg)\n 7#else\n 8#define dev_dbg(dev, format, arg...) do { (void)(dev); } while (0)\n 9#endif\n10\n11#define dev_err(dev, format, arg...)            \\\n12       dev_printk(KERN_ERR , dev , format , ## arg)\n13#define dev_info(dev, format, arg...)           \\\n14       dev_printk(KERN_INFO , dev , format , ## arg)\n15#define dev_warn(dev, format, arg...)           \\\n16       dev_printk(KERN_WARNING , dev , format , ## arg)\n17#define dev_notice(dev, format, arg...)         \\\n18       dev_printk(KERN_NOTICE , dev , format , ## arg)\n')),(0,a.kt)("p",null,"\u5728\u6253\u5370\u4fe1\u606f\u65f6\uff0c\u5982\u679c\u60f3\u8f93\u51faprintk\uff08\uff09\u8c03\u7528\u6240\u5728\u7684\u51fd\u6570\u540d\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,a.kt)("strong",{parentName:"p"},"func"),"\uff1b\u5982\u679c\u60f3\u8f93\u51fa\u5176\u6240\u5728\u4ee3\u7801\u7684\u884c\u53f7\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,a.kt)("strong",{parentName:"p"},"LINE"),"\uff1b\u60f3\u8f93\u51fa\u6e90\u4ee3\u7801\u6587\u4ef6\u540d\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,a.kt)("strong",{parentName:"p"},"FILE"),"\u3002\u4f8b\u5982drivers/block/sx8.c\u4e2d\u7684\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'#ifdef CARM_NDEBUG\n#define assert(expr)\n#else\n#define assert(expr) \\\n       if(unlikely(!(expr))) {                                 \\\n       printk(KERN_ERR "Assertion failed! %s,%s,%s,line=%d\\n", \\\n       #expr, __FILE__, __func__, __LINE__);          \\\n       }\n#endif\n')))}k.isMDXComponent=!0}}]);