"use strict";(self.webpackChunkshaozongfan_website=self.webpackChunkshaozongfan_website||[]).push([[2646],{3905:function(t,e,n){n.d(e,{Zo:function(){return c},kt:function(){return f}});var r=n(67294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var p=r.createContext({}),l=function(t){var e=r.useContext(p),n=e;return t&&(n="function"==typeof t?t(e):a(a({},e),t)),n},c=function(t){var e=l(t.components);return r.createElement(p.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},s=r.forwardRef((function(t,e){var n=t.components,i=t.mdxType,o=t.originalType,p=t.parentName,c=u(t,["components","mdxType","originalType","parentName"]),s=l(n),f=i,m=s["".concat(p,".").concat(f)]||s[f]||d[f]||o;return n?r.createElement(m,a(a({ref:e},c),{},{components:n})):r.createElement(m,a({ref:e},c))}));function f(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var o=n.length,a=new Array(o);a[0]=s;var u={};for(var p in e)hasOwnProperty.call(e,p)&&(u[p]=e[p]);u.originalType=t,u.mdxType="string"==typeof t?t:i,a[1]=u;for(var l=2;l<o;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}s.displayName="MDXCreateElement"},18061:function(t,e,n){n.r(e),n.d(e,{assets:function(){return c},contentTitle:function(){return p},default:function(){return f},frontMatter:function(){return u},metadata:function(){return l},toc:function(){return d}});var r=n(87462),i=n(63366),o=(n(67294),n(3905)),a=["components"],u={},p="1\uff0eARM64\u5904\u7406\u5668\u4e2d\u6709\u4e24\u4e2a\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668TTBR0\u548cTTBR1\uff0c\u5904\u7406\u5668\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\uff1f",l={unversionedId:"\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784/2\u3001ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0\u9762\u8bd5\u9898",id:"\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784/2\u3001ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0\u9762\u8bd5\u9898",title:"1\uff0eARM64\u5904\u7406\u5668\u4e2d\u6709\u4e24\u4e2a\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668TTBR0\u548cTTBR1\uff0c\u5904\u7406\u5668\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\uff1f",description:"",source:"@site/docs/\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784/2\u3001ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0\u9762\u8bd5\u9898.md",sourceDirName:"\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784",slug:"/\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784/2\u3001ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0\u9762\u8bd5\u9898",permalink:"/docs/\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784/2\u3001ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0\u9762\u8bd5\u9898",draft:!1,editUrl:"https://github.com/shaozongfan/shaozongfan.github.io/docs/\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784/2\u3001ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0\u9762\u8bd5\u9898.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"1\uff0e\u8bf7\u7b80\u8ff0\u7cbe\u7b80\u6307\u4ee4\u96c6RISC\u548c\u590d\u6742\u6307\u4ee4\u96c6CISC\u7684\u533a\u522b\u3002",permalink:"/docs/\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784/1\u3001\u5904\u7406\u5668\u67b6\u6784\u9762\u8bd5\u9898"},next:{title:"1\uff0e\u8bf7\u7b80\u8ff0\u5185\u5b58\u67b6\u6784\u4e2dUMA\u548cNUMA\u7684\u533a\u522b\u3002",permalink:"/docs/\u5954\u8dd1\u5427linux/\u57fa\u7840\u67b6\u6784/3\u3001\u5185\u5b58\u7ba1\u7406\u9884\u5907\u77e5\u8bc6\u9762\u8bd5\u9898"}},c={},d=[],s={toc:d};function f(t){var e=t.components,n=(0,i.Z)(t,a);return(0,o.kt)("wrapper",(0,r.Z)({},s,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"1arm64\u5904\u7406\u5668\u4e2d\u6709\u4e24\u4e2a\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668ttbr0\u548cttbr1\u5904\u7406\u5668\u5982\u4f55\u4f7f\u7528\u5b83\u4eec"},"1\uff0eARM64\u5904\u7406\u5668\u4e2d\u6709\u4e24\u4e2a\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668TTBR0\u548cTTBR1\uff0c\u5904\u7406\u5668\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\uff1f"),(0,o.kt)("h1",{id:"2\u8bf7\u7b80\u8ff0arm64\u5904\u7406\u5668\u76844\u7ea7\u9875\u8868\u7684\u6620\u5c04\u8fc7\u7a0b\u5047\u8bbe\u9875\u9762\u7c92\u5ea6\u4e3a4kb\u5730\u5740\u5bbd\u5ea6\u4e3a48\u4f4d"},"2\uff0e\u8bf7\u7b80\u8ff0ARM64\u5904\u7406\u5668\u76844\u7ea7\u9875\u8868\u7684\u6620\u5c04\u8fc7\u7a0b\uff0c\u5047\u8bbe\u9875\u9762\u7c92\u5ea6\u4e3a4KB\uff0c\u5730\u5740\u5bbd\u5ea6\u4e3a48\u4f4d\u3002"),(0,o.kt)("h1",{id:"3\u5728l0l2\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2d\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u9875\u8868\u9879\u662f\u5757\u7c7b\u578b\u8fd8\u662f\u9875\u8868\u7c7b\u578b"},"3\uff0e\u5728L0\uff5eL2\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2d\uff0c\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u9875\u8868\u9879\u662f\u5757\u7c7b\u578b\u8fd8\u662f\u9875\u8868\u7c7b\u578b\uff1f"),(0,o.kt)("h1",{id:"4\u5728arm64-linux\u5185\u6838\u4e2d\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u662f\u5982\u4f55\u5212\u5206\u7684"},"4\uff0e\u5728ARM64 Linux\u5185\u6838\u4e2d\uff0c\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u662f\u5982\u4f55\u5212\u5206\u7684\uff1f"),(0,o.kt)("h1",{id:"5\u5728arm64-linux\u5185\u6838\u4e2dpage_offset\u8868\u793a\u4ec0\u4e48\u610f\u601d"},"5\uff0e\u5728ARM64 Linux\u5185\u6838\u4e2d\uff0cPAGE_OFFSET\u8868\u793a\u4ec0\u4e48\u610f\u601d\uff1f"),(0,o.kt)("h1",{id:"6kimage_vaddr\u8868\u793a\u4ec0\u4e48\u610f\u601d"},"6\uff0eKIMAGE_VADDR\u8868\u793a\u4ec0\u4e48\u610f\u601d\uff1f"),(0,o.kt)("h1",{id:"7text_offset\u8868\u793a\u4ec0\u4e48\u610f\u601d"},"7\uff0eTEXT_OFFSET\u8868\u793a\u4ec0\u4e48\u610f\u601d\uff1f"),(0,o.kt)("h1",{id:"8\u5185\u6838\u6620\u50cf\u6587\u4ef6\u5305\u542b\u54ea\u4e9b\u6bb5\u8fd9\u4e9b\u6bb5\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\u5728sysmtemmap\u6587\u4ef6\u4e2d\u5b83\u4eec\u5206\u522b\u4f7f\u7528\u54ea\u4e9b\u7b26\u53f7\u6765\u8868\u793a\u6bb5\u7684\u5f00\u59cb\u548c\u7ed3\u675f"},"8\uff0e\u5185\u6838\u6620\u50cf\u6587\u4ef6\u5305\u542b\u54ea\u4e9b\u6bb5\uff1f\u8fd9\u4e9b\u6bb5\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\uff1f\u5728Sysmtem.map\u6587\u4ef6\u4e2d\u5b83\u4eec\u5206\u522b\u4f7f\u7528\u54ea\u4e9b\u7b26\u53f7\u6765\u8868\u793a\u6bb5\u7684\u5f00\u59cb\u548c\u7ed3\u675f\uff1f"),(0,o.kt)("h1",{id:"9\u8bf7\u753b\u51faarm64-linux\u5185\u6838\u7684\u5185\u5b58\u5e03\u5c40"},"9\uff0e\u8bf7\u753b\u51faARM64 Linux\u5185\u6838\u7684\u5185\u5b58\u5e03\u5c40\u3002"),(0,o.kt)("h1",{id:"10__pasymbol\u5b8f\u548c_pa\u5b8f\u6709\u4ec0\u4e48\u533a\u522b"},"10\uff0e__pasymbol()\u5b8f\u548c","_","pa()\u5b8f\u6709\u4ec0\u4e48\u533a\u522b\uff1f"),(0,o.kt)("h1",{id:"11\u5728\u7269\u7406\u5185\u5b58\u8fd8\u6ca1\u6709\u7ebf\u6027\u6620\u5c04\u5230\u5185\u6838\u7a7a\u95f4\u65f6\u5185\u6838\u6620\u50cf\u6587\u4ef6\u6620\u5c04\u5230\u4ec0\u4e48\u5730\u65b9"},"11\uff0e\u5728\u7269\u7406\u5185\u5b58\u8fd8\u6ca1\u6709\u7ebf\u6027\u6620\u5c04\u5230\u5185\u6838\u7a7a\u95f4\u65f6\uff0c\u5185\u6838\u6620\u50cf\u6587\u4ef6\u6620\u5c04\u5230\u4ec0\u4e48\u5730\u65b9\uff1f"),(0,o.kt)("h1",{id:"12\u5728arm-linux\u5185\u6838\u4e2dkimage_voffset\u4ee3\u8868\u4ec0\u4e48\u610f\u601d\u5462"},"12\uff0e\u5728ARM Linux\u5185\u6838\u4e2d\uff0ckimage_voffset\u4ee3\u8868\u4ec0\u4e48\u610f\u601d\u5462\uff1f"),(0,o.kt)("h1",{id:"13\u5728armv8\u67b6\u6784\u4e2d\u9ad8\u901f\u7f13\u5b58\u7ba1\u7406\u7684poc\u548cpou\u6709\u4ec0\u4e48\u533a\u522b"},"13\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0c\u9ad8\u901f\u7f13\u5b58\u7ba1\u7406\u7684PoC\u548cPoU\u6709\u4ec0\u4e48\u533a\u522b\uff1f"),(0,o.kt)("h1",{id:"14\u5728armv8\u67b6\u6784\u4e2dasid\u662f\u4ec0\u4e48\u610f\u601d\u6709\u4ec0\u4e48\u4f5c\u7528"},"14\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0cASID\u662f\u4ec0\u4e48\u610f\u601d\uff1f\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f"),(0,o.kt)("h1",{id:"15\u5728armv8\u67b6\u6784\u4e2d\u652f\u6301\u54ea\u51e0\u79cd\u5185\u5b58\u5c5e\u6027\u5b83\u4eec\u90fd\u6709\u54ea\u4e9b\u7279\u70b9"},"15\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\u652f\u6301\u54ea\u51e0\u79cd\u5185\u5b58\u5c5e\u6027\uff1f\u5b83\u4eec\u90fd\u6709\u54ea\u4e9b\u7279\u70b9\uff1f"),(0,o.kt)("h1",{id:"16\u5728armv8\u67b6\u6784\u4e2d\u9ad8\u901f\u7f13\u5b58\u5171\u4eab\u5c5e\u6027\u6709\u5185\u90e8\u5171\u4eabinner-shareable\u548c\u5916\u90e8\u5171\u4eabouter-shareable\u5b83\u4eec\u6709\u4ec0\u4e48\u533a\u522b"},"16\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0c\u9ad8\u901f\u7f13\u5b58\u5171\u4eab\u5c5e\u6027\u6709\u5185\u90e8\u5171\u4eab\uff08inner shareable\uff09\u548c\u5916\u90e8\u5171\u4eab\uff08outer shareable\uff09\uff0c\u5b83\u4eec\u6709\u4ec0\u4e48\u533a\u522b\uff1f"),(0,o.kt)("h1",{id:"17\u5728armv8\u67b6\u6784\u4e2d\u652f\u6301\u54ea\u51e0\u6761\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\u5b83\u4eec\u90fd\u6709\u4ec0\u4e48\u533a\u522b"},"17\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0c\u652f\u6301\u54ea\u51e0\u6761\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\uff1f\u5b83\u4eec\u90fd\u6709\u4ec0\u4e48\u533a\u522b\uff1f"),(0,o.kt)("h1",{id:"18\u52a0\u8f7d-\u83b7\u53d6\u5c4f\u969c\u539f\u8bed\u4e0e\u5b58\u50a8-\u91ca\u653e\u5c4f\u969c\u539f\u8bed\u6709\u4ec0\u4e48\u533a\u522b\u5206\u522b\u6709\u4ec0\u4e48\u4f5c\u7528"},"18\uff0e\u52a0\u8f7d-\u83b7\u53d6\u5c4f\u969c\u539f\u8bed\u4e0e\u5b58\u50a8-\u91ca\u653e\u5c4f\u969c\u539f\u8bed\u6709\u4ec0\u4e48\u533a\u522b\uff1f\u5206\u522b\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f"),(0,o.kt)("h1",{id:"19\u4ec0\u4e48\u662f\u4e00\u4e2a\u6bb5\u7684\u52a0\u8f7d\u5730\u5740\u548c\u8fd0\u884c\u5730\u5740"},"19\uff0e\u4ec0\u4e48\u662f\u4e00\u4e2a\u6bb5\u7684\u52a0\u8f7d\u5730\u5740\u548c\u8fd0\u884c\u5730\u5740\uff1f"),(0,o.kt)("h1",{id:"20\u4eceu-boot\u8df3\u8f6c\u5230\u5185\u6838\u65f6\u4e3a\u4ec0\u4e48\u6307\u4ee4\u9ad8\u901f\u7f13\u5b58\u53ef\u4ee5\u6253\u5f00\u800c\u6570\u636e\u9ad8\u901f\u7f13\u5b58\u5fc5\u987b\u5173\u95ed"},"20\uff0e\u4eceU-boot\u8df3\u8f6c\u5230\u5185\u6838\u65f6\uff0c\u4e3a\u4ec0\u4e48\u6307\u4ee4\u9ad8\u901f\u7f13\u5b58\u53ef\u4ee5\u6253\u5f00\u800c\u6570\u636e\u9ad8\u901f\u7f13\u5b58\u5fc5\u987b\u5173\u95ed\uff1f"),(0,o.kt)("h1",{id:"21\u5728linux\u5185\u6838\u542f\u52a8\u6c47\u7f16\u4ee3\u7801\u4e2d\u4e3a\u4ec0\u4e48\u8981\u5efa\u7acb\u6052\u7b49\u6620\u5c04"},"21\uff0e\u5728Linux\u5185\u6838\u542f\u52a8\u6c47\u7f16\u4ee3\u7801\u4e2d\uff0c\u4e3a\u4ec0\u4e48\u8981\u5efa\u7acb\u6052\u7b49\u6620\u5c04\uff1f"),(0,o.kt)("h1",{id:"22\u5728armv8\u67b6\u6784\u4e2d\u5728l0l2\u9875\u8868\u9879\u4e2d\u5305\u542b\u4e86\u6307\u5411\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u57fa\u5730\u5740\u90a3\u4e48\u8fd9\u4e2a\u4e0b\u4e00\u7ea7\u9875\u8868\u57fa\u5730\u5740\u662f\u7269\u7406\u5730\u5740\u8fd8\u662f\u865a\u62df\u5730\u5740"},"22\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0c\u5728L0\uff5eL2\u9875\u8868\u9879\u4e2d\u5305\u542b\u4e86\u6307\u5411\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u57fa\u5730\u5740\uff0c\u90a3\u4e48\u8fd9\u4e2a\u4e0b\u4e00\u7ea7\u9875\u8868\u57fa\u5730\u5740\u662f\u7269\u7406\u5730\u5740\u8fd8\u662f\u865a\u62df\u5730\u5740\uff1f"),(0,o.kt)("h1",{id:"23mmu\u53ef\u4ee5\u904d\u5386\u9875\u8868linux\u5185\u6838\u4e5f\u63d0\u4f9b\u4e86\u8f6f\u4ef6\u904d\u5386\u9875\u8868\u7684\u51fd\u6570\u5982walk_pgd__create_pgd_mappingfollow_page\u7b49\u4ece\u8f6f\u4ef6\u7684\u89c6\u89d2linux\u5185\u6838\u7684pgd_tpud_tpmd_t\u4ee5\u53capte_t\u6570\u636e\u7ed3\u6784\u4e2d\u5e76\u6ca1\u6709\u5b58\u50a8\u4e00\u4e2a\u6307\u5411\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u6307\u9488\u5373\u4ececpu\u89d2\u5ea6\u6765\u770bcpu\u8bbf\u95ee\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u65f6\u662f\u4ee5\u865a\u62df\u5730\u5740\u6765\u8bbf\u95ee\u7684\u5b83\u4eec\u662f\u5982\u4f55\u904d\u5386\u7684\u5462pgd_tpud_tpmd_t\u4ee5\u53capte_t\u6570\u636e\u7ed3\u6784\u662fu64\u7c7b\u578b\u7684\u53d8\u91cf"},"23\uff0eMMU\u53ef\u4ee5\u904d\u5386\u9875\u8868\uff0cLinux\u5185\u6838\u4e5f\u63d0\u4f9b\u4e86\u8f6f\u4ef6\u904d\u5386\u9875\u8868\u7684\u51fd\u6570\uff0c\u5982walk_pgd()\u3001__create_pgd_mapping()\u3001follow_page()\u7b49\u3002\u4ece\u8f6f\u4ef6\u7684\u89c6\u89d2\uff0cLinux\u5185\u6838\u7684pgd_t\u3001pud_t\u3001pmd_t\u4ee5\u53capte_t\u6570\u636e\u7ed3\u6784\u4e2d\u5e76\u6ca1\u6709\u5b58\u50a8\u4e00\u4e2a\u6307\u5411\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u6307\u9488\uff08\u5373\u4eceCPU\u89d2\u5ea6\u6765\u770b\uff0cCPU\u8bbf\u95ee\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u65f6\u662f\u4ee5\u865a\u62df\u5730\u5740\u6765\u8bbf\u95ee\u7684\uff09\uff0c\u5b83\u4eec\u662f\u5982\u4f55\u904d\u5386\u7684\u5462\uff1fpgd_t\u3001pud_t\u3001pmd_t\u4ee5\u53capte_t\u6570\u636e\u7ed3\u6784\u662fu64\u7c7b\u578b\u7684\u53d8\u91cf\u3002"))}f.isMDXComponent=!0}}]);