"use strict";(self.webpackChunkshaozongfan_website=self.webpackChunkshaozongfan_website||[]).push([[2963],{3905:function(n,t,e){e.d(t,{Zo:function(){return d},kt:function(){return s}});var l=e(67294);function p(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function _(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,l)}return e}function a(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?_(Object(e),!0).forEach((function(t){p(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):_(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function i(n,t){if(null==n)return{};var e,l,p=function(n,t){if(null==n)return{};var e,l,p={},_=Object.keys(n);for(l=0;l<_.length;l++)e=_[l],t.indexOf(e)>=0||(p[e]=n[e]);return p}(n,t);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(n);for(l=0;l<_.length;l++)e=_[l],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(p[e]=n[e])}return p}var r=l.createContext({}),u=function(n){var t=l.useContext(r),e=t;return n&&(e="function"==typeof n?n(t):a(a({},t),n)),e},d=function(n){var t=u(n.components);return l.createElement(r.Provider,{value:t},n.children)},f={inlineCode:"code",wrapper:function(n){var t=n.children;return l.createElement(l.Fragment,{},t)}},k=l.forwardRef((function(n,t){var e=n.components,p=n.mdxType,_=n.originalType,r=n.parentName,d=i(n,["components","mdxType","originalType","parentName"]),k=u(e),s=p,o=k["".concat(r,".").concat(s)]||k[s]||f[s]||_;return e?l.createElement(o,a(a({ref:t},d),{},{components:e})):l.createElement(o,a({ref:t},d))}));function s(n,t){var e=arguments,p=t&&t.mdxType;if("string"==typeof n||p){var _=e.length,a=new Array(_);a[0]=k;var i={};for(var r in t)hasOwnProperty.call(t,r)&&(i[r]=t[r]);i.originalType=n,i.mdxType="string"==typeof n?n:p,a[1]=i;for(var u=2;u<_;u++)a[u]=e[u];return l.createElement.apply(null,a)}return l.createElement.apply(null,e)}k.displayName="MDXCreateElement"},13924:function(n,t,e){e.r(t),e.d(t,{assets:function(){return d},contentTitle:function(){return r},default:function(){return s},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return f}});var l=e(87462),p=e(63366),_=(e(67294),e(3905)),a=["components"],i={},r=void 0,u={unversionedId:"\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784/\u7b2c2\u7ae0  ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0",id:"\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784/\u7b2c2\u7ae0  ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0",title:"\u7b2c2\u7ae0  ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0",description:"1\uff0eARM64\u5904\u7406\u5668\u4e2d\u6709\u4e24\u4e2a\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668TTBR0\u548cTTBR1\uff0c\u5904\u7406\u5668\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\uff1f",source:"@site/docs/\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784/\u7b2c2\u7ae0  ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0.md",sourceDirName:"\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784",slug:"/\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784/\u7b2c2\u7ae0  ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0",permalink:"/docs/\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784/\u7b2c2\u7ae0  ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0",draft:!1,editUrl:"https://github.com/shaozongfan/shaozongfan.github.io/docs/\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784/\u7b2c2\u7ae0  ARM64\u5728linux\u5185\u6838\u4e2d\u7684\u5b9e\u73b0.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u7b2c1\u7ae0\u3000\u5904\u7406\u5668\u67b6\u6784",permalink:"/docs/\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784/\u7b2c1\u7ae0\u3000\u5904\u7406\u5668\u67b6\u6784"},next:{title:"\u7b2c4\u7ae0\u3000\u7269\u7406\u5185\u5b58\u4e0e\u865a\u62df\u5185\u5b58",permalink:"/docs/\u5954\u8dd1\u5427linux\u5185\u6838\uff08\u7b2c2\u7248\uff09\u53771\uff1a\u57fa\u7840\u67b6\u6784/\u7b2c4\u7ae0\u3000\u7269\u7406\u5185\u5b58\u4e0e\u865a\u62df\u5185\u5b58"}},d={},f=[{value:"2.1.1\u3000\u9875\u8868",id:"211\u9875\u8868",level:2},{value:"2.1.2\u3000\u9875\u8868\u6620\u5c04",id:"212\u9875\u8868\u6620\u5c04",level:2},{value:"2.1.3\u3000\u9875\u8868\u9879\u63cf\u8ff0\u7b26",id:"213\u9875\u8868\u9879\u63cf\u8ff0\u7b26",level:2},{value:"1\uff0eL0\uff5eL2\u9875\u8868\u9879\u63cf\u8ff0\u7b26",id:"1l0l2\u9875\u8868\u9879\u63cf\u8ff0\u7b26",level:3},{value:"2\uff0eL3\u9875\u8868\u9879\u63cf\u8ff0\u7b26",id:"2l3\u9875\u8868\u9879\u63cf\u8ff0\u7b26",level:3},{value:"2.1.4\u3000Linux\u5185\u6838\u4e2d\u7684\u9875\u8868",id:"214linux\u5185\u6838\u4e2d\u7684\u9875\u8868",level:2},{value:"2.1.5\u3000ARM64\u5185\u6838\u5185\u5b58\u5206\u5e03",id:"215arm64\u5185\u6838\u5185\u5b58\u5206\u5e03",level:2},{value:"2.1.6\u3000\u6848\u4f8b\u5206\u6790\uff1aARM64\u7684\u9875\u8868\u6620\u5c04\u8fc7\u7a0b",id:"216\u6848\u4f8b\u5206\u6790arm64\u7684\u9875\u8868\u6620\u5c04\u8fc7\u7a0b",level:2}],k={toc:f};function s(n){var t=n.components,i=(0,p.Z)(n,a);return(0,_.kt)("wrapper",(0,l.Z)({},k,i,{components:t,mdxType:"MDXLayout"}),(0,_.kt)("p",null,"1\uff0eARM64\u5904\u7406\u5668\u4e2d\u6709\u4e24\u4e2a\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668TTBR0\u548cTTBR1\uff0c\u5904\u7406\u5668\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\uff1f"),(0,_.kt)("p",null,"2\uff0e\u8bf7\u7b80\u8ff0ARM64\u5904\u7406\u5668\u76844\u7ea7\u9875\u8868\u7684\u6620\u5c04\u8fc7\u7a0b\uff0c\u5047\u8bbe\u9875\u9762\u7c92\u5ea6\u4e3a4KB\uff0c\u5730\u5740\u5bbd\u5ea6\u4e3a48\u4f4d\u3002"),(0,_.kt)("p",null,"3\uff0e\u5728L0\uff5eL2\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2d\uff0c\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u9875\u8868\u9879\u662f\u5757\u7c7b\u578b\u8fd8\u662f\u9875\u8868\u7c7b\u578b\uff1f"),(0,_.kt)("p",null,"4\uff0e\u5728ARM64 Linux\u5185\u6838\u4e2d\uff0c\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u662f\u5982\u4f55\u5212\u5206\u7684\uff1f"),(0,_.kt)("p",null,"5\uff0e\u5728ARM64 Linux\u5185\u6838\u4e2d\uff0cPAGE_OFFSET\u8868\u793a\u4ec0\u4e48\u610f\u601d\uff1f"),(0,_.kt)("p",null,"6\uff0eKIMAGE_VADDR\u8868\u793a\u4ec0\u4e48\u610f\u601d\uff1f"),(0,_.kt)("p",null,"7\uff0eTEXT_OFFSET\u8868\u793a\u4ec0\u4e48\u610f\u601d\uff1f"),(0,_.kt)("p",null,"8\uff0e\u5185\u6838\u6620\u50cf\u6587\u4ef6\u5305\u542b\u54ea\u4e9b\u6bb5\uff1f\u8fd9\u4e9b\u6bb5\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\uff1f\u5728Sysmtem.map\u6587\u4ef6\u4e2d\u5b83\u4eec\u5206\u522b\u4f7f\u7528\u54ea\u4e9b\u7b26\u53f7\u6765\u8868\u793a\u6bb5\u7684\u5f00\u59cb\u548c\u7ed3\u675f\uff1f"),(0,_.kt)("p",null,"9\uff0e\u8bf7\u753b\u51faARM64 Linux\u5185\u6838\u7684\u5185\u5b58\u5e03\u5c40\u3002"),(0,_.kt)("p",null,"10\uff0e__pasymbol()\u5b8f\u548c","_","pa()\u5b8f\u6709\u4ec0\u4e48\u533a\u522b\uff1f"),(0,_.kt)("p",null,"11\uff0e\u5728\u7269\u7406\u5185\u5b58\u8fd8\u6ca1\u6709\u7ebf\u6027\u6620\u5c04\u5230\u5185\u6838\u7a7a\u95f4\u65f6\uff0c\u5185\u6838\u6620\u50cf\u6587\u4ef6\u6620\u5c04\u5230\u4ec0\u4e48\u5730\u65b9\uff1f"),(0,_.kt)("p",null,"12\uff0e\u5728ARM Linux\u5185\u6838\u4e2d\uff0ckimage_voffset\u4ee3\u8868\u4ec0\u4e48\u610f\u601d\u5462\uff1f"),(0,_.kt)("p",null,"13\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0c\u9ad8\u901f\u7f13\u5b58\u7ba1\u7406\u7684PoC\u548cPoU\u6709\u4ec0\u4e48\u533a\u522b\uff1f"),(0,_.kt)("p",null,"14\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0cASID\u662f\u4ec0\u4e48\u610f\u601d\uff1f\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f"),(0,_.kt)("p",null,"15\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\u652f\u6301\u54ea\u51e0\u79cd\u5185\u5b58\u5c5e\u6027\uff1f\u5b83\u4eec\u90fd\u6709\u54ea\u4e9b\u7279\u70b9\uff1f"),(0,_.kt)("p",null,"16\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0c\u9ad8\u901f\u7f13\u5b58\u5171\u4eab\u5c5e\u6027\u6709\u5185\u90e8\u5171\u4eab\uff08inner shareable\uff09\u548c\u5916\u90e8\u5171\u4eab\uff08outer shareable\uff09\uff0c\u5b83\u4eec\u6709\u4ec0\u4e48\u533a\u522b\uff1f"),(0,_.kt)("p",null,"17\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0c\u652f\u6301\u54ea\u51e0\u6761\u5185\u5b58\u5c4f\u969c\u6307\u4ee4\uff1f\u5b83\u4eec\u90fd\u6709\u4ec0\u4e48\u533a\u522b\uff1f"),(0,_.kt)("p",null,"18\uff0e\u52a0\u8f7d-\u83b7\u53d6\u5c4f\u969c\u539f\u8bed\u4e0e\u5b58\u50a8-\u91ca\u653e\u5c4f\u969c\u539f\u8bed\u6709\u4ec0\u4e48\u533a\u522b\uff1f\u5206\u522b\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f"),(0,_.kt)("p",null,"19\uff0e\u4ec0\u4e48\u662f\u4e00\u4e2a\u6bb5\u7684\u52a0\u8f7d\u5730\u5740\u548c\u8fd0\u884c\u5730\u5740\uff1f"),(0,_.kt)("p",null,"20\uff0e\u4eceU-boot\u8df3\u8f6c\u5230\u5185\u6838\u65f6\uff0c\u4e3a\u4ec0\u4e48\u6307\u4ee4\u9ad8\u901f\u7f13\u5b58\u53ef\u4ee5\u6253\u5f00\u800c\u6570\u636e\u9ad8\u901f\u7f13\u5b58\u5fc5\u987b\u5173\u95ed\uff1f21\uff0e\u5728Linux\u5185\u6838\u542f\u52a8\u6c47\u7f16\u4ee3\u7801\u4e2d\uff0c\u4e3a\u4ec0\u4e48\u8981\u5efa\u7acb\u6052\u7b49\u6620\u5c04\uff1f"),(0,_.kt)("p",null,"22\uff0e\u5728ARMv8\u67b6\u6784\u4e2d\uff0c\u5728L0\uff5eL2\u9875\u8868\u9879\u4e2d\u5305\u542b\u4e86\u6307\u5411\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u57fa\u5730\u5740\uff0c\u90a3\u4e48\u8fd9\u4e2a\u4e0b\u4e00\u7ea7\u9875\u8868\u57fa\u5730\u5740\u662f\u7269\u7406\u5730\u5740\u8fd8\u662f\u865a\u62df\u5730\u5740\uff1f"),(0,_.kt)("p",null,"23\uff0eMMU\u53ef\u4ee5\u904d\u5386\u9875\u8868\uff0cLinux\u5185\u6838\u4e5f\u63d0\u4f9b\u4e86\u8f6f\u4ef6\u904d\u5386\u9875\u8868\u7684\u51fd\u6570\uff0c\u5982walk_pgd()\u3001__create_pgd_mapping()\u3001follow_page()\u7b49\u3002\u4ece\u8f6f\u4ef6\u7684\u89c6\u89d2\uff0cLinux\u5185\u6838\u7684pgd_t\u3001pud_t\u3001pmd_t\u4ee5\u53capte_t\u6570\u636e\u7ed3\u6784\u4e2d\u5e76\u6ca1\u6709\u5b58\u50a8\u4e00\u4e2a\u6307\u5411\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u6307\u9488\uff08\u5373\u4eceCPU\u89d2\u5ea6\u6765\u770b\uff0cCPU\u8bbf\u95ee\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u65f6\u662f\u4ee5\u865a\u62df\u5730\u5740\u6765\u8bbf\u95ee\u7684\uff09\uff0c\u5b83\u4eec\u662f\u5982\u4f55\u904d\u5386\u7684\u5462\uff1fpgd_t\u3001pud_t\u3001pmd_t\u4ee5\u53capte_t\u6570\u636e\u7ed3\u6784\u662fu64\u7c7b\u578b\u7684\u53d8\u91cf\u3002"),(0,_.kt)("h1",{id:"21arm64\u5185\u5b58\u7ba1\u7406"},"2.1\u3000ARM64\u5185\u5b58\u7ba1\u7406"),(0,_.kt)("p",null,"\u5982\u56fe2.1\u6240\u793a\uff0cARM\u5904\u7406\u5668\u5185\u6838\u7684MMU\u5305\u62ecTLB\u548c\u9875\u8868\u904d\u5386\u5355\u5143\uff08Table Walk Unit\uff09\u4e24\u4e2a\u90e8\u4ef6\u3002TLB\u662f\u4e00\u4e2a\u9ad8\u901f\u7f13\u5b58\uff0c\u7528\u4e8e\u7f13\u5b58\u9875\u8868\u8f6c\u6362\u7684\u7ed3\u679c\uff0c\u4ece\u800c\u51cf\u5c11\u9875\u8868\u67e5\u8be2\u7684\u65f6\u95f4\u3002\u4e00\u4e2a\u5b8c\u6574\u7684\u9875\u8868\u7ffb\u8bd1\u548c\u67e5\u627e\u7684\u8fc7\u7a0b\u53eb\u4f5c\u9875\u8868\u67e5\u8be2\uff0c\u9875\u8868\u67e5\u8be2\u7684\u8fc7\u7a0b\u7531\u786c\u4ef6\u81ea\u52a8\u5b8c\u6210\uff0c\u4f46\u662f\u9875\u8868\u7684\u7ef4\u62a4\u9700\u8981\u8f6f\u4ef6\u6765\u5b8c\u6210\u3002\u9875\u8868\u67e5\u8be2\u662f\u4e00\u4e2a\u8f83\u8017\u65f6\u7684\u8fc7\u7a0b\uff0c\u7406\u60f3\u7684\u72b6\u6001\u4e0b\uff0cTLB\u91cc\u5e94\u5b58\u6709\u9875\u8868\u7684\u76f8\u5173\u4fe1\u606f\u3002\u5f53TLB\u672a\u547d\u4e2d\u65f6\uff0cMMU\u624d\u4f1a\u67e5\u8be2\u9875\u8868\uff0c\u4ece\u800c\u5f97\u5230\u7ffb\u8bd1\u540e\u7684\u7269\u7406\u5730\u5740\u3002\u800c\u9875\u8868\u901a\u5e38\u5b58\u50a8\u5728\u4e3b\u5b58\u50a8\u5668\u4e2d\u3002\u5f97\u5230\u7269\u7406\u5730\u5740\u4e4b\u540e\uff0c\u9996\u5148\u9700\u8981\u67e5\u8be2\u8be5\u7269\u7406\u5730\u5740\u7684\u5185\u5bb9\u662f\u5426\u5728\u9ad8\u901f\u7f13\u5b58\u4e2d\u6709\u6700\u65b0\u7684\u526f\u672c\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u8bf4\u660e\u9ad8\u901f\u7f13\u5b58\u672a\u547d\u4e2d\uff0c\u9700\u8981\u8bbf\u95ee\u4e3b\u5b58\u50a8\u5668\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750256228169",src:e(31794).Z,width:"1195",height:"205"})),(0,_.kt)("p",null,"\u25b2\u56fe2.1\u3000ARM\u5904\u7406\u5668\u7684\u5185\u5b58\u7ba1\u7406\u67b6\u6784"),(0,_.kt)("p",null,"\u5bf9\u4e8e\u591a\u4efb\u52a1\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u62e5\u6709\u72ec\u7acb\u7684\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u3002\u8fd9\u4e9b\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u5728\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5185\u662f\u76f8\u4e92\u9694\u79bb\u7684\uff0c\u4f46\u662f\u5728\u7269\u7406\u5730\u5740\u7a7a\u95f4\u53ef\u80fd\u6620\u5c04\u540c\u4e00\u4e2a\u7269\u7406\u9875\u9762\uff0c\u90a3\u4e48\u8fd9\u4e9b\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u662f\u5982\u4f55\u6620\u5c04\u5230\u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u5462\uff1f\u8fd9\u5c31\u9700\u8981\u5904\u7406\u5668\u7684MMU\u63d0\u4f9b\u9875\u8868\u6620\u5c04\u548c\u7ba1\u7406\u7684\u529f\u80fd\u3002\u56fe2.2\u6240\u793a\u4e3a\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u548c\u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u5de6\u8fb9\u662f\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u89c6\u56fe\uff0c\u53f3\u8fb9\u662f\u7269\u7406\u5730\u5740\u7a7a\u95f4\u89c6\u56fe\u3002\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u53c8\u5206\u6210\u5185\u6838\u7a7a\u95f4\uff08Kernel Space\uff09\u548c\u7528\u6237\u7a7a\u95f4\uff08User Space\uff09\u3002\u65e0\u8bba\u662f\u5185\u6838\u7a7a\u95f4\u8fd8\u662f\u7528\u6237\u7a7a\u95f4\u90fd\u53ef\u4ee5\u901a\u8fc7\u5904\u7406\u5668\u63d0\u4f9b\u7684\u9875\u8868\u673a\u5236\u6620\u5c04\u5230\u5b9e\u9645\u7684\u7269\u7406\u5730\u5740\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750256398876",src:e(62592).Z,width:"996",height:"1015"})),(0,_.kt)("p",null,"\u25b2\u56fe2.2\u3000\u8fdb\u7a0b\u5730\u5740\u7a7a\u95f4\u548c\u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u6620\u5c04\u5173\u7cfb"),(0,_.kt)("h2",{id:"211\u9875\u8868"},"2.1.1\u3000\u9875\u8868"),(0,_.kt)("p",null,"\u5728AArch64\u67b6\u6784\u4e2d\u7684MMU\u652f\u6301\u5355\u4e00\u9636\u6bb5\u7684\u9875\u8868\u8f6c\u6362\uff0c\u540c\u6837\u4e5f\u652f\u6301\u865a\u62df\u5316\u6269\u5c55\u4e2d\u4e24\u9636\u6bb5\u7684\u9875\u8868\u8f6c\u6362\u3002"),(0,_.kt)("p",null,"\u5355\u4e00\u9636\u6bb5\u7684\u9875\u8868\u8f6c\u6362\uff1a\u628a\u865a\u62df\u5730\u5740\uff08VA\uff09\u7ffb\u8bd1\u6210\u7269\u7406\u5730\u5740\uff08PA\uff09\u3002"),(0,_.kt)("p",null,"\u4e24\u9636\u6bb5\u7684\u9875\u8868\u8f6c\u6362\uff1a\u5305\u62ec\u4e24\u4e2a\u9636\u6bb5\u3002\u5728\u9636\u6bb51\uff0c\u628a\u865a\u62df\u5730\u5740\u7ffb\u8bd1\u6210\u4e2d\u95f4\u7269\u7406\u5730\u5740\uff08Intermediate Physical Address\uff0cIPA\uff09\uff1b\u5728\u9636\u6bb52\uff0c\u628aIPA\u7ffb\u8bd1\u6210\u6700\u7ec8PA\u3002"),(0,_.kt)("p",null,"\u53e6\u5916\uff0cARMv8\u67b6\u6784\u652f\u6301\u591a\u79cd\u9875\u8868\u683c\u5f0f\u3002\u5177\u4f53\u5982\u4e0b\u3002"),(0,_.kt)("p",null,"ARMv8\u67b6\u6784\u7684\u957f\u63cf\u8ff0\u7b26\u9875\u8868\u683c\u5f0f\uff08Long Descriptor Translation Table Format\uff09\u3002"),(0,_.kt)("p",null,"ARMv7\u67b6\u6784\u7684\u957f\u63cf\u8ff0\u7b26\u9875\u8868\u683c\u5f0f\uff0c\u9700\u8981\u6253\u5f00\u5927\u7269\u7406\u5730\u5740\u6269\u5c55\uff08Large Physical Address Extention\uff0cLPAE\uff09\u3002"),(0,_.kt)("p",null,"ARMv7\u67b6\u6784\u7684\u77ed\u63cf\u8ff0\u7b26\u9875\u8868\u683c\u5f0f\uff08Short Descriptor Translation Table Format\uff09\u3002"),(0,_.kt)("p",null,"\u5f53\u4f7f\u7528AArch32\u5904\u7406\u5668\u65f6\uff0c\u4f7f\u7528ARMv7\u67b6\u6784\u7684\u77ed\u63cf\u8ff0\u7b26\u9875\u8868\u683c\u5f0f\u6216\u957f\u63cf\u8ff0\u7b26\u9875\u8868\u683c\u5f0f\u6765\u8fd0\u884c32\u4f4d\u7684\u5e94\u7528\u7a0b\u5e8f\uff1b\u5f53\u4f7f\u7528AArch64\u5904\u7406\u5668\u65f6\uff0c\u4f7f\u7528ARMv8\u67b6\u6784\u7684\u957f\u63cf\u8ff0\u7b26\u9875\u8868\u683c\u5f0f\u6765\u8fd0\u884c64\u4f4d\u7684\u5e94\u7528\u7a0b\u5e8f\u3002"),(0,_.kt)("p",null,"\u53e6\u5916\uff0cARMv8\u67b6\u6784\u8fd8\u652f\u63014KB\u300116KB\u621664KB\u8fd93\u79cd\u9875\u9762\u7c92\u5ea6\u3002"),(0,_.kt)("h2",{id:"212\u9875\u8868\u6620\u5c04"},"2.1.2\u3000\u9875\u8868\u6620\u5c04"),(0,_.kt)("p",null,"\u5728AArch64\u67b6\u6784\u4e2d\uff0c\u56e0\u4e3a\u5730\u5740\u603b\u7ebf\u4f4d\u5bbd\u6700\u591a\u652f\u630148\u4f4d\uff0c\u6240\u4ee5VA\u88ab\u5212\u5206\u4e3a\u4e24\u4e2a\u7a7a\u95f4\uff0c\u6bcf\u4e2a\u7a7a\u95f4\u6700\u591a\u652f\u6301256TB\u3002"),(0,_.kt)("p",null,"\u4f4e\u4f4d\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4f4d\u4e8e0x0000 0000 0000 0000\u52300x0000 FFFF FFFF FFFF\u3002\u5982\u679c\u865a\u62df\u5730\u5740\u7684\u6700\u9ad8\u4f4d\u7b49\u4e8e 0\uff0c\u5c31\u4f7f\u7528\u8fd9\u4e2a\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u5e76\u4e14\u4f7f\u7528TTBR0_ELx\u6765\u5b58\u653e\u9875\u8868\u7684\u57fa\u5730\u5740\u3002"),(0,_.kt)("p",null,"\u9ad8\u4f4d\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4f4d\u4e8e0xFFFF 0000 0000 0000\u52300xFFFF FFFF FFFF FFFF\u3002\u5982\u679c\u865a\u62df\u5730\u5740\u7684\u6700\u9ad8\u4f4d\u7b49\u4e8e 1\uff0c\u5c31\u4f7f\u7528\u8fd9\u4e2a\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u5e76\u4e14\u4f7f\u7528TTBR1_ELx\u6765\u5b58\u653e\u9875\u8868\u7684\u57fa\u5730\u5740\u3002"),(0,_.kt)("p",null,"AArch64\u67b6\u6784\u4e2d\u7684\u9875\u8868\u652f\u6301\u5982\u4e0b\u7279\u6027\u3002"),(0,_.kt)("ul",null,(0,_.kt)("li",{parentName:"ul"},"\u6700\u591a\u53ef\u4ee5\u652f\u63014\u7ea7\u9875\u8868\u3002"),(0,_.kt)("li",{parentName:"ul"},"\u8f93\u5165\u5730\u5740\u7684\u6700\u5927\u6709\u6548\u4f4d\u5bbd\u4e3a48\u4f4d\u3002"),(0,_.kt)("li",{parentName:"ul"},"\u8f93\u51fa\u5730\u5740\u7684\u6700\u5927\u6709\u6548\u4f4d\u5bbd\u4e3a48\u4f4d\u3002"),(0,_.kt)("li",{parentName:"ul"},"\u7ffb\u8bd1\u7684\u9875\u9762\u7c92\u5ea6\u53ef\u4ee5\u662f4KB\u300116KB\u621664KB\u3002")),(0,_.kt)("p",null,"\u6ce8\u610f\uff0c\u672c\u4e66\u4ee54KB\u5927\u5c0f\u7684\u9875\u9762\u548c48\u4f4d\u5730\u5740\u5bbd\u5ea6\u4e3a\u4f8b\u6765\u8bf4\u660eAArch64\u67b6\u6784\u9875\u8868\u6620\u5c04\u7684\u8fc7\u7a0b\u3002\u5f53\u7136\uff0c\u8bfb\u8005\u4e5f\u53ef\u4ee5\u5728Linux\u5185\u6838\u4e2d\u914d\u7f6e\u5176\u4ed6\u5927\u5c0f\u7684\u9875\u9762\u7c92\u5ea6\uff0c\u598216KB\u300164KB\u7b49\u3002"),(0,_.kt)("p",null,"\u56fe2.3\u6240\u793a\u4e3aAArch64\u67b6\u6784\u7684\u5730\u5740\u6620\u5c04\uff0c\u5176\u4e2d\u9875\u9762\u662f4KB\u7684\u5c0f\u9875\u9762\u3002"),(0,_.kt)("p",null,"\u5f53TLB\u672a\u547d\u4e2d\u65f6\uff0c\u5904\u7406\u5668\u67e5\u8be2\u9875\u8868\u7684\u8fc7\u7a0b\u5982\u4e0b\u3002"),(0,_.kt)("p",null,"\u5904\u7406\u5668\u6839\u636e\u9875\u8868\u57fa\u5730\u5740\u63a7\u5236\u5bc4\u5b58\u5668\u548c\u865a\u62df\u5730\u5740\u6765\u5224\u65ad\u4f7f\u7528\u54ea\u4e2a\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668\uff0c\u662fTTBR0\u8fd8\u662fTTBR1\u3002\u5f53\u865a\u62df\u5730\u5740\u7b2c63\u4f4d\uff08\u7b80\u79f0VA","[63]","\uff09\u4e3a1\u65f6\u9009\u62e9TTBR1\uff1b\u5f53VA","[63]","\u4e3a0\u65f6\u9009\u62e9TTBR0\u3002\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668\u4e2d\u5b58\u653e\u77401\u7ea7\u9875\u8868\uff08\u89c1\u56fe2.3\u4e2d\u7684L0\u9875\u8868\uff09\u7684\u57fa\u5730\u5740\u3002"),(0,_.kt)("p",null,"\u5904\u7406\u5668\u5c06VA","[47:39]","\u4f5c\u4e3aL0\u7d22\u5f15\uff0c\u57281\u7ea7\u9875\u8868\uff08L0\u9875\u8868\uff09\u4e2d\u627e\u5230\u9875\u8868\u9879\uff0c1\u7ea7\u9875\u8868\u6709512\u4e2a\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"1\u7ea7\u9875\u8868\u7684\u9875\u8868\u9879\u4e2d\u5b58\u653e\u77402\u7ea7\u9875\u8868\uff08L1\u9875\u8868\uff09\u7684\u7269\u7406\u57fa\u5730\u5740\u3002\u5904\u7406\u5668\u5c06VA","[38:30]","\u4f5c\u4e3aL1\u7d22\u5f15\uff0c\u57282\u7ea7\u9875\u8868\u4e2d\u627e\u5230\u76f8\u5e94\u7684\u9875\u8868\u9879\uff0c2\u7ea7\u9875\u8868\u6709512\u4e2a\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"image-20250618223555275",src:e(25381).Z,width:"1417",height:"883"})),(0,_.kt)("p",null,"\u25b2\u56fe2.3\u3000AArch64\u67b6\u6784\u7684\u5730\u5740\u6620\u5c04"),(0,_.kt)("p",null,"2\u7ea7\u9875\u8868\u7684\u9875\u8868\u9879\u4e2d\u5b58\u653e\u77403\u7ea7\u9875\u8868\uff08L2\u9875\u8868\uff09\u7684\u7269\u7406\u57fa\u5730\u5740\u3002\u5904\u7406\u5668\u4ee5VA","[29:21]","\u4f5c\u4e3aL2\u7d22\u5f15\uff0c\u57283\u7ea7\u9875\u8868\uff08L2\u9875\u8868\uff09\u4e2d\u627e\u5230\u76f8\u5e94\u7684\u9875\u8868\u9879\uff0c3\u7ea7\u9875\u8868\u6709512\u4e2a\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"3\u7ea7\u9875\u8868\u7684\u9875\u8868\u9879\u4e2d\u5b58\u653e\u77404\u7ea7\u9875\u8868\uff08L3\u9875\u8868\uff09\u7684\u7269\u7406\u57fa\u5730\u5740\u3002\u5904\u7406\u5668\u4ee5VA","[20:12]","\u4f5c\u4e3aL3\u7d22\u5f15\uff0c\u57284\u7ea7\u9875\u8868\uff08L3\u9875\u8868\uff09\u4e2d\u627e\u5230\u76f8\u5e94\u7684\u9875\u8868\u9879\uff0c4\u7ea7\u9875\u8868\u6709512\u4e2a\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"4\u7ea7\u9875\u8868\u7684\u9875\u8868\u9879\u91cc\u5b58\u653e\u77404KB\u9875\u9762\u7684\u7269\u7406\u57fa\u5730\u5740\uff0c\u7136\u540e\u52a0\u4e0aVA","[11:0]","\uff0c\u5c31\u6784\u6210\u4e86\u65b0\u7684\u7269\u7406\u5730\u5740\uff0c\u56e0\u6b64\u5904\u7406\u5668\u5c31\u5b8c\u6210\u4e86\u9875\u8868\u7684\u67e5\u8be2\u548c\u7ffb\u8bd1\u5de5\u4f5c\u3002"),(0,_.kt)("h2",{id:"213\u9875\u8868\u9879\u63cf\u8ff0\u7b26"},"2.1.3\u3000\u9875\u8868\u9879\u63cf\u8ff0\u7b26"),(0,_.kt)("p",null,"\u4ece\u56fe2.3\u53ef\u77e5\uff0cAArch64\u67b6\u6784\u9875\u8868\u5206\u62104\u7ea7\u9875\u8868\uff0c\u6bcf\u4e00\u7ea7\u9875\u8868\u90fd\u6709\u9875\u8868\u9879\uff0c\u6211\u4eec\u628a\u5b83\u4eec\u79f0\u4e3a\u9875\u8868\u9879\u63cf\u8ff0\u7b26\uff0c\u6bcf\u4e2a\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u53608\u5b57\u8282\uff0c\u90a3\u4e48\u8fd9\u4e9b\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u7684\u683c\u5f0f\u548c\u5185\u5bb9\u662f\u5426\u90fd\u4e00\u6837\uff1f"),(0,_.kt)("h3",{id:"1l0l2\u9875\u8868\u9879\u63cf\u8ff0\u7b26"},"1\uff0eL0\uff5eL2\u9875\u8868\u9879\u63cf\u8ff0\u7b26"),(0,_.kt)("p",null,"AArch64\u67b6\u6784\u4e2dL0\uff5eL3\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u7684\u683c\u5f0f\u4e0d\u5b8c\u5168\u4e00\u6837\uff0c\u5176\u4e2dL0\uff5eL2\u9875\u8868\u9879\u7684\u5185\u5bb9\u6bd4\u8f83\u7c7b\u4f3c\uff0c\u5982\u56fe2.4\u6240\u793a\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750257455943",src:e(46634).Z,width:"1357",height:"498"})),(0,_.kt)("p",null,"\u25b2\u56fe2.4\u3000L0\uff5eL2\u9875\u8868\u9879\u63cf\u8ff0\u7b26"),(0,_.kt)("p",null,"L0\uff5eL2\u9875\u8868\u9879\u6839\u636e\u5185\u5bb9\u53ef\u4ee5\u5206\u62103\u7c7b\uff0c\u4e00\u662f\u65e0\u6548\u7684\u9875\u8868\u9879\uff0c\u4e8c\u662f\u5757\uff08block\uff09\u7c7b\u578b\u7684\u9875\u8868\u9879\uff0c\u4e09\u662f\u9875\u8868\uff08table\uff09\u7c7b\u578b\u7684\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"\u5f53\u9875\u8868\u9879\u63cf\u8ff0\u7b26Bit","[0]","\u4e3a1\u65f6\uff0c\u8868\u793a\u6709\u6548\u7684\u63cf\u8ff0\u7b26\uff1b\u5f53Bit","[0]","\u4e3a0\u65f6\uff0c\u8868\u793a\u65e0\u6548\u7684\u63cf\u8ff0\u7b26\u3002"),(0,_.kt)("p",null,"\u9875\u8868\u9879\u63cf\u8ff0\u7b26Bit","[1]","\u7528\u6765\u8868\u793a\u7c7b\u578b\u3002"),(0,_.kt)("p",null,"\u9875\u8868\u7c7b\u578b\uff1a\u5f53Bit","[1]","\u4e3a1\u65f6\uff0c\u8868\u793a\u8be5\u63cf\u8ff0\u7b26\u5305\u542b\u4e86\u6307\u5411\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u57fa\u5730\u5740\uff0c\u662f\u4e00\u4e2a\u9875\u8868\u7c7b\u578b\u7684\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"\u5757\u7c7b\u578b\uff1a\u5f53Bit","[1]","\u4e3a0\u65f6\u8868\u793a\u4e00\u4e2a\u5927\u5185\u5b58\u5757\uff08memory block\uff09\u7684\u9875\u8868\u9879\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u6700\u7ec8\u7684\u7269\u7406\u5730\u5740\u3002\u5927\u5185\u5b58\u5757\u901a\u5e38\u662f\u7528\u6765\u63cf\u8ff0\u5927\u7684\u8fde\u7eed\u7684\u7269\u7406\u5185\u5b58\uff0c\u59822MB\u6216\u80051GB\u5927\u5c0f\u7684\u7269\u7406\u5185\u5b58\u3002"),(0,_.kt)("p",null,"\u5728\u5757\u7c7b\u578b\u7684\u9875\u8868\u9879\u4e2d\uff0cBit","[47:n]","\u8868\u793a\u6700\u7ec8\u8f93\u51fa\u7684\u7269\u7406\u5730\u5740"),(0,_.kt)("p",null,"\u82e5\u9875\u9762\u7c92\u5ea6\u662f4KB\uff0c\u5728L1\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2dn\u4e3a30\uff0c\u8868\u793a1GB\u5927\u5c0f\u7684\u8fde\u7eed\u7269\u7406\u5185\u5b58\u3002\u5728L2\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2dn\u4e3a21\uff0c\u7528\u6765\u8868\u793a2MB\u5927\u5c0f\u7684\u8fde\u7eed\u7269\u7406\u5185\u5b58\u3002"),(0,_.kt)("p",null,"\u82e5\u9875\u9762\u7c92\u5ea6\u4e3a16KB\uff0c\u5728L2\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2dn\u4e3a25\uff0c\u7528\u6765\u8868\u793a32MB\u5927\u5c0f\u7684\u8fde\u7eed\u7269\u7406\u5185\u5b58\u3002"),(0,_.kt)("p",null,"\u5728\u5757\u7c7b\u578b\u7684\u9875\u8868\u9879\u4e2d\uff0cBit","[11:2]","\u662f\u4f4e\u4f4d\u5c5e\u6027\uff08lower attribute\uff09\uff0cBit","[63:52]","\u662f\u9ad8\u4f4d\u5c5e\u6027\uff08upper attribute\uff09\u3002"),(0,_.kt)("p",null,"\u5728\u9875\u8868\u7c7b\u578b\u7684\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2d\uff0cBit","[47:m]","\u7528\u6765\u6307\u5411\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u57fa\u5730\u5740\u3002"),(0,_.kt)("ul",null,(0,_.kt)("li",{parentName:"ul"},"\u5f53\u9875\u9762\u7c92\u5ea6\u4e3a4KB\u65f6m\u4e3a12\u3002"),(0,_.kt)("li",{parentName:"ul"},"\u5f53\u9875\u9762\u7c92\u5ea6\u4e3a16KB\u65f6m\u4e3a14\u3002"),(0,_.kt)("li",{parentName:"ul"},"\u5f53\u9875\u9762\u7c92\u5ea6\u4e3a64KB\u65f6m\u4e3a16\u3002")),(0,_.kt)("h3",{id:"2l3\u9875\u8868\u9879\u63cf\u8ff0\u7b26"},"2\uff0eL3\u9875\u8868\u9879\u63cf\u8ff0\u7b26"),(0,_.kt)("p",null,"\u5982\u56fe2.5\u6240\u793a\uff0cL3\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u5305\u542b5\u79cd\u9875\u8868\u9879\uff0c\u5206\u522b\u662f\u65e0\u6548\u7684\u9875\u8868\u9879\u3001\u4fdd\u7559\u7684\u9875\u8868\u9879\u30014KB\u7c92\u5ea6\u7684\u9875\u8868\u9879\u300116KB\u7c92\u5ea6\u7684\u9875\u8868\u9879\u300164KB\u7c92\u5ea6\u7684\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750257779107",src:e(4234).Z,width:"1434",height:"865"})),(0,_.kt)("p",null,"\u25b2\u56fe2.5\u3000L3\u9875\u8868\u9879\u63cf\u8ff0\u7b26"),(0,_.kt)("p",null,"L3\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u7684\u683c\u5f0f\u5982\u4e0b\u3002"),(0,_.kt)("p",null,"\u5f53\u9875\u8868\u9879\u63cf\u8ff0\u7b26Bit","[0]","\u4e3a1\u65f6\uff0c\u8868\u793a\u6709\u6548\u7684\u63cf\u8ff0\u7b26\uff1b\u4e3a0\u65f6\uff0c\u8868\u793a\u65e0\u6548\u7684\u63cf\u8ff0\u7b26\u3002"),(0,_.kt)("p",null,"\u5f53\u9875\u8868\u9879\u63cf\u8ff0\u7b26Bit","[1]","\u4e3a0\u65f6\uff0c\u8868\u793a\u4fdd\u7559\u9875\u8868\u9879\uff1b\u4e3a1\u65f6\uff0c\u8868\u793a\u9875\u8868\u7c7b\u578b\u7684\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"\u9875\u8868\u63cf\u8ff0\u7b26Bit","[11:2]","\u662f\u4f4e\u4f4d\u5c5e\u6027\uff0cBit","[63:51]","\u662f\u9ad8\u4f4d\u5c5e\u6027\uff0c\u5982\u56fe2.6\u6240\u793a\u3002"),(0,_.kt)("p",null,"\u9875\u8868\u63cf\u8ff0\u7b26\u4e2d\u95f4\u7684\u4f4d\u57df\u4e2d\u5305\u542b\u4e86\u8f93\u51fa\u5730\u5740\uff08output address\uff09\uff0c\u4e5f\u5c31\u662f\u6700\u7ec8\u7269\u7406\u9875\u9762\u7684\u9ad8\u5730\u5740\u6bb5\u3002"),(0,_.kt)("p",null,"\u5f53\u9875\u9762\u7c92\u5ea6\u4e3a4KB\u65f6\u8f93\u51fa\u5730\u5740\u4e3aBit","[47:12]","\u3002"),(0,_.kt)("p",null,"\u5f53\u9875\u9762\u7c92\u5ea6\u4e3a16KB\u65f6\u8f93\u51fa\u5730\u5740\u4e3aBit","[47:14]","\u3002"),(0,_.kt)("p",null,"\u5f53\u9875\u9762\u7c92\u5ea6\u4e3a64KB\u65f6\u8f93\u51fa\u5730\u5740\u4e3aBit","[47:16]","\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750257959806",src:e(20554).Z,width:"1641",height:"454"})),(0,_.kt)("p",null,"\u25b2\u56fe2.6\u3000L3\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2d\u7684\u9875\u9762\u5c5e\u6027"),(0,_.kt)("p",null,"L3\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u4e2d\u5305\u542b\u4e86\u4f4e\u4f4d\u5c5e\u6027\u548c\u9ad8\u4f4d\u5c5e\u6027\u3002\u8fd9\u4e9b\u5c5e\u6027\u5bf9\u5e94\u7684\u4f4d\u548c\u63cf\u8ff0\u5982\u88682.1\u6240\u793a\u3002"),(0,_.kt)("p",null,"\u88682.1\u3000\u3000\u9875\u9762\u5c5e\u6027\u5bf9\u5e94\u7684\u4f4d\u548c\u63cf\u8ff0"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750258032381",src:e(25049).Z,width:"838",height:"1014"})),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750258048470",src:e(23639).Z,width:"837",height:"1320"})),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750258068683",src:e(73385).Z,width:"835",height:"1459"})),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750258096851",src:e(9643).Z,width:"976",height:"459"})),(0,_.kt)("h2",{id:"214linux\u5185\u6838\u4e2d\u7684\u9875\u8868"},"2.1.4\u3000Linux\u5185\u6838\u4e2d\u7684\u9875\u8868"),(0,_.kt)("p",null,"\u5728ARM64\u7684Linux\u5185\u6838\u4e2d\u91c7\u7528\u4ee5\u4e0b4\u7ea7\u5206\u9875\u6a21\u578b\uff1a"),(0,_.kt)("p",null,"\u9875\u5168\u5c40\u76ee\u5f55\uff08Page Global Directory\uff0cPGD\uff09\uff1b"),(0,_.kt)("p",null,"\u9875\u4e0a\u7ea7\u76ee\u5f55\uff08Page Upper Directory\uff0cPUD\uff09\uff1b"),(0,_.kt)("p",null,"\u9875\u4e2d\u95f4\u76ee\u5f55\uff08Page Middle Directory\uff0cPMD\uff09\uff1b"),(0,_.kt)("p",null,"\u9875\u8868\uff08Page Table\uff0cPT\uff09\u3002"),(0,_.kt)("p",null,"\u4e0a\u8ff04\u7ea7\u5206\u9875\u6a21\u578b\u5206\u522b\u5bf9\u5e94ARMv8\u67b6\u6784\u9875\u8868\u7684L0\uff5eL3\u9875\u8868\u3002\u4e0a\u8ff04\u7ea7\u5206\u9875\u6a21\u578b\u572864\u4f4d\u865a\u62df\u5730\u5740\u7684\u5212\u5206\u5982\u56fe2.7\u6240\u793a\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1750258443004",src:e(80767).Z,width:"1737",height:"598"})),(0,_.kt)("p",null,"\u25b2\u56fe2.7\u30004\u7ea7\u5206\u9875\u6a21\u578b\u572864\u4f4d\u865a\u62df\u5730\u5740\u7684\u5212\u5206"),(0,_.kt)("p",null,"64\u4f4d\u7684\u865a\u62df\u5730\u5740\u5206\u6210\u5982\u4e0b\u51e0\u4e2a\u90e8\u5206\u3002"),(0,_.kt)("p",null,"Bit","[63]","\uff1a\u7528\u6765\u9009\u62e9\u9875\u8868\u57fa\u5730\u5740\u5bc4\u5b58\u5668\u3002"),(0,_.kt)("p",null,"Bit","[62:48]","\uff1a\u4fdd\u7559\u3002"),(0,_.kt)("p",null,"Bit","[47:39]","\uff1a\u8868\u793aPGD\u7d22\u5f15\uff0c\u5373ARM64\u4e2d\u7684L0\u7d22\u5f15\u3002"),(0,_.kt)("p",null,"Bit","[38:30]","\uff1a\u8868\u793aPUD\u7d22\u5f15\uff0c\u5373ARM64\u4e2d\u7684L1\u7d22\u5f15\u3002"),(0,_.kt)("p",null,"Bit","[29:21]","\uff1a\u8868\u793aPMD\u7d22\u5f15\uff0c\u5373ARM64\u4e2d\u7684L2\u7d22\u5f15\u3002"),(0,_.kt)("p",null,"Bit","[20:12]","\uff1a\u8868\u793aPT\u7d22\u5f15\uff0c\u5373ARM64\u4e2d\u7684L3\u7d22\u5f15"),(0,_.kt)("p",null,"Bit","[11:0]","\uff1a\u8868\u793a\u9875\u9762\u5185\u7684\u504f\u79fb\u91cf"),(0,_.kt)("p",null,"\u5bf9\u4e8eARM64\u67b6\u6784\u6765\u8bf4\uff0c\u76ee\u524d\u57fa\u4e8eARMv8-A\u67b6\u6784\u7684\u5904\u7406\u5668\u6700\u591a\u53ef\u4ee5\u652f\u6301\u523048\u6839\u5730\u5740\u7ebf\uff0c\u4e5f\u5c31\u662f\u5bfb\u5740248\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u5373\u865a\u62df\u5730\u5740\u7684\u8303\u56f4\u4e3a0x0000 0000 0000 0000\uff5e0x0000 FFFF FFFF FFFF\uff0c\u5171256TB\u3002\u7406\u8bba\u4e0a\u5b8c\u5168\u53ef\u4ee5\u652f\u630164\u6839\u5730\u5740\u7ebf\uff0c\u4e8e\u662f\u6700\u591a\u5c31\u53ef\u4ee5\u5bfb\u5740264B\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u3002\u4f46\u662f\u5bf9\u4e8e\u76ee\u524d\u7684\u5e94\u7528\u6765\u8bf4\uff0c256TB\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5df2\u7ecf\u8db3\u591f\u4f7f\u7528\u4e86\u3002\u56e0\u4e3a\u5982\u679c\u652f\u630164\u4f4d\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u610f\u5473\u7740\u5904\u7406\u5668\u8bbe\u8ba1\u9700\u8981\u8003\u8651\u66f4\u591a\u7684\u5730\u5740\u7ebf\uff0cCPU\u7684\u8bbe\u8ba1\u590d\u6742\u5ea6\u4f1a\u589e\u5927\u3002"),(0,_.kt)("p",null,"\u57fa\u4e8eARMv8-A\u67b6\u6784\u7684\u5904\u7406\u5668\u7684\u865a\u62df\u5730\u5740\u5206\u6210\u4e24\u4e2a\u533a\u57df\u3002\u4e00\u4e2a\u662f0x0000 0000 0000 0000\uff5e0x0000 FFFF FFFF FFFF\uff0c\u53e6\u5916\u4e00\u4e2a\u662f0xFFFF 0000 0000 0000\uff5e0xFFFF FFFF FFFF FFFF\u3002"),(0,_.kt)("p",null,"\u57fa\u4e8eARMv8-A\u67b6\u6784\u7684\u5904\u7406\u5668\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6eARM64_VA_BITS\u5b8f\u6765\u8bbe\u7f6e\u865a\u62df\u5730\u5740\u7684\u5bbd\u5ea6\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/Kconfig>\n\nconfig ARM64_VA_BITS\n        int\n        default 39 if ARM64_VA_BITS_39\n        default 42 if ARM64_VA_BITS_42\n        default 48 if ARM64_VA_BITS_48\n")),(0,_.kt)("p",null,"\u53e6\u5916\uff0c\u57fa\u4e8eARMv8-A\u67b6\u6784\u7684\u5904\u7406\u5668\u652f\u6301\u7684\u6700\u5927\u7269\u7406\u5730\u5740\u5bbd\u5ea6\u4e5f\u662f48\u4f4d\u3002"),(0,_.kt)("p",null,"Linux\u5185\u5b58\u7a7a\u95f4\u5e03\u5c40\u4e0e\u5730\u5740\u6620\u5c04\u7684\u7c92\u5ea6\u548c\u5730\u5740\u6620\u5c04\u7684\u5c42\u7ea7\u6709\u5173\u3002\u57fa\u4e8eARMv8-A\u67b6\u6784\u7684\u5904\u7406\u5668\u652f\u6301\u7684\u9875\u9762\u7c92\u5ea6\u53ef\u4ee5\u662f4KB\u300116KB\u6216\u800564KB\u3002\u6620\u5c04\u7684\u5c42\u7ea7\u53ef\u4ee5\u662f3\u7ea7\u6216\u80054\u7ea7\u3002"),(0,_.kt)("p",null,"\u4e0b\u9762\u662f\u9875\u9762\u7c92\u5ea6\u4e3a4KB\u3001\u5730\u5740\u5bbd\u5ea6\u4e3a48\u4f4d\u30014\u7ea7\u6620\u5c04\u7684\u5185\u5b58\u5206\u5e03\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"AArch64 Linux memory layout with 4KB pages + 4 levels:\nStart           End           Size    Use\n-----------------------------------------------------------------\n0000000000000000    0000ffffffffffff 256TB      user \nffff000000000000   ffffffffffffffff  256TB      kernel\n")),(0,_.kt)("p",null,"\u4e0b\u9762\u662f\u9875\u9762\u7c92\u5ea6\u4e3a4KB\u3001\u5730\u5740\u5bbd\u5ea6\u4e3a39\u4f4d\u30013\u7ea7\u6620\u5c04\u7684\u5185\u5b58\u5206\u5e03\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"AArch64 Linux memory layout with 4KB pages + 3 levels:\nStart           End           Size    Use\n------------------------------------------------------------\n0000000000000000  0000007fffffffff     512GB          user \nffffff8000000000  ffffffffffffffff     512GB          kernel\n")),(0,_.kt)("p",null,"Linux\u5185\u6838\u7684Documentation/arm64/memory.txt\u6587\u4ef6\u4e2d\u8fd8\u6709\u5176\u4ed6\u4e0d\u540c\u914d\u7f6e\u7684\u5185\u5b58\u5206\u5e03\u3002"),(0,_.kt)("p",null,"\u6211\u4eec\u7684QEMU\u865a\u62df\u673a\u914d\u7f6e\u4e3a4KB\u9875\u9762\u7c92\u5ea6\u300148\u4f4d\u5730\u5740\u5bbd\u5ea6\u4ee5\u53ca4\u7ea7\u6620\u5c04\uff0c\u672c\u4e66\u4ee5\u6b64\u4e3a\u84dd\u672c\u4ecb\u7ecdARM64\u7684\u5730\u5740\u6620\u5c04\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/configs/debian_defconfig>\n\nCONFIG_PGTABLE_LEVELS=4    //4\u7ea7\u6620\u5c04\nCONFIG_ARM64_VA_BITS_48=y  //\u5730\u5740\u5bbd\u5ea6\u4e3a48\u4f4d\nCONFIG_ARM64_VA_BITS=48\nCONFIG_ARM64_4K_PAGES=y    //\u9875\u9762\u7c92\u5ea6\u4e3a4KB\n")),(0,_.kt)("p",null,"\u7531\u4e0a\u9762\u7684\u4fe1\u606f\u53ef\u4ee5\u8ba1\u7b97\u51fa\u5404\u7ea7\u9875\u8868\u7684\u5927\u5c0f\u4ee5\u53ca\u5728\u865a\u62df\u5730\u5740\u4e2d\u7684\u504f\u79fb\u91cf\u3002\u9996\u5148\u8ba1\u7b97PGD\u9875\u8868\u7684\u504f\u79fb\u91cf\u548c\u5927\u5c0f\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/include/asm/pgtable-hwdef.h>\n\n#define ARM64_HW_PGTABLE_LEVEL_SHIFT(n) ((PAGE_SHIFT - 3) * (4 - (n)) + 3)\n\n#define PGDIR_SHIFT        ARM64_HW_PGTABLE_LEVEL_SHIFT(4 - CONFIG_PGTABLE_LEVELS)\n#define PGDIR_SIZE        (_AC(1, UL) << PGDIR_SHIFT)\n\n#define PGDIR_MASK        (~(PGDIR_SIZE-1))\n#define PTRS_PER_PGD        (1 << (MAX_USER_VA_BITS - PGDIR_SHIFT))\n")),(0,_.kt)("p",null,"PGDIR_SHIFT\u5b8f\u8868\u793aPGD\u9875\u8868\u5728\u865a\u62df\u5730\u5740\u4e2d\u7684\u8d77\u59cb\u504f\u79fb\u91cf\u3002\u6839\u636e\u672c\u4e66\u6240\u7528\u7684QEMU\u865a\u62df\u673a\u7684\u914d\u7f6e\u8ba1\u7b97\u51faPGDIR_SHIFT\u7684\u503c\u4e3a39\u3002"),(0,_.kt)("p",null,"PGDIR_SIZE\u5b8f\u8868\u793aPGD\u9875\u8868\u9879\u6240\u80fd\u6620\u5c04\u7684\u533a\u57df\u5927\u5c0f\u3002"),(0,_.kt)("p",null,"PGDIR_MASK\u5b8f\u7528\u6765\u5c4f\u853d\u865a\u62df\u5730\u5740\u4e2d\u7684PUD\u7d22\u5f15\u3001PMD\u7d22\u5f15\u4ee5\u53caPT\u7d22\u5f15\u5b57\u6bb5\u7684\u6240\u6709\u4f4d\u3002"),(0,_.kt)("p",null,"PTRS_PER_PGD\u5b8f\u8868\u793aPGD\u9875\u8868\u4e2d\u9875\u8868\u9879\u7684\u4e2a\u6570\u3002"),(0,_.kt)("p",null,"\u63a5\u4e0b\u6765\uff0c\u8ba1\u7b97PUD\u9875\u8868\u7684\u504f\u79fb\u91cf\u548c\u5927\u5c0f\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/include/asm/pgtable-hwdef.h>\n\n#if CONFIG_PGTABLE_LEVELS > 3\n#define PUD_SHIFT        ARM64_HW_PGTABLE_LEVEL_SHIFT(1)\n#define PUD_SIZE        (_AC(1, UL) << PUD_SHIFT)\n#define PUD_MASK        (~(PUD_SIZE-1))\n#define PTRS_PER_PUD        PTRS_PER_PTE\n#endif\n")),(0,_.kt)("p",null,"PUD_SHIFT\u5b8f\u8868\u793aPUD\u9875\u8868\u5728\u865a\u62df\u5730\u5740\u4e2d\u7684\u8d77\u59cb\u504f\u79fb\u91cf\u3002\u6839\u636e\u672c\u4e66\u6240\u7528\u7684QEMU\u865a\u62df\u673a\u7684\u914d\u7f6e\uff0c\u8ba1\u7b97\u51fa\u7684PUDIR_SHIFT\u4e3a30\u3002"),(0,_.kt)("p",null,"PUD_SIZE\u5b8f\u8868\u793a\u4e00\u4e2aPUD\u9875\u8868\u9879\u6240\u80fd\u6620\u5c04\u7684\u533a\u57df\u5927\u5c0f\u3002"),(0,_.kt)("p",null,"PUD_MASK\u5b8f\u7528\u6765\u5c4f\u853d\u865a\u62df\u5730\u5740\u4e2d\u7684PMD\u7d22\u5f15\u548cPT\u7d22\u5f15\u5b57\u6bb5\u7684\u6240\u6709\u4f4d\u3002"),(0,_.kt)("p",null,"PTRS_PER_PUD\u5b8f\u8868\u793aPUD\u9875\u8868\u4e2d\u9875\u8868\u9879\u7684\u4e2a\u6570\u3002\u63a5\u4e0b\u6765\uff0c\u8ba1\u7b97PMD\u9875\u8868\u7684\u504f\u79fb\u91cf\u548c\u5927\u5c0f\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/include/asm/pgtable-hwdef.h>\n\n#if CONFIG_PGTABLE_LEVELS > 2\n#define PMD_SHIFT        ARM64_HW_PGTABLE_LEVEL_SHIFT(2)\n#define PMD_SIZE        (_AC(1, UL) << PMD_SHIFT)\n#define PMD_MASK        (~(PMD_SIZE-1))\n#define PTRS_PER_PMD        PTRS_PER_PTE\n#endif\n")),(0,_.kt)("p",null,"PMD_SHIFT\u5b8f\u8868\u793aPMD\u9875\u8868\u5728\u865a\u62df\u5730\u5740\u4e2d\u7684\u8d77\u59cb\u504f\u79fb\u91cf\u3002\u6839\u636e\u672c\u4e66\u6240\u7528\u7684QEMU\u865a\u62df\u673a\u7684\u914d\u7f6e\uff0c\u8ba1\u7b97\u51fa\u7684PMDIR_SHIFT\u4e3a21\u3002"),(0,_.kt)("p",null,"PMD_SIZE\u5b8f\u8868\u793a\u4e00\u4e2aPMD\u9875\u8868\u9879\u6240\u80fd\u6620\u5c04\u7684\u533a\u57df\u5927\u5c0f\u3002"),(0,_.kt)("p",null,"PMD_MASK\u5b8f\u7528\u6765\u5c4f\u853d\u865a\u62df\u5730\u5740\u4e2d\u7684PT\u7d22\u5f15\u5b57\u6bb5\u7684\u6240\u6709\u4f4d\u3002"),(0,_.kt)("p",null,"PTRS_PER_PMD\u5b8f\u8868\u793aPMD\u9875\u8868\u4e2d\u9875\u8868\u9879\u7684\u4e2a\u6570\u3002\u6700\u540e\u662f\u9875\u8868\u3002\u7531\u4e8e\u8bbe\u7f6e\u4e86\u9875\u9762\u7c92\u5ea6\u4e3a4KB\uff0c\u56e0\u6b64\u9875\u8868\u7684\u504f\u79fb\u91cf\u662f\u4ece\u7b2c12\u4f4d\u5f00\u59cb\u7684\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"#define PTRS_PER_PTE        (1 << (PAGE_SHIFT - 3))\n")),(0,_.kt)("p",null,"\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u5305\u542b\u4e86\u4e30\u5bcc\u7684\u5c5e\u6027\uff0c\u5b83\u4eec\u7684\u5b9a\u4e49\u5982\u4e0b\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arm/arm64/include/asm/pgtable-hwdef.h>\n\n/*\n * L3\u9875\u8868\u9879\u63cf\u8ff0\u7b26\n */\n#define PTE_TYPE_MASK        (_AT(pteval_t, 3) << 0)\n#define PTE_TYPE_FAULT       (_AT(pteval_t, 0) << 0)\n#define PTE_TYPE_PAGE        (_AT(pteval_t, 3) << 0)\n#define PTE_TABLE_BIT        (_AT(pteval_t, 1) << 1)\n#define PTE_USER        (_AT(pteval_t, 1) << 6)\n#define PTE_RDONLY        (_AT(pteval_t, 1) << 7)\n#define PTE_SHARED        (_AT(pteval_t, 3) << 8)\n#define PTE_AF            (_AT(pteval_t, 1) << 10)\n#define PTE_NG            (_AT(pteval_t, 1) << 11)\n#define PTE_DBM            (_AT(pteval_t, 1) << 51)\n#define PTE_CONT        (_AT(pteval_t, 1) << 52)\n#define PTE_PXN            (_AT(pteval_t, 1) << 53)\n#define PTE_UXN            (_AT(pteval_t, 1) << 54)\n#define PTE_HYP_XN        (_AT(pteval_t, 1) << 54)\n")),(0,_.kt)("p",null,"\u4e0a\u9762\u5b9a\u4e49\u7684\u662fARMv8\u67b6\u6784\u9875\u8868\u9879\u63cf\u8ff0\u7b26\u7684\u5c5e\u6027\u3002Linux\u5185\u6838\u6700\u65e9\u7684\u8bbe\u8ba1\u662f\u57fa\u4e8ex86\u7684\uff0c\u56e0\u6b64\u5185\u5b58\u7ba1\u7406\u4ee3\u7801\u76f8\u5173\u7684\u5b8f\u548c\u6570\u636e\u7ed3\u6784\u90fd\u57fa\u4e8ex86\u67b6\u6784\uff0c\u800c\u540e\u6765\u4f17\u591a\u7684\u67b6\u6784\u90fd\u9700\u8981\u5f80\u8fd9\u4e2a\u8bbe\u8ba1\u9760\u62e2\uff0c\u7279\u522b\u662f\u6709\u4e00\u4e9b\u67b6\u6784\u4e2dPTE\u7684\u5c5e\u6027\u5b9a\u4e49\u548cx86\u7684\u5b8c\u5168\u4e0d\u4e00\u6837\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/include/asm/pgtable-prot.h>\n\n/*\n * \u8f6f\u4ef6\u5b9a\u4e49\u7684PTE\u6807\u5fd7\u4f4d\u5c5e\u6027\n */\n#define PTE_VALID         (_AT(pteval_t, 1) << 0)\n#define PTE_WRITE         (PTE_DBM)\n#define PTE_DIRTY         (_AT(pteval_t, 1) << 55)\n#define PTE_SPECIAL       (_AT(pteval_t, 1) << 56)\n#define PTE_PROT_NONE         (_AT(pteval_t, 1) << 58)\n")),(0,_.kt)("p",null,"\u5728ARMv8\u7684L3\u9875\u8868\u9879\u7684\u5b9a\u4e49\u4e2d\uff0cBit","[58:55]","\u662f\u786c\u4ef6\u9884\u7559\u7ed9\u8f6f\u4ef6\u4f7f\u7528\u7684\uff0c\u56e0\u6b64Linux\u5185\u6838\u4f7f\u7528\u8fd9\u51e0\u4f4d\u6765\u5b9e\u73b0PTE_DIRTY\u3001PTE_SPECIAL\u4ee5\u53caPTE_PROT_NONE\u8fd9\u51e0\u4e2a\u8f6f\u4ef6\u5b9e\u73b0\u7684PTE\u6807\u5fd7\u4f4d\u5c5e\u6027\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728ARMv8\u67b6\u6784\u91cc\u9875\u8868\u9879\u4e2d\u7684PTE_DBM\u4f4d\u7528\u4e8e\u8868\u793a\u8be5\u9875\u9762\u662f\u810f\u9875\uff0c\u800c\u5728Linux\u5185\u6838\u4e2d\u989d\u5916\u5b9e\u73b0\u4e86\u4e00\u4e2a\u8f6f\u4ef6\u6807\u5fd7\u4f4dPTE_DIRTY\u6765\u8868\u793a\u9875\u9762\u662f\u810f\u7684\uff0c\u5b83\u4f7f\u7528\u9875\u8868\u9879\u4e2d\u7684\u7b2c55\u4f4d\u3002"),(0,_.kt)("p",null,"\u6211\u4eec\u5728\u770b\u5185\u6838\u4ee3\u7801\u6216\u8005\u5199\u5185\u6838\u4ee3\u7801\u65f6\u5e38\u5e38\u4f1a\u64cd\u4f5cPTE\u7684\u5c5e\u6027\uff0c\u5982\u67e5\u8be2\u9875\u8868\u9879\u662f\u5426\u5b58\u5728\uff08present\uff09\uff0c\u82e5\u4e0d\u5b58\u5728\u5219\u8bf4\u660e\u8fd9\u4e2a\u9875\u8868\u9879\u5bf9\u5e94\u7684\u7269\u7406\u9875\u9762\u6ca1\u6709\u5728\u5185\u5b58\u4e2d\u3002\u5bf9\u4e8e\u8fd9\u79cd\u64cd\u4f5c\uff0cLinux\u5185\u6838\u4e2d\u5b9a\u4e49\u4e86\u5f88\u591a\u548c\u9875\u8868\u9879\u64cd\u4f5c\u6709\u5173\u7684\u5b8f\uff0c\u5efa\u8bae\u8bfb\u8005\u5728\u5199\u5185\u6838\u4ee3\u7801\u65f6\u91c7\u7528\u8fd9\u4e9b\u5b8f\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u64cd\u4f5c\u4e0a\u8ff0\u7684\u4f4d\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/include/asm/pgtable.h>\n\n#define pte_present(pte)    (!!(pte_val(pte) & (PTE_VALID | PTE_PROT_NONE)))\n#define pte_young(pte)         (!!(pte_val(pte) & PTE_AF))\n#define pte_special(pte)    (!!(pte_val(pte) & PTE_SPECIAL))\n#define pte_write(pte)         (!!(pte_val(pte) & PTE_WRITE))\n#define pte_user_exec(pte)     (!(pte_val(pte) & PTE_UXN))\n#define pte_cont(pte)         (!!(pte_val(pte) & PTE_CONT))\n")),(0,_.kt)("p",null,"\u88682.2\u5217\u51fa\u4e86\u8bbf\u95ee\u9875\u8868\u9879\u6807\u5fd7\u4f4d\u7684\u51fd\u6570\u3002"),(0,_.kt)("p",null,"\u88682.2\u3000\u3000\u8bbf\u95ee\u9875\u8868\u9879\u6807\u5fd7\u4f4d\u7684\u51fd\u6570"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"image-20250728222148956",src:e(26177).Z,width:"993",height:"1047"})),(0,_.kt)("p",null,"\u88682.3\u5217\u51fa\u4e86\u53e6\u5916\u4e00\u7ec4\u51fd\u6570\uff0c\u7528\u4e8e\u8bbe\u7f6e\u9875\u8868\u9879\u4e2d\u76f8\u5173\u6807\u5fd7\u4f4d\u7684\u51fd\u6570\u3002"),(0,_.kt)("p",null,"\u88682.3\u3000\u3000\u8bbe\u7f6e\u9875\u8868\u9879\u6807\u5fd7\u4f4d\u7684\u51fd\u6570"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"image-20250728222220200",src:e(22402).Z,width:"987",height:"838"})),(0,_.kt)("p",null,"\u5f53\u9700\u8981\u628aPTE\u9875\u8868\u9879\u5199\u5165\u786c\u4ef6\u9875\u8868\u65f6\uff0c\u53ef\u4ee5\u8c03\u7528set_pte_at()\u51fd\u6570\uff0c\u5b83\u6700\u7ec8\u662f\u8c03\u7528set_pte()\u51fd\u6570\u6765\u5b8c\u6210\u7684\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/include/asm/pgtable.h>\n\nstatic inline void set_pte_at(struct mm_struct *mm, unsigned long addr,\n                  pte_t *ptep, pte_t pte)\n{\n    pte_t old_pte;\n\n    if (pte_present(pte) && pte_user_exec(pte) && !pte_special(pte))\n        __sync_icache_dcache(pte);\n\n    set_pte(ptep, pte);\n}\n\nstatic inline void set_pte(pte_t *ptep, pte_t pte)\n{\n    WRITE_ONCE(*ptep, pte);\n\n    if (pte_valid_not_user(pte))\n        dsb(ishst);\n}\n")),(0,_.kt)("p",null,"pte_user_exec()\u8868\u793a\u8be5\u9875\u9762\u5c5e\u4e8e\u7528\u6237\u6001\u6620\u5c04\u7684\u9875\u9762\uff0c\u53ef\u8c03\u7528__sync_icache_dcache()\u6765\u8fdb\u884c\u9ad8\u901f\u7f13\u5b58\u7684\u4e00\u81f4\u6027\u64cd\u4f5c\u3002"),(0,_.kt)("p",null,"set_pte()\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570ptep\u6307\u5411\u9875\u8868\u4e2d\u7684\u9875\u8868\u9879\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570pte\u8868\u793a\u65b0\u7684\u9875\u8868\u9879\u7684\u5185\u5bb9\u3002pte_valid_not_user()\u8868\u793a\u8be5\u9875\u9762\u4e0d\u80fd\u5728\u7528\u6237\u6001\u8bbf\u95ee\uff0c\u5373\u8be5\u9875\u9762\u5c5e\u4e8e\u5185\u6838\u6001\uff0c\u5f53\u5b83\u88ab\u5199\u5165\u786c\u4ef6\u9875\u8868\u540e\uff0c\u9700\u8981\u8c03\u7528dsb()\u6765\u4fdd\u8bc1\u9875\u8868\u66f4\u65b0\u5b8c\u6210\u3002"),(0,_.kt)("p",null,"\u9664\u4e86\u5bf9\u9875\u8868\u9879\u76f8\u5173\u6807\u5fd7\u4f4d\u64cd\u4f5c\u7684\u5b8f\u4e4b\u5916\uff0c\u88682.4\u5217\u51fa\u4e86\u4e0e\u9875\u8868\u9879\u64cd\u4f5c\u76f8\u5173\u7684\u51fd\u6570\u6216\u5b8f\uff0c\u5982pgd_offset_k()\u7b49\u3002"),(0,_.kt)("p",null,"\u88682.4\u3000\u3000\u9875\u8868\u9879\u64cd\u4f5c\u76f8\u5173\u7684\u51fd\u6570\u6216\u5b8f"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"image-20250728222909328",src:e(85374).Z,width:"979",height:"1224"})),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"image-20250728222926103",src:e(50333).Z,width:"989",height:"591"})),(0,_.kt)("p",null,"\u88682.4\u4e2d\u53c2\u6570\u7684\u8bf4\u660e\u5982\u4e0b\u3002"),(0,_.kt)("p",null,"mm\u8868\u793a\u8fdb\u7a0b\u7684\u5185\u5b58\u63cf\u8ff0\u7b26mm_struct\u3002"),(0,_.kt)("p",null,"addr\u8868\u793a\u865a\u62df\u5730\u5740\u3002"),(0,_.kt)("p",null,"pgd\u8868\u793aPGD\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"pmd\u8868\u793aPMD\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"pud\u8868\u793aPUD\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"pte\u8868\u793a\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"prot\u8868\u793a\u9875\u8868\u9879\u7684\u5c5e\u6027\u3002"),(0,_.kt)("p",null,"page\u8868\u793a\u7269\u7406\u9875\u9762\u7684\u63cf\u8ff0\u7b26page\u6570\u636e\u7ed3\u6784\u3002"),(0,_.kt)("p",null,"dir\u8868\u793a\u4e0a\u4e00\u7ea7\u9875\u8868\u5bf9\u5e94\u7684\u9875\u8868\u9879\u3002"),(0,_.kt)("h2",{id:"215arm64\u5185\u6838\u5185\u5b58\u5206\u5e03"},"2.1.5\u3000ARM64\u5185\u6838\u5185\u5b58\u5206\u5e03"),(0,_.kt)("p",null,"ARM64\u67b6\u6784\u5904\u7406\u5668\u91c7\u752848\u4f4d\u7269\u7406\u5bfb\u5740\u673a\u5236\uff0c\u6700\u591a\u53ef\u4ee5\u5bfb\u627e256TB\u7684\u7269\u7406\u5730\u5740\u7a7a\u95f4\u3002\u5bf9\u4e8e\u76ee\u524d\u7684\u5e94\u7528\u6765\u8bf4\uff0c\u8fd9\u5df2\u7ecf\u8db3\u591f\u4e86\uff0c\u4e0d\u9700\u8981\u6269\u5c55\u523064\u4f4d\u7684\u7269\u7406\u5bfb\u5740\u673a\u5236\u3002\u865a\u62df\u5730\u5740\u540c\u6837\u6700\u591a\u652f\u630148\u4f4d\u5bfb\u5740\uff0c\u6240\u4ee5\u5728\u5904\u7406\u5668\u67b6\u6784\u8bbe\u8ba1\u4e0a\uff0c\u628a\u865a\u62df\u5730\u5740\u7a7a\u95f4\u5212\u5206\u4e3a\u4e24\u4e2a\u7a7a\u95f4\uff0c\u6bcf\u4e2a\u7a7a\u95f4\u6700\u591a\u652f\u6301256TB\u3002Linux\u5185\u6838\u5728\u5927\u591a\u6570\u67b6\u6784\u4e0a\u628a\u4e24\u4e2a\u5730\u5740\u7a7a\u95f4\u5212\u5206\u4e3a\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u3002"),(0,_.kt)("p",null,"\u7528\u6237\u7a7a\u95f4\uff1a0x0000 0000 0000 0000\uff5e0x0000 FFFF FFFF FFFF\u3002"),(0,_.kt)("p",null,"\u5185\u6838\u7a7a\u95f4\uff1a0xFFFF 0000 0000 0000\uff5e0xFFFF FFFF FFFF FFFF\u3002"),(0,_.kt)("p",null,"64\u4f4dLinux\u5185\u6838\u4e2d\u6ca1\u6709\u9ad8\u7aef\u5185\u5b58\uff0c\u56e0\u4e3a48\u4f4d\u7684\u5bfb\u5740\u7a7a\u95f4\u5df2\u7ecf\u8db3\u591f\u5927\u4e86\u3002"),(0,_.kt)("p",null,"\u5728QEMU\u865a\u62df\u673a\u4e2d\uff0cARM64\u67b6\u6784\u7684Linux 5.0\u5185\u6838\u7684\u5185\u5b58\u5206\u5e03\u5982\u56fe2.8\u6240\u793a\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"image-20250728223142038",src:e(43314).Z,width:"1542",height:"673"})),(0,_.kt)("p",null,"\u25b2\u56fe2.8\u3000ARM64\u67b6\u6784\u7684Linux 5.0\u5185\u6838\u7684\u5185\u5b58\u5206\u5e03","[1]"),(0,_.kt)("p",null,"\u8fd9\u90e8\u5206\u4fe1\u606f\u7684\u8f93\u51fa\u662f\u5728mem_init()\u51fd\u6570\u4e2d\u5b9e\u73b0\u7684\u3002\u6ce8\u610f\uff0c\u8be5\u4fe1\u606f\u5df2\u7ecf\u5728Linux 4.16\u5185\u6838\u4e2d\u5220\u9664\uff0c\u8fd9\u91cc\u5728runninglinuxkernel_5.0\u7684\u5b9e\u9a8c\u4ee3\u7801\u4e2d\u91cd\u65b0\u6dfb\u52a0\u4e86\u4e0a\u8ff0\u8f93\u51fa\u4fe1\u606f\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},'<arch/arm64/mm/init.c>\n\n#define MLK(b, t) b, t, ((t) - (b)) >> 10\n#define MLM(b, t) b, t, ((t) - (b)) >> 20\n#define MLG(b, t) b, t, ((t) - (b)) >> 30\n#define MLK_ROUNDUP(b, t) b, t, DIV_ROUND_UP(((t) - (b)), SZ_1K)\n\n        pr_notice("Virtual kernel memory layout:\\n");\n        pr_notice("    modules : 0x%16lx - 0x%16lx   (%6ld MB)\\n",\n                MLM(MODULES_VADDR, MODULES_END));\n        pr_notice("    vmalloc : 0x%16lx - 0x%16lx   (%6ld GB)\\n",\n                MLG(VMALLOC_START, VMALLOC_END));\n        pr_notice("      .text : 0x%16llx" " - 0x%16llx" "   (%6lld KB)\\n",\n                MLK_ROUNDUP((u64)_text, (u64)_etext));\n        pr_notice("      .init : 0x%16llx" " - 0x%16llx" "   (%6lld KB)\\n",\n                MLK_ROUNDUP((u64)__init_begin, (u64)__init_end));\n        pr_notice("    .rodata : 0x%16llx" " - 0x%16llx" "   (%6lld KB)\\n",\n                MLK_ROUNDUP((u64)__start_rodata, (u64)__end_rodata));\n        pr_notice("      .data : 0x%16llx" " - 0x%16llx" "   (%6lld KB)\\n",\n                MLK_ROUNDUP((u64)_sdata, (u64)_edata));\n        pr_notice("       .bss : 0x%16llx" " - 0x%16llx" "   (%6lld KB)\\n",\n                MLK_ROUNDUP((u64)__bss_start, (u64)__bss_stop));\n        pr_notice("    fixed   : 0x%16lx - 0x%16lx   (%6ld KB)\\n",\n                MLK(FIXADDR_START, FIXADDR_TOP));\n        pr_notice("    PCI I/O : 0x%16lx - 0x%16lx   (%6ld MB)\\n",\n                MLM(PCI_IO_START, PCI_IO_END));\n#ifdef CONFIG_SPARSEMEM_VMEMMAP\n        pr_notice("    vmemmap : 0x%16lx - 0x%16lx   (%6ld GB maximum)\\n",\n                MLG(VMEMMAP_START, VMEMMAP_START + VMEMMAP_SIZE));\n        pr_notice("             0x%16lx - 0x%16lx   (%6ld MB actual)\\n",\n                MLM((unsigned long)phys_to_page(memblock_start_of_DRAM()),\n                    (unsigned long)virt_to_page(high_memory)));\n#endif\n        pr_notice("    memory  : 0x%16lx - 0x%16lx   (%6ld MB)\\n",\n                MLM(__phys_to_virt(memblock_start_of_DRAM()),\n                   (unsigned long)high_memory));\n        pr_notice("    PAGE_OFFSET  : 0x%16lx\\n",\n               PAGE_OFFSET);\n        pr_notice("    kimage_voffset : 0x%16llx\\n", kimage_voffset);\n        pr_notice("    PHYS_OFFSET  : 0x%llx\\n", PHYS_OFFSET);\n        pr_notice("    start memory  : 0x%llx\\n",\n               memblock_start_of_DRAM());\n\n#undef MLK\n#undef MLM\n#undef MLK_ROUNDUP\n')),(0,_.kt)("p",null,"PAGE_OFFSET\u8868\u793a\u7269\u7406\u5185\u5b58\u5728\u5185\u6838\u7a7a\u95f4\u91cc\u505a\u7ebf\u6027\u6620\u5c04\uff08linear mapping\uff09\u7684\u8d77\u59cb\u5730\u5740\uff0c\u5728ARM64\u7684Linux\u5185\u6838\u4e2d\u8be5\u503c\u5b9a\u4e49\u4e3a0xFFFF 8000 0000 0000\u3002Linux\u5185\u6838\u5728\u521d\u59cb\u5316\u65f6\u4f1a\u628a\u7269\u7406\u5185\u5b58\u5168\u90e8\u505a\u4e00\u6b21\u7ebf\u6027\u6620\u5c04\uff0c\u6620\u5c04\u5230\u5185\u6838\u7a7a\u95f4\u7684\u865a\u62df\u5730\u5740\u4e0a\u3002\u8be5\u503c\u5b9a\u4e49\u5728arch/arm64/include/asm/ memory.h\u5934\u6587\u4ef6\u4e2d\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/include/asm/memory.h>\n\n#define PAGE_OFFSET           (UL(0xffffffffffffffff) - \\\n                (UL(1) << (VA_BITS - 1)) + 1)\n")),(0,_.kt)("p",null,"KIMAGE_VADDR\u8868\u793a\u5185\u6838\u6620\u50cf\u6587\u4ef6\u6620\u5c04\u5230\u5185\u6838\u7a7a\u95f4\u7684\u8d77\u59cb\u865a\u62df\u5730\u5740\u3002\u5b83\u7684\u503c\u7b49\u4e8eMODULES_END \u7684\u503c\uff0cMODULES_END \u8868\u793a\u6a21\u5757\u533a\u57df\u7684\u865a\u62df\u5730\u5740\u7684\u7ed3\u675f\u5730\u5740\u3002KIMAGE_VADDR\u5b8f\u7684\u503c\u4e3a0xFFFF 0000 1000 0000\uff0c\u5b83\u7684\u5b9a\u4e49\u5982\u4e0b\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/include/asm/memory.h>\n\n#define KIMAGE_VADDR            (MODULES_END)\n#define MODULES_END             (MODULES_VADDR + MODULES_VSIZE)\n#define MODULES_VADDR           (BPF_JIT_REGION_END)\n#define MODULES_VSIZE           (SZ_128M)\n")),(0,_.kt)("p",null,"\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u76ee\u6807\u6587\u4ef6\u5e76\u4e14\u94fe\u63a5\u5b8c\u6210\u4e4b\u540e\uff0c\u5373\u53ef\u77e5\u9053\u5185\u6838\u6620\u50cf\u6587\u4ef6\u6700\u7ec8\u7684\u5927\u5c0f\u3002\u63a5\u4e0b\u6765\uff0c\u5c06\u5176\u6253\u5305\u6210\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u8be5\u64cd\u4f5c\u7531arch/arm64/kernel/vmlinux.ld.S\u63a7\u5236\uff0c\u5176\u4e2d\u4e5f\u5212\u5b9a\u4e86\u5185\u6838\u7684\u5185\u5b58\u5e03\u5c40\u3002"),(0,_.kt)("p",null,"\u5185\u6838\u6620\u50cf\u6587\u4ef6\u672c\u8eab\u5360\u636e\u7684\u5185\u5b58\u7a7a\u95f4\u4ece_text\u5230_end\uff0c\u5e76\u4e14\u5206\u4e3a\u5982\u4e0b\u51e0\u4e2a\u6bb5\u3002"),(0,_.kt)("p",null,"\u4ee3\u7801\uff08.text\uff09\u6bb5\uff1a_text\u548c_etext\u4e3a\u4ee3\u7801\u6bb5\u7684\u8d77\u59cb\u4e0e\u7ed3\u675f\u5730\u5740\uff0c\u5305\u542b\u4e86\u7f16\u8bd1\u540e\u7684\u5185\u6838\u4ee3\u7801\u3002"),(0,_.kt)("p",null,"init\u6bb5\uff1a",(0,_.kt)("strong",{parentName:"p"},"init_begin\u548c"),"init_end\u5206\u522b\u4e3ainit\u6bb5\u7684\u8d77\u59cb\u4e0e\u7ed3\u675f\u5730\u5740\uff0c\u5305\u542b\u4e86\u5927\u90e8\u5206\u6a21\u5757\u521d\u59cb\u5316\u7684\u6570\u636e\u3002"),(0,_.kt)("p",null,"\u6570\u636e\uff08.data\uff09\u6bb5\uff1a_sdata\u548c_edata\u5206\u522b\u4e3a\u6570\u636e\u6bb5\u7684\u8d77\u59cb\u548c\u7ed3\u675f\u5730\u5740\uff0c\u4fdd\u5b58\u4e86\u5185\u6838\u7684\u5927\u90e8\u5206\u53d8\u91cf\u3002"),(0,_.kt)("p",null,"bss\u6bb5\uff1a",(0,_.kt)("strong",{parentName:"p"},"bss_start\u548c"),"bss_stop\u5206\u522b\u4e3abss\u6bb5\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u5730\u5740\uff0c\u5305\u542b\u4e86\u672a\u521d\u59cb\u5316\u7684\u6216\u8005\u521d\u59cb\u5316\u4e3a0\u7684\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u3002"),(0,_.kt)("p",null,"\u4e0a\u8ff0\u51e0\u4e2a\u6bb5\u7684\u5927\u5c0f\u5728\u7f16\u8bd1\u94fe\u63a5\u65f6\u6839\u636e\u5185\u6838\u914d\u7f6e\u6765\u786e\u5b9a\uff0c\u56e0\u4e3a\u6bcf\u79cd\u914d\u7f6e\u7684\u4ee3\u7801\u6bb5\u548c\u6570\u636e\u6bb5\u957f\u5ea6\u90fd\u4e0d\u76f8\u540c\uff0c\u8fd9\u53d6\u51b3\u4e8e\u8981\u7f16\u8bd1\u54ea\u4e9b\u5185\u6838\u6a21\u5757\uff0c\u4f46\u662f\u8d77\u59cb\u5730\u5740_text\u603b\u662f\u76f8\u540c\u7684\u3002\u5185\u6838\u7f16\u8bd1\u5b8c\u6210\u4e4b\u540e\uff0c\u4f1a\u751f\u6210\u4e00\u4e2aSystem.map\u6587\u4ef6\uff0c\u67e5\u8be2\u8fd9\u4e2a\u6587\u4ef6\u53ef\u4ee5\u627e\u5230\u8fd9\u4e9b\u5730\u5740\u7684\u5177\u4f53\u6570\u503c\u3002\u6ce8\u610f\uff0c\u8fd9\u4e9b\u6bb5\u7684\u8d77\u59cb\u5730\u5740\u548c\u7ed3\u675f\u5730\u5740\u90fd\u662f\u94fe\u63a5\u5730\u5740\uff0c\u5373\u5185\u6838\u7a7a\u95f4\u7684\u865a\u62df\u5730\u5740\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<System.map\u6587\u4ef6>\n\nffff000010080000 t _head\nffff000010080000 T _text\n...\nffff000011a60000 T stext\nffff000011a60000 T __init_begin\n...\nffff000011730000 R _etext\nffff000011730000 R __start_rodata\n...\nffff000011a53000 R __end_rodata\n\nffff000011ee0000 D __init_end\nffff000011ee0000 D _sdata\n...\nffff000011ff8a00 D _edata\n")),(0,_.kt)("p",null,"\u4ece\u4e0a\u8ff0\u5206\u6790\u53ef\u77e5\uff0c\u5185\u6838\u6620\u50cf\u6587\u4ef6\u6620\u5c04\u5230\u5185\u6838\u7a7a\u95f4\u7684\u8d77\u59cb\u5730\u5740\u7531KIMAGE_VADDR\u5b8f\u6765\u6307\u5b9a\uff0c\u800c\u4ee3\u7801\u6bb5\u7684\u8d77\u59cb\u5730\u5740\u7531vmlinux.ld.S\u94fe\u63a5\u6587\u4ef6\u63a7\u5236\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/kernel/vmlinux.ld.S>\n\nSECTIONS\n{\n     . = KIMAGE_VADDR + TEXT_OFFSET;\n\n  ...\n}\n")),(0,_.kt)("p",null,"\u4ee3\u7801\u6bb5\u7684\u8d77\u59cb\u5730\u5740\u662f\u7531KIMAGE_VADDR + TEXT_OFFSET\u7ec4\u6210\u7684\uff0c\u800cTEXT_OFFSET\u8868\u793a\u4ee3\u7801\u6bb5\u5728\u5730\u5740\u7a7a\u95f4\u7684\u76f8\u5bf9\u504f\u79fb\u91cf\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<arch/arm64/Makefile>\n\nTEXT_OFFSET := 0x00080000\n")),(0,_.kt)("p",null,"\u56e0\u6b64\uff0c\u8ba1\u7b97\u4ee3\u7801\u6bb5\u94fe\u63a5\u5730\u5740\u7684\u8d77\u59cb\u5730\u5740\uff0c0xFFFF 0000 1000 0000 + 0x0008 0000 =0xFFFF 0000 1008 0000\uff0c\u8fd9\u548c\u4eceSystem.map\u6587\u4ef6\u67e5\u627e\u5230\u7684_text\u4e00\u81f4\u3002"),(0,_.kt)("p",null,"\u6700\u540e\u6211\u4eec\u5bf9\u5185\u5b58\u5206\u5e03\u505a\u4e00\u4e2a\u603b\u7ed3\uff0c\u5982\u56fe2.9\u6240\u793a"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"image-20250728223640062",src:e(24562).Z,width:"1458",height:"1496"})),(0,_.kt)("p",null,"\u25b2\u56fe2.9\u3000ARM64\u5728Linux 5.0\u5185\u6838\u7684\u5185\u5b58\u5206\u5e03"),(0,_.kt)("p",null,"\uff081\uff09\u7528\u6237\u7a7a\u95f4\uff1a0x0000 0000 0000 0000\uff5e0x0000 FFFF FFFF FFFF\uff0c\u4e00\u5171256TB\u3002"),(0,_.kt)("p",null,"\uff082\uff09\u975e\u89c4\u8303\u533a\u57df\u3002"),(0,_.kt)("p",null,"\uff083\uff09\u5185\u6838\u7a7a\u95f4\uff1a0xFFFF 0000 0000 0000\uff5e0xFFFF FFFF FFFF FFFF\uff0c\u4e00\u5171256TB\u3002\u5185\u6838\u7a7a\u95f4\u53c8\u505a\u4e86\u5982\u4e0b\u7ec6\u5206\u3002"),(0,_.kt)("p",null,"Modules\u533a\u57df\uff1a0xFFFF 0000 0800 0000\uff5e0xFFFF 0000 1000 0000\uff0c\u5927\u5c0f\u4e3a128MB\u3002"),(0,_.kt)("p",null,"vmalloc\u533a\u57df\uff1a0xFFFF 0000 1000 0000\uff5e0xFFFF 7DFF BFFF 0000\uff0c\u5927\u5c0f\u4e3a129022GB\u3002"),(0,_.kt)("p",null,"\u56fa\u5b9a\u6620\u5c04\uff08fixed\uff09\u533a\u57df\uff1a0xFFFF 7DFF FE7F 9000\uff5e0xFFFF 7DFF FEC0 0000\uff0c\u5927\u5c0f\u4e3a4124KB\u3002"),(0,_.kt)("p",null,"PCI I/O\u533a\u57df\uff1a0xFFFF 7DFF FEE0 0000\uff5e0xFFFF 7DFF FFE0 0000\uff0c\u5927\u5c0f\u4e3a16MB\u3002"),(0,_.kt)("p",null,"vmemmap\u533a\u57df\uff1a0xFFFF 7E00 0000 0000\uff5e0xFFFF 8000 0000 0000\uff0c\u5927\u5c0f\u4e3a2048GB\u3002"),(0,_.kt)("p",null,"\u7ebf\u6027\u6620\u5c04\u533a\uff1a0xFFFF 8000 0000 0000\uff5e0xFFFF FFFF FFFF FFFF\uff0c\u5927\u5c0f\u4e3a128TB\u3002"),(0,_.kt)("p",null,"\u8bfb\u8005\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u5185\u6838\u6620\u50cf\u6587\u4ef6\u6620\u5c04\u7684\u533a\u57df\u5728vmalloc\u533a\u57df\u91cc\uff0c\u8fd9\u4e00\u70b9\u548cLinux 4.0\u5185\u6838\u4e0d\u76f8\u540c\uff0c\u8fd9\u662f\u4e3a\u4e86\u5b9e\u73b0KASLR\u7279\u6027\u800c\u505a\u7684\u6539\u53d8","[2]","\u3002"),(0,_.kt)("p",null,"Linux\u5185\u6838\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8f6c\u50a8\uff08dump\uff09\u9875\u8868\u7684\u8c03\u8bd5\u63a5\u53e3\u3002\u8bfb\u8005\u9700\u8981\u5728\u5185\u6838\u914d\u7f6e\u6587\u4ef6\uff08\u4ee5.config\u7ed3\u5c3e\uff09\u4e2d\u4f7f\u80fdCONFIG_ARM64_PTDUMP_DEBUGFS\u914d\u7f6e\u9009\u9879\u3002\u8be5\u8c03\u8bd5\u63a5\u53e3\u4e3a/sys/kernel/debug/ kernel_page_tables\u3002\u8be5\u8c03\u8bd5\u63a5\u53e3\u4f1a\u904d\u5386\u5185\u6838\u7a7a\u95f4\u6240\u6709\u5df2\u7ecf\u6620\u5c04\u7684\u9875\u9762\uff0c\u5206\u522b\u663e\u793a\u865a\u62df\u5730\u5740\u533a\u95f4\u3001\u9875\u8868\u5927\u5c0f\u3001\u9875\u8868\u7b49\u7ea7\u3001\u9875\u8868\u5c5e\u6027\u4ee5\u53ca\u5185\u5b58\u5c5e\u6027\u7b49\u4fe1\u606f\uff0c\u5982\u56fe2.10\u6240\u793a\u3002"),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"image-20250728223825430",src:e(10013).Z,width:"1736",height:"642"})),(0,_.kt)("p",null,"\u25b2\u56fe2.10\u3000\u8c03\u8bd5\u63a5\u53e3\u663e\u793a\u7684\u4fe1\u606f"),(0,_.kt)("h2",{id:"216\u6848\u4f8b\u5206\u6790arm64\u7684\u9875\u8868\u6620\u5c04\u8fc7\u7a0b"},"2.1.6\u3000\u6848\u4f8b\u5206\u6790\uff1aARM64\u7684\u9875\u8868\u6620\u5c04\u8fc7\u7a0b"),(0,_.kt)("p",null,"\u4e0b\u9762\u901a\u8fc7\u4e00\u4e2a\u6848\u4f8b\u6765\u4ecb\u7ecdARM64\u7684\u9875\u8868\u6620\u5c04\u8fc7\u7a0b\u3002\u5728\u5185\u6838\u521d\u59cb\u5316\u9636\u6bb5\u4f1a\u5bf9\u5185\u6838\u7a7a\u95f4\u7684\u9875\u8868\u8fdb\u884c\u6620\u5c04\uff0c\u5b9e\u73b0\u7684\u51fd\u6570\u662f__create_pgd_mapping()\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"<start_kenrel()-> setup_arch()->paging_init()>\n\nvoid __init paging_init(void)\n{\n    pgd_t *pgdp = pgd_set_fixmap(__pa_symbol(swapper_pg_dir));\n\n    map_kernel(pgdp);\n    map_mem(pgdp);\n\n    pgd_clear_fixmap();\n}\n")),(0,_.kt)("p",null,"\u5728paging_init()\u51fd\u6570\u4e2d\u4f1a\u5bf9\u5185\u6838\u7a7a\u95f4\u7684\u591a\u4e2a\u5185\u5b58\u6bb5\u505a\u91cd\u65b0\u6620\u5c04\u3002"),(0,_.kt)("p",null,"map_kernel(pgdp)\uff1a\u5bf9\u5185\u6838\u6620\u50cf\u6587\u4ef6\u7684\u5404\u4e2a\u5757\u91cd\u65b0\u6620\u5c04\u3002\u5728head.S\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u5bf9\u5185\u6838\u6620\u50cf\u6587\u4ef6\u505a\u4e86\u5757\u6620\u5c04\uff0c\u73b0\u5728\u9700\u8981\u4f7f\u7528\u9875\u673a\u5236\u6765\u91cd\u65b0\u6620\u5c04\u3002"),(0,_.kt)("p",null,"map_mem(pgdp)\uff1a\u7269\u7406\u5185\u5b58\u7684\u7ebf\u6027\u6620\u5c04\u3002\u7269\u7406\u5185\u5b58\u4f1a\u5168\u90e8\u7ebf\u6027\u6620\u5c04\u5230\u4ee5PAGE_OFFSET\u5f00\u59cb\u7684\u5185\u6838\u7a7a\u95f4\u7684\u865a\u62df\u5730\u5740\uff0c\u4ee5\u52a0\u901f\u5185\u6838\u8bbf\u95ee\u5185\u5b58\u3002"),(0,_.kt)("p",null,"\u4e0a\u8ff0\u4e24\u4e2a\u51fd\u6570\u6700\u7ec8\u662f\u8c03\u7528",(0,_.kt)("strong",{parentName:"p"},"create_pgd_mapping()\u51fd\u6570\u6765\u521b\u5efa\u9875\u8868\u6620\u5c04\u7684\u3002\u5728\u8c03\u7528\u8be5\u51fd\u6570\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u83b7\u53d6PGD\u9875\u8868\u57fa\u5730\u5740\u3002\u5728\u5185\u5b58\u7ebf\u6027\u6620\u5c04\u5b8c\u6210\u4e4b\u524d\uff0c\u5982\u679c\u4e0d\u80fd\u76f4\u63a5\u901a\u8fc7"),"pa()\u8fd9\u4e2a\u5b8f\u6765\u76f4\u63a5\u4ece\u7ebf\u6027\u6620\u5c04\u5730\u5740\u8f6c\u6362\u5230\u7269\u7406\u5730\u5740\uff0c\u8981\u600e\u4e48\u529e\uff1f"),(0,_.kt)("p",null,"\u5728paging_init()\u51fd\u6570\u4e2d\u901a\u8fc7\u5982\u4e0b\u6b65\u9aa4\u6765\u627e\u5230PGD\u9875\u8868\u57fa\u5730\u5740\u3002"),(0,_.kt)("p",null,"\u5168\u5c40\u53d8\u91cfswapper_pg_dir\u662f\u5185\u6838\u9875\u8868\u7684PGD\u9875\u8868\u57fa\u5730\u5740\uff0c\u53ef\u662f\u8fd9\u662f\u865a\u62df\u5730\u5740\uff0c\u56e0\u4e3a\u5728\u5185\u6838\u542f\u52a8\u7684\u6c47\u7f16\u4ee3\u7801\u4e2d\u4f1a\u505a\u4e00\u6b21\u7b80\u5355\u7684\u5757\u6620\u5c04\u3002"),(0,_.kt)("p",null,(0,_.kt)("strong",{parentName:"p"},"pa_symbol()\u5b8f\u628a\u5185\u6838\u7b26\u53f7\u7684\u865a\u62df\u5730\u5740\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u65f6\u7269\u7406\u5185\u5b58\u7684\u7ebf\u6027\u6620\u5c04\u8fd8\u6ca1\u5efa\u7acb\u597d\uff0c\u56e0\u6b64\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528"),"pa()\u5b8f\u3002"),(0,_.kt)("p",null,"pgd_set_fixmap()\u51fd\u6570\u505a\u4e00\u4e2a\u56fa\u5b9a\u6620\u5c04\uff0c\u628aswapper_pg_dir\u9875\u8868\u91cd\u65b0\u6620\u5c04\u5230\u56fa\u5b9a\u6620\u5c04\u533a\u57df\u3002"),(0,_.kt)("p",null,"\u5185\u6838\u91cc\u9762\u6709\u4e00\u4e2a\u56fa\u5b9a\u6620\u5c04\uff08fixed mapping\uff09\u533a\u57df\uff0c\u5b83\u7684\u8303\u56f4\u662f0xFFFF 7DFF FE7F 9000\uff5e0xFFFF 7DFF FEC0 0000\uff0c\u6211\u4eec\u53ef\u4ee5\u628aPGD\u9875\u8868\u6620\u5c04\u8fd9\u4e2a\u533a\u57df\uff0c\u7136\u540e\u624d\u53ef\u4ee5\u4f7f\u7528__pa()\u5b8f\u3002"),(0,_.kt)("p",null,"pgd_set_fixmap()\u51fd\u6570\u5c31\u505a\u8fd9\u4e2a\u56fa\u5b9a\u6620\u5c04\u7684\u4e8b\u60c5\uff0c\u628aPGD\u9875\u8868\u7684\u7269\u7406\u9875\u9762\u6620\u5c04\u5230\u56fa\u5b9a\u6620\u5c04\u533a\u57df\uff0c\u8fd4\u56dePGD\u9875\u8868\u7684\u865a\u62df\u5730\u5740\u3002\u800cpgd_clear_fixmap()\u51fd\u6570\u7528\u4e8e\u53d6\u6d88\u56fa\u5b9a\u533a\u57df\u7684\u6620\u5c04\u3002"),(0,_.kt)("p",null,(0,_.kt)("strong",{parentName:"p"},"pa_symbol()\u5b8f\u548c"),"pa()\u5b8f\u7684\u4f5c\u7528\u90fd\u662f\u628a\u5185\u6838\u865a\u62df\u5730\u5740\u8f6c\u6362\u4e3a\u7269\u7406\u5730\u5740\u3002\u5b83\u4eec\u4e24\u4e2a\u4e4b\u95f4\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f"),(0,_.kt)("p",null,"\u6211\u4eec\u5728\u5185\u6838\u4e2d\u5e38\u5e38\u9700\u8981\u8bbf\u95ee\u4e00\u4e9b\u5185\u6838\u7b26\u53f7\u8868\u7684\u7269\u7406\u5730\u5740\uff0c\u5982\u5185\u6838\u9875\u8868swapper_pg_dir\u3001\u4ee3\u7801\u6bb5\u7684\u7b26\u53f7_text\u6216\u8005",(0,_.kt)("strong",{parentName:"p"},"init_begin\u7b49\u3002\u8fd9\u4e9b\u5185\u6838\u7b26\u53f7\u8868\u7684\u94fe\u63a5\u5730\u5740\u5728vmalloc\u533a\u57df\uff0c\u5373\u4eceKIMAGE_VADDR + TEXT_OFFSET\u5f00\u59cb\u7684\u865a\u62df\u5730\u5740\uff0c\u5b83\u548c\u5185\u6838\u7a7a\u95f4\u7684\u7ebf\u6027\u6620\u5c04\u533a\u662f\u4e0d\u76f8\u540c\u7684\u3002"),"pa()\u5b8f\u53ef\u4ee5\u901a\u8fc7\u865a\u62df\u5730\u5740\u6765\u786e\u5b9a\u533a\u57df\u3002"),(0,_.kt)("p",null,"\u5728ARM64\u4e2d\uff0c",(0,_.kt)("strong",{parentName:"p"},"pa_symbol()\u5b8f\u901a\u8fc7kimagevoffset\u6765\u8ba1\u7b97\u3002","_","pa_symbol()\u5b8f\u7b49\u540c\u4e8e"),"kimg_to_phys()\u5b8f\uff0c\u5b83\u901a\u8fc7\u548c\u5168\u5c40\u53d8\u91cfkimage_voffset\u505a\u7b80\u5355\u51cf\u6cd5\u8ba1\u7b97\u5373\u53ef\u5b8c\u6210\u8ba1\u7b97\uff0c\u4e0eLinux\u5185\u6838\u76f8\u5173\u7684\u4ee3\u7801\u5982\u4e0b\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"//\u5185\u5b58\u7ebf\u6027\u6620\u5c04\u5efa\u7acb\u4e4b\u524d\n#define __pa_symbol(x)        __phys_addr_symbol(x)\n#define __pa_symbol_nodebug(x) __kimg_to_phys((phys_addr_t)(x))\n#define __kimg_to_phys(addr)   ((addr) - kimage_voffset)\n")),(0,_.kt)("p",null,"\u90a3kimage_voffset\u4ee3\u8868\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u5982\u56fe2.11\u6240\u793a\uff0c\u5f53\u7cfb\u7edf\u521a\u521d\u59cb\u5316\u65f6\uff0c\u5185\u6838\u6620\u50cf\u901a\u8fc7\u5757\u6620\u5c04\u7684\u65b9\u5f0f\u6620\u5c04\u5230KIMAGE_VADDR + TEXT_OFFSET\u7684\u865a\u62df\u5730\u5740\u4e0a\uff0c\u56e0\u6b64kimage_voffset\u8868\u793a\u5185\u6838\u6620\u50cf\u865a\u62df\u5730\u5740\u548c\u7269\u7406\u5730\u5740\u4e4b\u95f4\u7684\u504f\u79fb\u91cf\uff0c\u8fd9\u7c7b\u4f3c\u4e8e\u7ebf\u6027\u6620\u5c04\u4e4b\u540e\u7684PAGE_OFFSET\u3002"),(0,_.kt)("p",null,"\u5f53\u6240\u6709\u7269\u7406\u5185\u5b58\u90fd\u7ebf\u6027\u6620\u5c04\u5230\u7ebf\u6027\u6620\u5c04\u533a\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528",(0,_.kt)("strong",{parentName:"p"},"pa()\u5b8f\u6765\u5feb\u901f\u5f97\u5230\u865a\u62df\u5730\u5740\u5bf9\u5e94\u7684\u7269\u7406\u5730\u5740\u3002"),"pa()\u5b8f\u5185\u90e8\u4f1a\u8c03\u7528",(0,_.kt)("strong",{parentName:"p"},"is_lm_address()\u5b8f\u6765\u5224\u65ad\u865a\u62df\u5730\u5740\u5728\u54ea\u4e2a\u533a\u57df\uff0c\u4ece\u800c\u9009\u62e9\u4f7f\u7528"),"lm_to_phys()\u6216\u8005__kimg_to_phys()\u6765\u8f6c\u6362\u5730\u5740\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"//\u5185\u5b58\u7ebf\u6027\u6620\u5c04\u5efa\u7acb\u4e4b\u540e\n#define __lm_to_phys(addr)    (((addr) & ~PAGE_OFFSET) + PHYS_OFFSET)\n#define __kimg_to_phys(addr)  ((addr) - kimage_voffset)\n")),(0,_.kt)("p",null,(0,_.kt)("img",{alt:"1753973146163",src:e(61335).Z,width:"1603",height:"1420"})),(0,_.kt)("p",null,"\u25b2\u56fe2.11\u3000kimage_voffset\u7684\u542b\u4e49"),(0,_.kt)("p",null,"\u63a5\u4e0b\u6765\uff0c\u770b__create_pgd_mapping()\u51fd\u6570\u7684\u5b9e\u73b0\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"    static void __create_pgd_mapping(pgd_t *pgdir, phys_addr_t phys,\n                 unsigned long virt, phys_addr_t size,\n                 pgprot_t prot,\n                 phys_addr_t (*pgtable_alloc)(void),\n                 int flags)\n{\n    unsigned long addr, length, end, next;\n    pgd_t *pgdp = pgd_offset_raw(pgdir, virt);\n\n    end = addr + length;\n    do {\n        next = pgd_addr_end(addr, end);\n        alloc_init_pud(pgdp, addr, next, phys, prot, pgtable_alloc,\n                  flags);\n        phys += next - addr;\n    } while (pgdp++, addr = next, addr != end);\n}\n")),(0,_.kt)("p",null,"\u5728__create_pgd_mapping ()\u51fd\u6570\u4e2d\uff0c\u4ee5PGDIR_SIZE\u4e3a\u6b65\u957f\u904d\u5386\u5185\u5b58\u533a\u57df","[virt,virt+size]","\uff0c\u7136\u540e\u901a\u8fc7\u8c03\u7528alloc_init_pud()\u6765\u521d\u59cb\u5316PGD\u9875\u8868\u9879\u5185\u5bb9\u548cPUD\u3002pgd_addr_end()\u4ee5PGDIR_SIZE\u4e3a\u6b65\u957f\u3002"),(0,_.kt)("pre",null,(0,_.kt)("code",{parentName:"pre"},"static void alloc_init_pud(pgd_t *pgdp, unsigned long addr, unsigned long end,\n               phys_addr_t phys, pgprot_t prot,\n               phys_addr_t (*pgtable_alloc)(void),\n               int flags)\n{\n    unsigned long next;\n    pud_t *pudp;\n    pgd_t pgd = READ_ONCE(*pgdp);\n\n    if (pgd_none(pgd)) {\n        phys_addr_t pud_phys;\n        pud_phys = pgtable_alloc();\n        __pgd_populate(pgdp, pud_phys, PUD_TYPE_TABLE);\n        pgd = READ_ONCE(*pgdp);\n    }\n\n    pudp = pud_set_fixmap_offset(pgdp, addr);\n    do {\n        pud_t old_pud = READ_ONCE(*pudp);\n\n        next = pud_addr_end(addr, end);\n\n        if (use_1G_block(addr, next, phys) &&\n           (flags & NO_BLOCK_MAPPINGS) == 0) {\n            pud_set_huge(pudp, phys, prot);\n        } else {\n            alloc_init_cont_pmd(pudp, addr, next, phys, prot,\n                        pgtable_alloc, flags);\n        }\n        phys += next - addr;\n    } while (pudp++, addr = next, addr != end);\n\n    pud_clear_fixmap();\n}\n")),(0,_.kt)("p",null,"alloc_init_pud()\u51fd\u6570\u4f1a\u505a\u5982\u4e0b\u4e8b\u60c5\u3002"),(0,_.kt)("p",null,"\uff081\uff09\u901a\u8fc7pgd_none()\u5224\u65ad\u5f53\u524dPGD\u9875\u8868\u9879\u7684\u5185\u5bb9\u662f\u5426\u4e3a\u7a7a\u3002\u5982\u679cPGD\u9875\u8868\u9879\u7684\u5185\u5bb9\u4e3a\u7a7a\uff0c\u8bf4\u660e\u4e0b\u4e00\u7ea7\u9875\u8868\u4e3a\u7a7a\uff0c\u90a3\u4e48\u9700\u8981\u52a8\u6001\u5206\u914d\u4e0b\u4e00\u7ea7\u9875\u8868\u3002PUD\u4e00\u5171\u6709PTRS_PER_PUD\u4e2a\u9875\u8868\u9879\uff0c\u7136\u540e\u901a\u8fc7pgd_populate()\u628a\u521a\u5206\u914d\u7684PUD\u9875\u8868\u7684\u57fa\u5730\u5740\u8bbe\u7f6e\u5230\u76f8\u5e94\u7684PGD\u9875\u8868\u9879\u4e2d\u3002"),(0,_.kt)("p",null,"\uff082\uff09\u901a\u8fc7pud_set_fixmap_offset ()\u6765\u83b7\u53d6\u76f8\u5e94\u7684PUD\u8868\u9879\u3002"),(0,_.kt)("p",null,"\uff083\uff09\u4ee5PUD_SIZE\u4e3a\u6b65\u957f\uff0c\u901a\u8fc7while\u5faa\u73af\u6765\u8bbe\u7f6e\u4e0b\u4e00\u7ea7\u9875\u8868\u3002"),(0,_.kt)("p",null,"\uff084\uff09use_1G_block()\u51fd\u6570\u4f1a\u5224\u65ad\u662f\u5426\u4f7f\u75281GB\u5927\u5c0f\u7684\u5185\u5b58\u5757\u6765\u6620\u5c04\u3002\u5982\u679c\u8fd9\u91cc\u8981\u6620\u5c04\u7684\u5185\u5b58\u5757\u5927\u5c0f\u6b63\u597d\u662fPUD_SIZE\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u6620\u5c04\u5230PUD\u5373\u53ef\uff0c\u63a5\u4e0b\u6765\u7684PMD\u548cPTE\u7b49\u5230\u771f\u6b63\u9700\u8981\u4f7f\u7528\u65f6\u518d\u6620\u5c04\uff0c\u901a\u8fc7pud_set_huge()\u51fd\u6570\u6765\u8bbe\u7f6e\u76f8\u5e94\u7684PUD\u9875\u8868\u9879\u3002"),(0,_.kt)("p",null,"\uff085\uff09\u5982\u679cuse_1G_block()\u51fd\u6570\u5224\u65ad\u4e0d\u80fd\u901a\u8fc71GB\u5927\u5c0f\u7684\u5185\u5b58\u5757\u6765\u6620\u5c04\uff0c\u5219\u8c03\u7528alloc_init_cont_pmd()\u51fd\u6570\u6765\u8fdb\u884c\u4e0b\u4e00\u7ea7\u9875\u8868\u7684\u6620\u5c04\u3002"))}s.isMDXComponent=!0},31794:function(n,t,e){t.Z=e.p+"assets/images/1750256228169-35f7b349df8bcb01efcb3074007ce2d1.png"},62592:function(n,t,e){t.Z=e.p+"assets/images/1750256398876-59936803579409ffa50b736518e61a22.png"},46634:function(n,t,e){t.Z=e.p+"assets/images/1750257455943-2ca9d539227763087964b321f23611f4.png"},4234:function(n,t,e){t.Z=e.p+"assets/images/1750257779107-5044112e2ce99ba78bb43b2b8a877517.png"},20554:function(n,t,e){t.Z=e.p+"assets/images/1750257959806-5461911f537cd4dd1048ee2e0d8e2ed1.png"},25049:function(n,t,e){t.Z=e.p+"assets/images/1750258032381-b3a83657521e06b437cb6e58a42efac1.png"},23639:function(n,t,e){t.Z=e.p+"assets/images/1750258048470-47d958f719164894f3a1d4fc9122f62d.png"},73385:function(n,t,e){t.Z=e.p+"assets/images/1750258068683-90d5719f4694a88ca706522b053a94aa.png"},9643:function(n,t,e){t.Z=e.p+"assets/images/1750258096851-3a1d28d418143ae600d32291ac511588.png"},80767:function(n,t,e){t.Z=e.p+"assets/images/1750258443004-d638b623afd29867c20183d566035d99.png"},61335:function(n,t,e){t.Z=e.p+"assets/images/1753973146163-01b53214a01b836e69b9f91f43709bc5.png"},25381:function(n,t,e){t.Z=e.p+"assets/images/image-20250618223555275-f338241daed3f25aeffef3a4511ddaef.png"},26177:function(n,t,e){t.Z=e.p+"assets/images/image-20250728222148956-d06e02f5621d4bc334c84ddcc8849649.png"},22402:function(n,t,e){t.Z=e.p+"assets/images/image-20250728222220200-73dd6668df24cb89fbcdc03d748a1d98.png"},85374:function(n,t,e){t.Z=e.p+"assets/images/image-20250728222909328-17400a66f7647f03aab620fbfdad318c.png"},50333:function(n,t,e){t.Z=e.p+"assets/images/image-20250728222926103-53cfac8685fccc90a2836d758c5b412b.png"},43314:function(n,t,e){t.Z=e.p+"assets/images/image-20250728223142038-93ebc3909ba60125f1485c2266afb66e.png"},24562:function(n,t,e){t.Z=e.p+"assets/images/image-20250728223640062-2e48695363d2b0c198b2fc75af659936.png"},10013:function(n,t,e){t.Z=e.p+"assets/images/image-20250728223825430-7ea01283f123017013eca6ea6702754c.png"}}]);