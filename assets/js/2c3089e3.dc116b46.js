"use strict";(self.webpackChunkshaozongfan_website=self.webpackChunkshaozongfan_website||[]).push([[36208],{3905:function(n,e,t){t.d(e,{Zo:function(){return s},kt:function(){return b}});var r=t(67294);function i(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?u(Object(t),!0).forEach((function(e){i(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function a(n,e){if(null==n)return{};var t,r,i=function(n,e){if(null==n)return{};var t,r,i={},u=Object.keys(n);for(r=0;r<u.length;r++)t=u[r],e.indexOf(t)>=0||(i[t]=n[t]);return i}(n,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(r=0;r<u.length;r++)t=u[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var c=r.createContext({}),l=function(n){var e=r.useContext(c),t=e;return n&&(t="function"==typeof n?n(e):o(o({},e),n)),t},s=function(n){var e=l(n.components);return r.createElement(c.Provider,{value:e},n.children)},p={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},_=r.forwardRef((function(n,e){var t=n.components,i=n.mdxType,u=n.originalType,c=n.parentName,s=a(n,["components","mdxType","originalType","parentName"]),_=l(t),b=i,d=_["".concat(c,".").concat(b)]||_[b]||p[b]||u;return t?r.createElement(d,o(o({ref:e},s),{},{components:t})):r.createElement(d,o({ref:e},s))}));function b(n,e){var t=arguments,i=e&&e.mdxType;if("string"==typeof n||i){var u=t.length,o=new Array(u);o[0]=_;var a={};for(var c in e)hasOwnProperty.call(e,c)&&(a[c]=e[c]);a.originalType=n,a.mdxType="string"==typeof n?n:i,o[1]=a;for(var l=2;l<u;l++)o[l]=t[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}_.displayName="MDXCreateElement"},56178:function(n,e,t){t.r(e),t.d(e,{assets:function(){return s},contentTitle:function(){return c},default:function(){return b},frontMatter:function(){return a},metadata:function(){return l},toc:function(){return p}});var r=t(87462),i=t(63366),u=(t(67294),t(3905)),o=["components"],a={},c="16.1.1\u3000\u4e3b\u673a\u4fa7\u4e0e\u8bbe\u5907\u4fa7USB\u9a71\u52a8",l={unversionedId:"\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/16.1\u3000Linux USB\u9a71\u52a8\u5c42\u6b21",id:"\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/16.1\u3000Linux USB\u9a71\u52a8\u5c42\u6b21",title:"16.1.1\u3000\u4e3b\u673a\u4fa7\u4e0e\u8bbe\u5907\u4fa7USB\u9a71\u52a8",description:"USB\u91c7\u7528\u6811\u5f62\u62d3\u6251\u7ed3\u6784\uff0c\u4e3b\u673a\u4fa7\u548c\u8bbe\u5907\u4fa7\u7684USB\u63a7\u5236\u5668\u5206\u522b\u79f0\u4e3a\u4e3b\u673a\u63a7\u5236\u5668\uff08Host Controller\uff09\u548cUSB\u8bbe\u5907\u63a7\u5236\u5668\uff08UDC\uff09\uff0c\u6bcf\u6761\u603b\u7ebf\u4e0a\u53ea\u6709\u4e00\u4e2a\u4e3b\u673a\u63a7\u5236\u5668\uff0c\u8d1f\u8d23\u534f\u8c03\u4e3b\u673a\u548c\u8bbe\u5907\u95f4\u7684\u901a\u4fe1\uff0c\u800c\u8bbe\u5907\u4e0d\u80fd\u4e3b\u52a8\u5411\u4e3b\u673a\u53d1\u9001\u4efb\u4f55\u6d88\u606f\u3002\u5982\u56fe16.1\u6240\u793a\uff0c\u5728Linux\u7cfb\u7edf\u4e2d\uff0cUSB\u9a71\u52a8\u53ef\u4ee5\u4ece\u4e24\u4e2a\u89d2\u5ea6\u53bb\u89c2\u5bdf\uff0c\u4e00\u4e2a\u89d2\u5ea6\u662f\u4e3b\u673a\u4fa7\uff0c\u4e00\u4e2a\u89d2\u5ea6\u662f\u8bbe\u5907\u4fa7\u3002",source:"@site/docs/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/16.1\u3000Linux USB\u9a71\u52a8\u5c42\u6b21.md",sourceDirName:"\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3",slug:"/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/16.1\u3000Linux USB\u9a71\u52a8\u5c42\u6b21",permalink:"/docs/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/16.1\u3000Linux USB\u9a71\u52a8\u5c42\u6b21",draft:!1,editUrl:"https://github.com/shaozongfan/shaozongfan.github.io/docs/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/16.1\u3000Linux USB\u9a71\u52a8\u5c42\u6b21.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"15.7\u3000\u603b\u7ed3",permalink:"/docs/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/15.7\u3000\u603b\u7ed3"},next:{title:"16.2.1\u3000USB\u4e3b\u673a\u63a7\u5236\u5668\u9a71\u52a8\u7684\u6574\u4f53\u7ed3\u6784",permalink:"/docs/\u6280\u672f\u535a\u5ba2/\u5d4c\u5165\u5f0f/linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3/16.2\u3000USB\u4e3b\u673a\u63a7\u5236\u5668\u9a71\u52a8"}},s={},p=[],_={toc:p};function b(n){var e=n.components,a=(0,i.Z)(n,o);return(0,u.kt)("wrapper",(0,r.Z)({},_,a,{components:e,mdxType:"MDXLayout"}),(0,u.kt)("h1",{id:"1611\u4e3b\u673a\u4fa7\u4e0e\u8bbe\u5907\u4fa7usb\u9a71\u52a8"},"16.1.1\u3000\u4e3b\u673a\u4fa7\u4e0e\u8bbe\u5907\u4fa7USB\u9a71\u52a8"),(0,u.kt)("p",null,"USB\u91c7\u7528\u6811\u5f62\u62d3\u6251\u7ed3\u6784\uff0c\u4e3b\u673a\u4fa7\u548c\u8bbe\u5907\u4fa7\u7684USB\u63a7\u5236\u5668\u5206\u522b\u79f0\u4e3a\u4e3b\u673a\u63a7\u5236\u5668\uff08Host Controller\uff09\u548cUSB\u8bbe\u5907\u63a7\u5236\u5668\uff08UDC\uff09\uff0c\u6bcf\u6761\u603b\u7ebf\u4e0a\u53ea\u6709\u4e00\u4e2a\u4e3b\u673a\u63a7\u5236\u5668\uff0c\u8d1f\u8d23\u534f\u8c03\u4e3b\u673a\u548c\u8bbe\u5907\u95f4\u7684\u901a\u4fe1\uff0c\u800c\u8bbe\u5907\u4e0d\u80fd\u4e3b\u52a8\u5411\u4e3b\u673a\u53d1\u9001\u4efb\u4f55\u6d88\u606f\u3002\u5982\u56fe16.1\u6240\u793a\uff0c\u5728Linux\u7cfb\u7edf\u4e2d\uff0cUSB\u9a71\u52a8\u53ef\u4ee5\u4ece\u4e24\u4e2a\u89d2\u5ea6\u53bb\u89c2\u5bdf\uff0c\u4e00\u4e2a\u89d2\u5ea6\u662f\u4e3b\u673a\u4fa7\uff0c\u4e00\u4e2a\u89d2\u5ea6\u662f\u8bbe\u5907\u4fa7\u3002"),(0,u.kt)("p",null,"\u5982\u56fe16.1\u7684\u5de6\u4fa7\u6240\u793a\uff0c\u4ece\u4e3b\u673a\u4fa7\u53bb\u770b\uff0c\u5728Linux\u9a71\u52a8\u4e2d\uff0c\u5904\u4e8eUSB\u9a71\u52a8\u6700\u5e95\u5c42\u7684\u662fUSB\u4e3b\u673a\u63a7\u5236\u5668\u786c\u4ef6\uff0c\u5728\u5176\u4e0a\u8fd0\u884c\u7684\u662fUSB\u4e3b\u673a\u63a7\u5236\u5668\u9a71\u52a8\uff0c\u5728\u4e3b\u673a\u63a7\u5236\u5668\u4e0a\u7684\u4e3aUSB\u6838\u5fc3\u5c42\uff0c\u518d\u4e0a\u5c42\u4e3aUSB\u8bbe\u5907\u9a71\u52a8\u5c42\uff08\u63d2\u5165\u4e3b\u673a\u4e0a\u7684U\u76d8\u3001\u9f20\u6807\u3001USB\u8f6c\u4e32\u53e3\u7b49\u8bbe\u5907\u9a71\u52a8\uff09\u3002\u56e0\u6b64\uff0c\u5728\u4e3b\u673a\u4fa7\u7684\u5c42\u6b21\u7ed3\u6784\u4e2d\uff0c\u8981\u5b9e\u73b0\u7684USB\u9a71\u52a8\u5305\u62ec\u4e24\u7c7b\uff1aUSB\u4e3b\u673a\u63a7\u5236\u5668\u9a71\u52a8\u548cUSB\u8bbe\u5907\u9a71\u52a8\uff0c\u524d\u8005\u63a7\u5236\u63d2\u5165\u5176\u4e2d\u7684USB\u8bbe\u5907\uff0c\u540e\u8005\u63a7\u5236USB\u8bbe\u5907\u5982\u4f55\u4e0e\u4e3b\u673a\u901a\u4fe1\u3002Linux\u5185\u6838\u4e2d\u7684USB\u6838\u5fc3\u8d1f\u8d23USB\u9a71\u52a8\u7ba1\u7406\u548c\u534f\u8bae\u5904\u7406\u7684\u4e3b\u8981\u5de5\u4f5c\u3002\u4e3b\u673a\u63a7\u5236\u5668\u9a71\u52a8\u548c\u8bbe\u5907\u9a71\u52a8\u4e4b\u95f4\u7684USB\u6838\u5fc3\u975e\u5e38\u91cd\u8981\uff0c\u5176\u529f\u80fd\u5305\u62ec\uff1a\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\u3001\u5b8f\u548c\u529f\u80fd\u51fd\u6570\uff0c\u5411\u4e0a\u4e3a\u8bbe\u5907\u9a71\u52a8\u63d0\u4f9b\u7f16\u7a0b\u63a5\u53e3\uff0c\u5411\u4e0b\u4e3aUSB\u4e3b\u673a\u63a7\u5236\u5668\u9a71\u52a8\u63d0\u4f9b\u7f16\u7a0b\u63a5\u53e3\uff1b\u7ef4\u62a4\u6574\u4e2a\u7cfb\u7edf\u7684USB\u8bbe\u5907\u4fe1\u606f\uff1b\u5b8c\u6210\u8bbe\u5907\u70ed\u63d2\u62d4\u63a7\u5236\u3001\u603b\u7ebf\u6570\u636e\u4f20\u8f93\u63a7\u5236\u7b49\u3002"),(0,u.kt)("p",null,(0,u.kt)("img",{alt:"image-20250421222438443",src:t(40949).Z,width:"1215",height:"666"})),(0,u.kt)("p",null,"\u56fe16.1\u3000Linux USB\u9a71\u52a8\u603b\u4f53\u7ed3\u6784"),(0,u.kt)("p",null,"\u5982\u56fe16.1\u7684\u53f3\u4fa7\u6240\u793a\uff0cLinux\u5185\u6838\u4e2dUSB\u8bbe\u5907\u4fa7\u9a71\u52a8\u7a0b\u5e8f\u5206\u4e3a3\u4e2a\u5c42\u6b21\uff1aUDC\u9a71\u52a8\u7a0b\u5e8f\u3001Gadget Function API\u548cGadget Function\u9a71\u52a8\u7a0b\u5e8f\u3002UDC\u9a71\u52a8\u7a0b\u5e8f\u76f4\u63a5\u8bbf\u95ee\u786c\u4ef6\uff0c\u63a7\u5236USB\u8bbe\u5907\u548c\u4e3b\u673a\u95f4\u7684\u5e95\u5c42\u901a\u4fe1\uff0c\u5411\u4e0a\u5c42\u63d0\u4f9b\u4e0e\u786c\u4ef6\u76f8\u5173\u64cd\u4f5c\u7684\u56de\u8c03\u51fd\u6570\u3002\u5f53\u524dGadget Function API\u662fUDC\u9a71\u52a8\u7a0b\u5e8f\u56de\u8c03\u51fd\u6570\u7684\u7b80\u5355\u5305\u88c5\u3002Gadget Function\u9a71\u52a8\u7a0b\u5e8f\u5177\u4f53\u63a7\u5236USB\u8bbe\u5907\u529f\u80fd\u7684\u5b9e\u73b0\uff0c\u4f7f\u8bbe\u5907\u8868\u73b0\u51fa\u201c\u7f51\u7edc\u8fde\u63a5\u201d\u3001\u201c\u6253\u5370\u673a\u201d\u6216\u201cUSB Mass Storage\u201d\u7b49\u7279\u6027\uff0c\u5b83\u4f7f\u7528Gadget Function API\u63a7\u5236UDC\u5b9e\u73b0\u4e0a\u8ff0\u529f\u80fd\u3002Gadget Function API\u628a\u4e0b\u5c42\u7684UDC\u9a71\u52a8\u7a0b\u5e8f\u548c\u4e0a\u5c42\u7684Gadget Function\u9a71\u52a8\u7a0b\u5e8f\u9694\u79bb\u5f00\uff0c\u4f7f\u5f97\u5728Linux\u7cfb\u7edf\u4e2d\u7f16\u5199USB\u8bbe\u5907\u4fa7\u9a71\u52a8\u7a0b\u5e8f\u65f6\u80fd\u591f\u628a\u529f\u80fd\u7684\u5b9e\u73b0\u548c\u5e95\u5c42\u901a\u4fe1\u5206\u79bb\u3002"),(0,u.kt)("h1",{id:"1612\u8bbe\u5907\u914d\u7f6e\u63a5\u53e3\u7aef\u70b9"},"16.1.2\u3000\u8bbe\u5907\u3001\u914d\u7f6e\u3001\u63a5\u53e3\u3001\u7aef\u70b9"),(0,u.kt)("p",null,"\u5728USB\u8bbe\u5907\u7684\u903b\u8f91\u7ec4\u7ec7\u4e2d\uff0c\u5305\u542b\u8bbe\u5907\u3001\u914d\u7f6e\u3001\u63a5\u53e3\u548c\u7aef\u70b94\u4e2a\u5c42\u6b21\u3002"),(0,u.kt)("p",null,"\u6bcf\u4e2aUSB\u8bbe\u5907\u90fd\u63d0\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u914d\u7f6e\uff0c\u4e0d\u540c\u7684\u914d\u7f6e\u4f7f\u8bbe\u5907\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u529f\u80fd\u7ec4\u5408\uff08\u5728\u63a2\u6d4b/\u8fde\u63a5\u671f\u95f4\u9700\u4ece\u5176\u4e2d\u9009\u5b9a\u4e00\u4e2a\uff09\uff0c\u914d\u7f6e\u7531\u591a\u4e2a\u63a5\u53e3\u7ec4\u6210\u3002"),(0,u.kt)("p",null,"\u5728USB\u534f\u8bae\u4e2d\uff0c\u63a5\u53e3\u7531\u591a\u4e2a\u7aef\u70b9\u7ec4\u6210\uff0c\u4ee3\u8868\u4e00\u4e2a\u57fa\u672c\u7684\u529f\u80fd\uff0c\u662fUSB\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u63a7\u5236\u7684\u5bf9\u8c61\uff0c\u4e00\u4e2a\u529f\u80fd\u590d\u6742\u7684USB\u8bbe\u5907\u53ef\u4ee5\u5177\u6709\u591a\u4e2a\u63a5\u53e3\u3002\u6bcf\u4e2a\u914d\u7f6e\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a\u63a5\u53e3\uff0c\u800c\u8bbe\u5907\u63a5\u53e3\u662f\u7aef\u70b9\u7684\u6c47\u96c6\uff08Collection\uff09\u3002\u4f8b\u5982\uff0cUSB\u626c\u58f0\u5668\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u97f3\u9891\u63a5\u53e3\u4ee5\u53ca\u5bf9\u65cb\u94ae\u548c\u6309\u94ae\u7684\u63a5\u53e3\u3002\u4e00\u4e2a\u914d\u7f6e\u4e2d\u7684\u6240\u6709\u63a5\u53e3\u53ef\u4ee5\u540c\u65f6\u6709\u6548\uff0c\u5e76\u53ef\u88ab\u4e0d\u540c\u7684\u9a71\u52a8\u7a0b\u5e8f\u8fde\u63a5\u3002\u6bcf\u4e2a\u63a5\u53e3\u53ef\u4ee5\u6709\u5907\u7528\u63a5\u53e3\uff0c\u4ee5\u63d0\u4f9b\u4e0d\u540c\u8d28\u91cf\u7684\u670d\u52a1\u53c2\u6570\u3002"),(0,u.kt)("p",null,"\u7aef\u70b9\u662fUSB\u901a\u4fe1\u7684\u6700\u57fa\u672c\u5f62\u5f0f\uff0c\u6bcf\u4e00\u4e2aUSB\u8bbe\u5907\u63a5\u53e3\u5728\u4e3b\u673a\u770b\u6765\u5c31\u662f\u4e00\u4e2a\u7aef\u70b9\u7684\u96c6\u5408\u3002\u4e3b\u673a\u53ea\u80fd\u901a\u8fc7\u7aef\u70b9\u4e0e\u8bbe\u5907\u8fdb\u884c\u901a\u4fe1\uff0c\u4ee5\u4f7f\u7528\u8bbe\u5907\u7684\u529f\u80fd\u3002\u5728USB\u7cfb\u7edf\u4e2d\u6bcf\u4e00\u4e2a\u7aef\u70b9\u90fd\u6709\u552f\u4e00\u7684\u5730\u5740\uff0c\u8fd9\u662f\u7531\u8bbe\u5907\u5730\u5740\u548c\u7aef\u70b9\u53f7\u7ed9\u51fa\u7684\u3002\u6bcf\u4e2a\u7aef\u70b9\u90fd\u6709\u4e00\u5b9a\u7684\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u62ec\u4f20\u8f93\u65b9\u5f0f\u3001\u603b\u7ebf\u8bbf\u95ee\u9891\u7387\u3001\u5e26\u5bbd\u3001\u7aef\u70b9\u53f7\u548c\u6570\u636e\u5305\u7684\u6700\u5927\u5bb9\u91cf\u7b49\u3002\u4e00\u4e2aUSB\u7aef\u70b9\u53ea\u80fd\u5728\u4e00\u4e2a\u65b9\u5411\u4e0a\u627f\u8f7d\u6570\u636e\uff0c\u4ece\u4e3b\u673a\u5230\u8bbe\u5907\uff08\u79f0\u4e3a\u8f93\u51fa\u7aef\u70b9\uff09\u6216\u8005\u4ece\u8bbe\u5907\u5230\u4e3b\u673a\uff08\u79f0\u4e3a\u8f93\u5165\u7aef\u70b9\uff09\uff0c\u56e0\u6b64\u7aef\u70b9\u53ef\u770b\u4f5c\u662f\u4e00\u4e2a\u5355\u5411\u7684\u7ba1\u9053\u3002\u7aef\u70b90\u901a\u5e38\u4e3a\u63a7\u5236\u7aef\u70b9\uff0c\u7528\u4e8e\u8bbe\u5907\u521d\u59cb\u5316\u53c2\u6570\u7b49\u3002\u53ea\u8981\u8bbe\u5907\u8fde\u63a5\u5230USB\u4e0a\u5e76\u4e14\u4e0a\u7535\uff0c\u7aef\u70b90\u5c31\u53ef\u4ee5\u88ab\u8bbf\u95ee\u3002\u7aef\u70b91\u30012\u7b49\u4e00\u822c\u7528\u4f5c\u6570\u636e\u7aef\u70b9\uff0c\u5b58\u653e\u4e3b\u673a\u4e0e\u8bbe\u5907\u95f4\u5f80\u6765\u7684\u6570\u636e\u3002"),(0,u.kt)("p",null,"\u603b\u4f53\u800c\u8a00\uff0cUSB\u8bbe\u5907\u975e\u5e38\u590d\u6742\uff0c\u7531\u8bb8\u591a\u4e0d\u540c\u7684\u903b\u8f91\u5355\u5143\u7ec4\u6210\uff0c\u5982\u56fe16.2\u6240\u793a\uff0c\u8fd9\u4e9b\u5355\u5143\u4e4b\u95f4\u7684\u5173\u7cfb\u5982\u4e0b\uff1a"),(0,u.kt)("p",null,(0,u.kt)("img",{alt:"1745245932552",src:t(89273).Z,width:"1197",height:"484"})),(0,u.kt)("p",null,"\u56fe16.2\u3000USB\u8bbe\u5907\u3001\u914d\u7f6e\u3001\u63a5\u53e3\u548c\u7aef\u70b9"),(0,u.kt)("ul",null,(0,u.kt)("li",{parentName:"ul"},"\xb7\u8bbe\u5907\u901a\u5e38\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u914d\u7f6e\uff1b"),(0,u.kt)("li",{parentName:"ul"},"\xb7\u914d\u7f6e\u901a\u5e38\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u63a5\u53e3\uff1b"),(0,u.kt)("li",{parentName:"ul"},"\xb7\u63a5\u53e3\u901a\u5e38\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8bbe\u7f6e\uff1b"),(0,u.kt)("li",{parentName:"ul"},"\xb7\u63a5\u53e3\u6709\u96f6\u4e2a\u6216\u591a\u4e2a\u7aef\u70b9\u3002")),(0,u.kt)("p",null,"\u8fd9\u79cd\u5c42\u6b21\u5316\u914d\u7f6e\u4fe1\u606f\u5728\u8bbe\u5907\u4e2d\u901a\u8fc7\u4e00\u7ec4\u6807\u51c6\u7684\u63cf\u8ff0\u7b26\u6765\u63cf\u8ff0\uff0c\u5982\u4e0b\u6240\u793a\u3002"),(0,u.kt)("ul",null,(0,u.kt)("li",{parentName:"ul"},"\xb7\u8bbe\u5907\u63cf\u8ff0\u7b26\uff1a\u5173\u4e8e\u8bbe\u5907\u7684\u901a\u7528\u4fe1\u606f\uff0c\u5982\u4f9b\u5e94\u5546ID\u3001\u4ea7\u54c1ID\u548c\u4fee\u8ba2ID\uff0c\u652f\u6301\u7684\u8bbe\u5907\u7c7b\u3001\u5b50\u7c7b\u548c\u9002\u7528\u7684\u534f\u8bae\u4ee5\u53ca\u9ed8\u8ba4\u7aef\u70b9\u7684\u6700\u5927\u5305\u5927\u5c0f\u7b49\u3002\u5728Linux\u5185\u6838\u4e2d\uff0cUSB\u8bbe\u5907\u7528usb_device\u7ed3\u6784\u4f53\u6765\u63cf\u8ff0\uff0cUSB\u8bbe\u5907\u63cf\u8ff0\u7b26\u5b9a\u4e49\u4e3ausb_device_descriptor\u7ed3\u6784\u4f53\uff0c\u4f4d\u4e8einclude/uapi/linux/usb/ch9.h\u6587\u4ef6\u4e2d\uff0c\u5982\u4ee3\u7801\u6e05\u535516.1\u6240\u793a\u3002")),(0,u.kt)("p",null,"\u4ee3\u7801\u6e05\u535516.1\u3000usb_device_descriptor\u7ed3\u6784\u4f53"),(0,u.kt)("pre",null,(0,u.kt)("code",{parentName:"pre"}," 1struct usb_device_descriptor  {\n 2   __u8  bLength;           /* \u63cf\u8ff0\u7b26\u957f\u5ea6*/\n 3   __u8  bDescriptorType;   /* \u63cf\u8ff0\u7b26\u7c7b\u578b\u7f16\u53f7*/\n 4\n 5   __le16 bcdUSB;           /* USB\u7248\u672c\u53f7*/\n 6   __u8  bDeviceClass;      /* USB\u5206\u914d\u7684\u8bbe\u5907\u7c7bcode */\n 7   __u8  bDeviceSubClass;   /* USB\u5206\u914d\u7684\u5b50\u7c7bcode */\n 8   __u8  bDeviceProtocol;   /* USB\u5206\u914d\u7684\u534f\u8baecode */\n 9   __u8  bMaxPacketSize0;   /* endpoint0\u6700\u5927\u5305\u5927\u5c0f*/\n10   __le16 idVendor;         /* \u5382\u5546\u7f16\u53f7*/\n11   __le16 idProduct;        /* \u4ea7\u54c1\u7f16\u53f7*/\n12   __le16 bcdDevice;        /* \u8bbe\u5907\u51fa\u5382\u7f16\u53f7*/\n13   __u8  iManufacturer;     /* \u63cf\u8ff0\u5382\u5546\u5b57\u7b26\u4e32\u7684\u7d22\u5f15*/\n14   __u8  iProduct;          /* \u63cf\u8ff0\u4ea7\u54c1\u5b57\u7b26\u4e32\u7684\u7d22\u5f15*/\n15   __u8  iSerialNumber;     /* \u63cf\u8ff0\u8bbe\u5907\u5e8f\u5217\u53f7\u5b57\u7b26\u4e32\u7684\u7d22\u5f15*/\n16   __u8  bNumConfigurations;/* \u53ef\u80fd\u7684\u914d\u7f6e\u6570\u91cf*/\n17} __attribute__ ((packed));\n")),(0,u.kt)("ul",null,(0,u.kt)("li",{parentName:"ul"},"\xb7\u914d\u7f6e\u63cf\u8ff0\u7b26\uff1a\u6b64\u914d\u7f6e\u4e2d\u7684\u63a5\u53e3\u6570\u3001\u652f\u6301\u7684\u6302\u8d77\u548c\u6062\u590d\u80fd\u529b\u4ee5\u53ca\u529f\u7387\u8981\u6c42\u3002USB\u914d\u7f6e\u5728\u5185\u6838\u4e2d\u4f7f\u7528usb_host_config\u7ed3\u6784\u4f53\u63cf\u8ff0\uff0c\u800cUSB\u914d\u7f6e\u63cf\u8ff0\u7b26\u5b9a\u4e49\u4e3a\u7ed3\u6784\u4f53usb_config_descriptor\uff0c\u5982\u4ee3\u7801\u6e05\u535516.2\u6240\u793a\u3002")),(0,u.kt)("p",null,"\u4ee3\u7801\u6e05\u535516.2\u3000usb_config_descriptor\u7ed3\u6784\u4f53"),(0,u.kt)("pre",null,(0,u.kt)("code",{parentName:"pre"}," 1struct usb_config_descriptor  {\n 3   __u8  bLength;               /* \u63cf\u8ff0\u7b26\u957f\u5ea6*/\n 4   __u8  bDescriptorType;       /* \u63cf\u8ff0\u7b26\u7c7b\u578b\u7f16\u53f7*/\n 5\n 6   __le16 wTotalLength;         /* \u914d\u7f6e\u6240\u8fd4\u56de\u7684\u6240\u6709\u6570\u636e\u7684\u5927\u5c0f*/\n 7   __u8  bNumInterfaces;        /* \u914d\u7f6e\u6240\u652f\u6301\u7684\u63a5\u53e3\u6570*/\n 8   __u8  bConfigurationValue;   /* Set_Configuration\u547d\u4ee4\u9700\u8981\u7684\u53c2\u6570\u503c*/\n 9   __u8  iConfiguration;        /* \u63cf\u8ff0\u8be5\u914d\u7f6e\u7684\u5b57\u7b26\u4e32\u7684\u7d22\u5f15\u503c*/\n10   __u8  bmAttributes;          /* \u4f9b\u7535\u6a21\u5f0f\u7684\u9009\u62e9*/\n11   __u8  bMaxPower;             /* \u8bbe\u5907\u4ece\u603b\u7ebf\u63d0\u53d6\u7684\u6700\u5927\u7535\u6d41 */\n12} _ attribute__ ((packed));\n")),(0,u.kt)("ul",null,(0,u.kt)("li",{parentName:"ul"},"\xb7\u63a5\u53e3\u63cf\u8ff0\u7b26\uff1a\u63a5\u53e3\u7c7b\u3001\u5b50\u7c7b\u548c\u9002\u7528\u7684\u534f\u8bae\uff0c\u63a5\u53e3\u5907\u7528\u914d\u7f6e\u7684\u6570\u76ee\u548c\u7aef\u70b9\u6570\u76ee\u3002USB\u63a5\u53e3\u5728\u5185\u6838\u4e2d\u4f7f\u7528usb_interface\u7ed3\u6784\u4f53\u63cf\u8ff0\uff0c\u800cUSB\u63a5\u53e3\u63cf\u8ff0\u7b26\u5b9a\u4e49\u4e3a\u7ed3\u6784\u4f53usb_interface_descriptor\uff0c\u5982\u4ee3\u7801\u6e05\u535516.3\u6240\u793a\u3002")),(0,u.kt)("p",null,"\u4ee3\u7801\u6e05\u535516.3\u3000usb_interface_descriptor\u7ed3\u6784\u4f53"),(0,u.kt)("pre",null,(0,u.kt)("code",{parentName:"pre"}," 1struct usb_interface_descriptor  {\n 3   __u8  bLength;               /* \u63cf\u8ff0\u7b26\u957f\u5ea6*/\n 4   __u8  bDescriptorType;       /* \u63cf\u8ff0\u7b26\u7c7b\u578b*/\n 5\n 6   __u8  bInterfaceNumber;      /* \u63a5\u53e3\u7684\u7f16\u53f7*/\n 7   __u8  bAlternateSetting;     /* \u5907\u7528\u7684\u63a5\u53e3\u63cf\u8ff0\u7b26\u7f16\u53f7*/\n 8   __u8  bNumEndpoints;         /* \u8be5\u63a5\u53e3\u4f7f\u7528\u7684\u7aef\u70b9\u6570\uff0c\u4e0d\u5305\u62ec\u7aef\u70b90 */\n 9   __u8  bInterfaceClass;       /* \u63a5\u53e3\u7c7b\u578b*/\n10   __u8  bInterfaceSubClass;    /* \u63a5\u53e3\u5b50\u7c7b\u578b*/\n11   __u8  bInterfaceProtocol;    /* \u63a5\u53e3\u6240\u9075\u5faa\u7684\u534f\u8bae*/\n12   __u8  iInterface;            /* \u63cf\u8ff0\u8be5\u63a5\u53e3\u7684\u5b57\u7b26\u4e32\u7d22\u5f15\u503c*/\n13} __attribute__ ((packed));\n")),(0,u.kt)("ul",null,(0,u.kt)("li",{parentName:"ul"},"\xb7\u7aef\u70b9\u63cf\u8ff0\u7b26\uff1a\u7aef\u70b9\u5730\u5740\u3001\u65b9\u5411\u548c\u7c7b\u578b\uff0c\u652f\u6301\u7684\u6700\u5927\u5305\u5927\u5c0f\uff0c\u5982\u679c\u662f\u4e2d\u65ad\u7c7b\u578b\u7684\u7aef\u70b9\u5219\u8fd8\u5305\u62ec\u8f6e\u8be2\u9891\u7387\u3002\u5728Linux\u5185\u6838\u4e2d\uff0cUSB\u7aef\u70b9\u4f7f\u7528usb_host_endpoint\u7ed3\u6784\u4f53\u6765\u63cf\u8ff0\uff0c\u800cUSB\u7aef\u70b9\u63cf\u8ff0\u7b26\u5b9a\u4e49\u4e3ausb_endpoint_descriptor\u7ed3\u6784\u4f53\uff0c\u5982\u4ee3\u7801\u6e05\u535516.4\u6240\u793a\u3002")),(0,u.kt)("p",null,"\u4ee3\u7801\u6e05\u535516.4\u3000usb_endpoint_descriptor\u7ed3\u6784\u4f53"),(0,u.kt)("pre",null,(0,u.kt)("code",{parentName:"pre"}," 1  struct usb_endpoint_descriptor {\n 3   __u8  bLength;              /* \u63cf\u8ff0\u7b26\u957f\u5ea6*/\n 4   __u8  bDescriptorType;      /* \u63cf\u8ff0\u7b26\u7c7b\u578b*/\n 5   __u8  bEndpointAddress;     /* \u7aef\u70b9\u5730\u5740\uff1a0~3\u4f4d\u662f\u7aef\u70b9\u53f7\uff0c\u7b2c7\u4f4d\u662f\u65b9\u5411(0\u4e3a\u8f93\u51fa,1\u4e3a\u8f93\u5165) */\n 6   __u8  bmAttributes;         /* \u7aef\u70b9\u5c5e\u6027\uff1abit[0:1] \u7684\u503c\u4e3a00\u8868\u793a\u63a7\u5236\uff0c\u4e3a01\u8868\u793a\u540c\u6b65\uff0c\u4e3a02\u8868\u793a\u6279\u91cf\uff0c\u4e3a03\u8868\u793a\u4e2d\u65ad*/\n 7   __le16 wMaxPacketSize;      /* \u672c\u7aef\u70b9\u63a5\u6536\u6216\u53d1\u9001\u7684\u6700\u5927\u4fe1\u606f\u5305\u7684\u5927\u5c0f*/\n 8   __u8  bInterval;            /* \u8f6e\u8be2\u6570\u636e\u4f20\u9001\u7aef\u70b9\u7684\u65f6\u95f4\u95f4\u9694*/\n 9                               /* \u5bf9\u4e8e\u6279\u91cf\u4f20\u9001\u7684\u7aef\u70b9\u4ee5\u53ca\u63a7\u5236\u4f20\u9001\u7684\u7aef\u70b9\uff0c\u6b64\u57df\u5ffd\u7565*/\n10                               /* \u5bf9\u4e8e\u540c\u6b65\u4f20\u9001\u7684\u7aef\u70b9\uff0c\u6b64\u57df\u5fc5\u987b\u4e3a1 */\n11                               /* \u5bf9\u4e8e\u4e2d\u65ad\u4f20\u9001\u7684\u7aef\u70b9\uff0c\u6b64\u57df\u503c\u7684\u8303\u56f4\u4e3a1~255 */\n12   __u8  bRefresh;\n13   __u8  bSynchAddress;\n14} __attribute__ ((packed));\n")),(0,u.kt)("ul",null,(0,u.kt)("li",{parentName:"ul"},"\xb7\u5b57\u7b26\u4e32\u63cf\u8ff0\u7b26\uff1a\u5728\u5176\u4ed6\u63cf\u8ff0\u7b26\u4e2d\u4f1a\u4e3a\u67d0\u4e9b\u5b57\u6bb5\u63d0\u4f9b\u5b57\u7b26\u4e32\u7d22\u5f15\uff0c\u5b83\u4eec\u53ef\u88ab\u7528\u6765\u68c0\u7d22\u63cf\u8ff0\u6027\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u4ee5\u591a\u79cd\u8bed\u8a00\u5f62\u5f0f\u63d0\u4f9b\u3002\u5b57\u7b26\u4e32\u63cf\u8ff0\u7b26\u662f\u53ef\u9009\u7684\uff0c\u6709\u7684\u8bbe\u5907\u6709\uff0c\u6709\u7684\u8bbe\u5907\u6ca1\u6709\uff0c\u5b57\u7b26\u4e32\u63cf\u8ff0\u7b26\u5bf9\u5e94\u4e8eusb_string_descriptor\u7ed3\u6784\u4f53\uff0c\u5982\u4ee3\u7801\u6e05\u535516.5\u6240\u793a\u3002")),(0,u.kt)("p",null,"\u4ee3\u7801\u6e05\u535516.5\u3000usb_string_descriptor\u7ed3\u6784\u4f53"),(0,u.kt)("pre",null,(0,u.kt)("code",{parentName:"pre"}," 1struct usb_string_descriptor {\n 3   __u8  bLength;            /* \u63cf\u8ff0\u7b26\u957f\u5ea6*/\n 4   __u8  bDescriptorType;    /* \u63cf\u8ff0\u7b26\u7c7b\u578b*/\n 5\n 6   __le16 wData[1];          /* \u4ee5UTF-16LE\u7f16\u7801*/\n 7} __attribute__ ((packed));\n")),(0,u.kt)("p",null,"\u4f8b\u5982\uff0c\u7b14\u8005\u5728PC\u4e0a\u63d2\u5165\u4e00\u4e2aSanDisk U\u76d8\u540e\uff0c\u901a\u8fc7lsusb\u547d\u4ee4\u5f97\u5230\u4e0e\u8fd9\u4e2aU\u76d8\u76f8\u5173\u7684\u63cf\u8ff0\u7b26\uff0c\u4ece\u4e2d\u53ef\u4ee5\u663e\u793a\u8fd9\u4e2aU\u76d8\u5305\u542b\u4e86\u4e00\u4e2a\u8bbe\u5907\u63cf\u8ff0\u7b26\u3001\u4e00\u4e2a\u914d\u7f6e\u63cf\u8ff0\u7b26\u3001\u4e00\u4e2a\u63a5\u53e3\u63cf\u8ff0\u7b26\u3001\u6279\u91cf\u8f93\u5165\u548c\u6279\u91cf\u8f93\u51fa\u4e24\u4e2a\u7aef\u70b9\u63cf\u8ff0\u7b26\u3002\u5448\u73b0\u51fa\u6765\u7684\u4fe1\u606f\u5185\u5bb9\u76f4\u63a5\u5bf9\u5e94\u4e8eusb_device_descriptor\u3001usb_config_descriptor\u3001usb_interface_descriptor\u3001usb_endpoint_descriptor\u3001usb_string_descriptor\u7ed3\u6784\u4f53\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,u.kt)("pre",null,(0,u.kt)("code",{parentName:"pre"},"Bus 001 Device 004: ID 0781:5151 SanDisk Corp.\nDevice Descriptor:\n bLength              18\n bDescriptorType        1\n bcdUSB             2.00\n bDeviceClass           0 Interface\n bDeviceSubClass         0\n bDeviceProtocol         0\n bMaxPacketSize0        64\n idVendor          0x0781 SanDisk Corp.\n idProduct         0x5151\n bcdDevice           0.10\n iManufacturer          1 SanDisk Corporation\n iProduct              2 Cruzer Micro\n iSerial               3 20060877500A1BE1FDE1\n bNumConfigurations      1\n Configuration Descriptor:\n  bLength                 9\n  bDescriptorType        2\n  wTotalLength          32\n  bNumInterfaces         1\n  bConfigurationValue     1\n  iConfiguration         0\n  bmAttributes        0x80\n  MaxPower            200mA\n  Interface Descriptor:\n   bLength               9\n   bDescriptorType        4\n   bInterfaceNumber       0\n   bAlternateSetting      0\n   bNumEndpoints         2\n   bInterfaceClass        8 Mass Storage\n   bInterfaceSubClass     6 SCSI\n   bInterfaceProtocol    80 Bulk (Zip)\n   iInterface           0\n   Endpoint Descriptor:\n    bLength              7\n    bDescriptorType       5\n    bEndpointAddress    0x81  EP 1 IN\n    bmAttributes          2\n     Transfer Type         Bulk\n     Synch Type           none\n    wMaxPacketSize      512\n    bInterval            0\n   Endpoint Descriptor:\n    bLength              7\n    bDescriptorType       5\n    bEndpointAddress    0x01  EP 1 OUT\n    bmAttributes          2\n     Transfer Type           Bulk\n     Synch Type             none\n    wMaxPacketSize       512\n    bInterval             1\n Language IDs: (length=4)\n   0409 English(US)\n")))}b.isMDXComponent=!0},89273:function(n,e,t){e.Z=t.p+"assets/images/1745245932552-0338ce34a4e40141d321c098ee0ae38a.png"},40949:function(n,e,t){e.Z=t.p+"assets/images/image-20250421222438443-1065b95c589fbd144e2b0a44b3485540.png"}}]);